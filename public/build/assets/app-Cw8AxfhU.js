import"./addLines-BpIZOkiY.js";import"./listagens-Cf_HiCAz.js";function yo(t,e){return function(){return t.apply(e,arguments)}}const{toString:Xr}=Object.prototype,{getPrototypeOf:Ei}=Object,hn=(t=>e=>{const n=Xr.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ce=t=>(t=t.toLowerCase(),e=>hn(e)===t),fn=t=>e=>typeof e===t,{isArray:yt}=Array,At=fn("undefined");function Zr(t){return t!==null&&!At(t)&&t.constructor!==null&&!At(t.constructor)&&Ie(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const vo=Ce("ArrayBuffer");function Kr(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&vo(t.buffer),e}const Qr=fn("string"),Ie=fn("function"),To=fn("number"),pn=t=>t!==null&&typeof t=="object",Jr=t=>t===!0||t===!1,Jt=t=>{if(hn(t)!=="object")return!1;const e=Ei(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ea=Ce("Date"),ta=Ce("File"),na=Ce("Blob"),ia=Ce("FileList"),sa=t=>pn(t)&&Ie(t.pipe),oa=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ie(t.append)&&((e=hn(t))==="formdata"||e==="object"&&Ie(t.toString)&&t.toString()==="[object FormData]"))},ra=Ce("URLSearchParams"),aa=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ct(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,s;if(typeof t!="object"&&(t=[t]),yt(t))for(i=0,s=t.length;i<s;i++)e.call(null,t[i],i,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),r=o.length;let a;for(i=0;i<r;i++)a=o[i],e.call(null,t[a],a,t)}}function Io(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,s;for(;i-- >0;)if(s=n[i],e===s.toLowerCase())return s;return null}const Ro=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,So=t=>!At(t)&&t!==Ro;function Jn(){const{caseless:t}=So(this)&&this||{},e={},n=(i,s)=>{const o=t&&Io(e,s)||s;Jt(e[o])&&Jt(i)?e[o]=Jn(e[o],i):Jt(i)?e[o]=Jn({},i):yt(i)?e[o]=i.slice():e[o]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Ct(arguments[i],n);return e}const la=(t,e,n,{allOwnKeys:i}={})=>(Ct(e,(s,o)=>{n&&Ie(s)?t[o]=yo(s,n):t[o]=s},{allOwnKeys:i}),t),ca=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),da=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},ua=(t,e,n,i)=>{let s,o,r;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)r=s[o],(!i||i(r,t,e))&&!a[r]&&(e[r]=t[r],a[r]=!0);t=n!==!1&&Ei(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},ha=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},fa=t=>{if(!t)return null;if(yt(t))return t;let e=t.length;if(!To(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},pa=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ei(Uint8Array)),ma=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=i.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},ga=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},Ea=Ce("HTMLFormElement"),ba=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),ki=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),ya=Ce("RegExp"),_o=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Ct(n,(s,o)=>{let r;(r=e(s,o,t))!==!1&&(i[o]=r||s)}),Object.defineProperties(t,i)},va=t=>{_o(t,(e,n)=>{if(Ie(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Ie(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Ta=(t,e)=>{const n={},i=s=>{s.forEach(o=>{n[o]=!0})};return yt(t)?i(t):i(String(t).split(e)),n},Ia=()=>{},Ra=(t,e)=>(t=+t,Number.isFinite(t)?t:e),_n="abcdefghijklmnopqrstuvwxyz",Ui="0123456789",Oo={DIGIT:Ui,ALPHA:_n,ALPHA_DIGIT:_n+_n.toUpperCase()+Ui},Sa=(t=16,e=Oo.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function _a(t){return!!(t&&Ie(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Oa=t=>{const e=new Array(10),n=(i,s)=>{if(pn(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const o=yt(i)?[]:{};return Ct(i,(r,a)=>{const l=n(r,s+1);!At(l)&&(o[a]=l)}),e[s]=void 0,o}}return i};return n(t,0)},wa=Ce("AsyncFunction"),Pa=t=>t&&(pn(t)||Ie(t))&&Ie(t.then)&&Ie(t.catch),y={isArray:yt,isArrayBuffer:vo,isBuffer:Zr,isFormData:oa,isArrayBufferView:Kr,isString:Qr,isNumber:To,isBoolean:Jr,isObject:pn,isPlainObject:Jt,isUndefined:At,isDate:ea,isFile:ta,isBlob:na,isRegExp:ya,isFunction:Ie,isStream:sa,isURLSearchParams:ra,isTypedArray:pa,isFileList:ia,forEach:Ct,merge:Jn,extend:la,trim:aa,stripBOM:ca,inherits:da,toFlatObject:ua,kindOf:hn,kindOfTest:Ce,endsWith:ha,toArray:fa,forEachEntry:ma,matchAll:ga,isHTMLForm:Ea,hasOwnProperty:ki,hasOwnProp:ki,reduceDescriptors:_o,freezeMethods:va,toObjectSet:Ta,toCamelCase:ba,noop:Ia,toFiniteNumber:Ra,findKey:Io,global:Ro,isContextDefined:So,ALPHABET:Oo,generateString:Sa,isSpecCompliantForm:_a,toJSONObject:Oa,isAsyncFn:wa,isThenable:Pa};function H(t,e,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s)}y.inherits(H,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:y.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const wo=H.prototype,Po={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Po[t]={value:t}});Object.defineProperties(H,Po);Object.defineProperty(wo,"isAxiosError",{value:!0});H.from=(t,e,n,i,s,o)=>{const r=Object.create(wo);return y.toFlatObject(t,r,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),H.call(r,t.message,e,n,i,s),r.cause=t,r.name=t.name,o&&Object.assign(r,o),r};const Da=null;function ei(t){return y.isPlainObject(t)||y.isArray(t)}function Do(t){return y.endsWith(t,"[]")?t.slice(0,-2):t}function Hi(t,e,n){return t?t.concat(e).map(function(s,o){return s=Do(s),!n&&o?"["+s+"]":s}).join(n?".":""):e}function Aa(t){return y.isArray(t)&&!t.some(ei)}const Ca=y.toFlatObject(y,{},null,function(e){return/^is[A-Z]/.test(e)});function mn(t,e,n){if(!y.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=y.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,E){return!y.isUndefined(E[m])});const i=n.metaTokens,s=n.visitor||d,o=n.dots,r=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&y.isSpecCompliantForm(e);if(!y.isFunction(s))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(y.isDate(h))return h.toISOString();if(!l&&y.isBlob(h))throw new H("Blob is not supported. Use a Buffer instead.");return y.isArrayBuffer(h)||y.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function d(h,m,E){let g=h;if(h&&!E&&typeof h=="object"){if(y.endsWith(m,"{}"))m=i?m:m.slice(0,-2),h=JSON.stringify(h);else if(y.isArray(h)&&Aa(h)||(y.isFileList(h)||y.endsWith(m,"[]"))&&(g=y.toArray(h)))return m=Do(m),g.forEach(function(T,R){!(y.isUndefined(T)||T===null)&&e.append(r===!0?Hi([m],R,o):r===null?m:m+"[]",c(T))}),!1}return ei(h)?!0:(e.append(Hi(E,m,o),c(h)),!1)}const u=[],p=Object.assign(Ca,{defaultVisitor:d,convertValue:c,isVisitable:ei});function f(h,m){if(!y.isUndefined(h)){if(u.indexOf(h)!==-1)throw Error("Circular reference detected in "+m.join("."));u.push(h),y.forEach(h,function(g,b){(!(y.isUndefined(g)||g===null)&&s.call(e,g,y.isString(b)?b.trim():b,m,p))===!0&&f(g,m?m.concat(b):[b])}),u.pop()}}if(!y.isObject(t))throw new TypeError("data must be an object");return f(t),e}function ji(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function bi(t,e){this._pairs=[],t&&mn(t,this,e)}const Ao=bi.prototype;Ao.append=function(e,n){this._pairs.push([e,n])};Ao.toString=function(e){const n=e?function(i){return e.call(this,i,ji)}:ji;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Ma(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Co(t,e,n){if(!e)return t;const i=n&&n.encode||Ma,s=n&&n.serialize;let o;if(s?o=s(e,n):o=y.isURLSearchParams(e)?e.toString():new bi(e,n).toString(i),o){const r=t.indexOf("#");r!==-1&&(t=t.slice(0,r)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class qi{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){y.forEach(this.handlers,function(i){i!==null&&e(i)})}}const Mo={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},La=typeof URLSearchParams<"u"?URLSearchParams:bi,xa=typeof FormData<"u"?FormData:null,Na=typeof Blob<"u"?Blob:null,Fa={isBrowser:!0,classes:{URLSearchParams:La,FormData:xa,Blob:Na},protocols:["http","https","file","blob","url","data"]},Lo=typeof window<"u"&&typeof document<"u",Ba=(t=>Lo&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Ga=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",za=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Lo,hasStandardBrowserEnv:Ba,hasStandardBrowserWebWorkerEnv:Ga},Symbol.toStringTag,{value:"Module"})),Pe={...za,...Fa};function ka(t,e){return mn(t,new Pe.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,o){return Pe.isNode&&y.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function Ua(t){return y.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Ha(t){const e={},n=Object.keys(t);let i;const s=n.length;let o;for(i=0;i<s;i++)o=n[i],e[o]=t[o];return e}function xo(t){function e(n,i,s,o){let r=n[o++];if(r==="__proto__")return!0;const a=Number.isFinite(+r),l=o>=n.length;return r=!r&&y.isArray(s)?s.length:r,l?(y.hasOwnProp(s,r)?s[r]=[s[r],i]:s[r]=i,!a):((!s[r]||!y.isObject(s[r]))&&(s[r]=[]),e(n,i,s[r],o)&&y.isArray(s[r])&&(s[r]=Ha(s[r])),!a)}if(y.isFormData(t)&&y.isFunction(t.entries)){const n={};return y.forEachEntry(t,(i,s)=>{e(Ua(i),s,n,0)}),n}return null}function ja(t,e,n){if(y.isString(t))try{return(e||JSON.parse)(t),y.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const yi={transitional:Mo,adapter:["xhr","http"],transformRequest:[function(e,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,o=y.isObject(e);if(o&&y.isHTMLForm(e)&&(e=new FormData(e)),y.isFormData(e))return s?JSON.stringify(xo(e)):e;if(y.isArrayBuffer(e)||y.isBuffer(e)||y.isStream(e)||y.isFile(e)||y.isBlob(e))return e;if(y.isArrayBufferView(e))return e.buffer;if(y.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return ka(e,this.formSerializer).toString();if((a=y.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return mn(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),ja(e)):e}],transformResponse:[function(e){const n=this.transitional||yi.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&y.isString(e)&&(i&&!this.responseType||s)){const r=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(r)throw a.name==="SyntaxError"?H.from(a,H.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pe.classes.FormData,Blob:Pe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};y.forEach(["delete","get","head","post","put","patch"],t=>{yi.headers[t]={}});const vi=yi,qa=y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Va=t=>{const e={};let n,i,s;return t&&t.split(`
`).forEach(function(r){s=r.indexOf(":"),n=r.substring(0,s).trim().toLowerCase(),i=r.substring(s+1).trim(),!(!n||e[n]&&qa[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},Vi=Symbol("internals");function Tt(t){return t&&String(t).trim().toLowerCase()}function en(t){return t===!1||t==null?t:y.isArray(t)?t.map(en):String(t)}function $a(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const Wa=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function On(t,e,n,i,s){if(y.isFunction(i))return i.call(this,e,n);if(s&&(e=n),!!y.isString(e)){if(y.isString(i))return e.indexOf(i)!==-1;if(y.isRegExp(i))return i.test(e)}}function Ya(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function Xa(t,e){const n=y.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(s,o,r){return this[i].call(this,e,s,o,r)},configurable:!0})})}class gn{constructor(e){e&&this.set(e)}set(e,n,i){const s=this;function o(a,l,c){const d=Tt(l);if(!d)throw new Error("header name must be a non-empty string");const u=y.findKey(s,d);(!u||s[u]===void 0||c===!0||c===void 0&&s[u]!==!1)&&(s[u||l]=en(a))}const r=(a,l)=>y.forEach(a,(c,d)=>o(c,d,l));return y.isPlainObject(e)||e instanceof this.constructor?r(e,n):y.isString(e)&&(e=e.trim())&&!Wa(e)?r(Va(e),n):e!=null&&o(n,e,i),this}get(e,n){if(e=Tt(e),e){const i=y.findKey(this,e);if(i){const s=this[i];if(!n)return s;if(n===!0)return $a(s);if(y.isFunction(n))return n.call(this,s,i);if(y.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Tt(e),e){const i=y.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||On(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let s=!1;function o(r){if(r=Tt(r),r){const a=y.findKey(i,r);a&&(!n||On(i,i[a],a,n))&&(delete i[a],s=!0)}}return y.isArray(e)?e.forEach(o):o(e),s}clear(e){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const o=n[i];(!e||On(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const n=this,i={};return y.forEach(this,(s,o)=>{const r=y.findKey(i,o);if(r){n[r]=en(s),delete n[o];return}const a=e?Ya(o):String(o).trim();a!==o&&delete n[o],n[a]=en(s),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return y.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=e&&y.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[Vi]=this[Vi]={accessors:{}}).accessors,s=this.prototype;function o(r){const a=Tt(r);i[a]||(Xa(s,r),i[a]=!0)}return y.isArray(e)?e.forEach(o):o(e),this}}gn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);y.reduceDescriptors(gn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});y.freezeMethods(gn);const Fe=gn;function wn(t,e){const n=this||vi,i=e||n,s=Fe.from(i.headers);let o=i.data;return y.forEach(t,function(a){o=a.call(n,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function No(t){return!!(t&&t.__CANCEL__)}function Mt(t,e,n){H.call(this,t??"canceled",H.ERR_CANCELED,e,n),this.name="CanceledError"}y.inherits(Mt,H,{__CANCEL__:!0});function Za(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new H("Request failed with status code "+n.status,[H.ERR_BAD_REQUEST,H.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Ka=Pe.hasStandardBrowserEnv?{write(t,e,n,i,s,o){const r=[t+"="+encodeURIComponent(e)];y.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),y.isString(i)&&r.push("path="+i),y.isString(s)&&r.push("domain="+s),o===!0&&r.push("secure"),document.cookie=r.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qa(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Ja(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Fo(t,e){return t&&!Qa(e)?Ja(t,e):e}const el=Pe.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function s(o){let r=o;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(r){const a=y.isString(r)?s(r):r;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function tl(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function nl(t,e){t=t||10;const n=new Array(t),i=new Array(t);let s=0,o=0,r;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=i[o];r||(r=c),n[s]=l,i[s]=c;let u=o,p=0;for(;u!==s;)p+=n[u++],u=u%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),c-r<e)return;const f=d&&c-d;return f?Math.round(p*1e3/f):void 0}}function $i(t,e){let n=0;const i=nl(50,250);return s=>{const o=s.loaded,r=s.lengthComputable?s.total:void 0,a=o-n,l=i(a),c=o<=r;n=o;const d={loaded:o,total:r,progress:r?o/r:void 0,bytes:a,rate:l||void 0,estimated:l&&r&&c?(r-o)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const il=typeof XMLHttpRequest<"u",sl=il&&function(t){return new Promise(function(n,i){let s=t.data;const o=Fe.from(t.headers).normalize();let{responseType:r,withXSRFToken:a}=t,l;function c(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let d;if(y.isFormData(s)){if(Pe.hasStandardBrowserEnv||Pe.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((d=o.getContentType())!==!1){const[m,...E]=d?d.split(";").map(g=>g.trim()).filter(Boolean):[];o.setContentType([m||"multipart/form-data",...E].join("; "))}}let u=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",E=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(m+":"+E))}const p=Fo(t.baseURL,t.url);u.open(t.method.toUpperCase(),Co(p,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function f(){if(!u)return;const m=Fe.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),g={data:!r||r==="text"||r==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:m,config:t,request:u};Za(function(T){n(T),c()},function(T){i(T),c()},g),u=null}if("onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(f)},u.onabort=function(){u&&(i(new H("Request aborted",H.ECONNABORTED,t,u)),u=null)},u.onerror=function(){i(new H("Network Error",H.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let E=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const g=t.transitional||Mo;t.timeoutErrorMessage&&(E=t.timeoutErrorMessage),i(new H(E,g.clarifyTimeoutError?H.ETIMEDOUT:H.ECONNABORTED,t,u)),u=null},Pe.hasStandardBrowserEnv&&(a&&y.isFunction(a)&&(a=a(t)),a||a!==!1&&el(p))){const m=t.xsrfHeaderName&&t.xsrfCookieName&&Ka.read(t.xsrfCookieName);m&&o.set(t.xsrfHeaderName,m)}s===void 0&&o.setContentType(null),"setRequestHeader"in u&&y.forEach(o.toJSON(),function(E,g){u.setRequestHeader(g,E)}),y.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),r&&r!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",$i(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",$i(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=m=>{u&&(i(!m||m.type?new Mt(null,t,u):m),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const h=tl(p);if(h&&Pe.protocols.indexOf(h)===-1){i(new H("Unsupported protocol "+h+":",H.ERR_BAD_REQUEST,t));return}u.send(s||null)})},ti={http:Da,xhr:sl};y.forEach(ti,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Wi=t=>`- ${t}`,ol=t=>y.isFunction(t)||t===null||t===!1,Bo={getAdapter:t=>{t=y.isArray(t)?t:[t];const{length:e}=t;let n,i;const s={};for(let o=0;o<e;o++){n=t[o];let r;if(i=n,!ol(n)&&(i=ti[(r=String(n)).toLowerCase()],i===void 0))throw new H(`Unknown adapter '${r}'`);if(i)break;s[r||"#"+o]=i}if(!i){const o=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let r=e?o.length>1?`since :
`+o.map(Wi).join(`
`):" "+Wi(o[0]):"as no adapter specified";throw new H("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return i},adapters:ti};function Pn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Mt(null,t)}function Yi(t){return Pn(t),t.headers=Fe.from(t.headers),t.data=wn.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Bo.getAdapter(t.adapter||vi.adapter)(t).then(function(i){return Pn(t),i.data=wn.call(t,t.transformResponse,i),i.headers=Fe.from(i.headers),i},function(i){return No(i)||(Pn(t),i&&i.response&&(i.response.data=wn.call(t,t.transformResponse,i.response),i.response.headers=Fe.from(i.response.headers))),Promise.reject(i)})}const Xi=t=>t instanceof Fe?{...t}:t;function gt(t,e){e=e||{};const n={};function i(c,d,u){return y.isPlainObject(c)&&y.isPlainObject(d)?y.merge.call({caseless:u},c,d):y.isPlainObject(d)?y.merge({},d):y.isArray(d)?d.slice():d}function s(c,d,u){if(y.isUndefined(d)){if(!y.isUndefined(c))return i(void 0,c,u)}else return i(c,d,u)}function o(c,d){if(!y.isUndefined(d))return i(void 0,d)}function r(c,d){if(y.isUndefined(d)){if(!y.isUndefined(c))return i(void 0,c)}else return i(void 0,d)}function a(c,d,u){if(u in e)return i(c,d);if(u in t)return i(void 0,c)}const l={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(c,d)=>s(Xi(c),Xi(d),!0)};return y.forEach(Object.keys(Object.assign({},t,e)),function(d){const u=l[d]||s,p=u(t[d],e[d],d);y.isUndefined(p)&&u!==a||(n[d]=p)}),n}const Go="1.6.8",Ti={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ti[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const Zi={};Ti.transitional=function(e,n,i){function s(o,r){return"[Axios v"+Go+"] Transitional option '"+o+"'"+r+(i?". "+i:"")}return(o,r,a)=>{if(e===!1)throw new H(s(r," has been removed"+(n?" in "+n:"")),H.ERR_DEPRECATED);return n&&!Zi[r]&&(Zi[r]=!0,console.warn(s(r," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,r,a):!0}};function rl(t,e,n){if(typeof t!="object")throw new H("options must be an object",H.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let s=i.length;for(;s-- >0;){const o=i[s],r=e[o];if(r){const a=t[o],l=a===void 0||r(a,o,t);if(l!==!0)throw new H("option "+o+" must be "+l,H.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new H("Unknown option "+o,H.ERR_BAD_OPTION)}}const ni={assertOptions:rl,validators:Ti},ke=ni.validators;class sn{constructor(e){this.defaults=e,this.interceptors={request:new qi,response:new qi}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=gt(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:o}=n;i!==void 0&&ni.assertOptions(i,{silentJSONParsing:ke.transitional(ke.boolean),forcedJSONParsing:ke.transitional(ke.boolean),clarifyTimeoutError:ke.transitional(ke.boolean)},!1),s!=null&&(y.isFunction(s)?n.paramsSerializer={serialize:s}:ni.assertOptions(s,{encode:ke.function,serialize:ke.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let r=o&&y.merge(o.common,o[n.method]);o&&y.forEach(["delete","get","head","post","put","patch","common"],h=>{delete o[h]}),n.headers=Fe.concat(r,o);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let d,u=0,p;if(!l){const h=[Yi.bind(this),void 0];for(h.unshift.apply(h,a),h.push.apply(h,c),p=h.length,d=Promise.resolve(n);u<p;)d=d.then(h[u++],h[u++]);return d}p=a.length;let f=n;for(u=0;u<p;){const h=a[u++],m=a[u++];try{f=h(f)}catch(E){m.call(this,E);break}}try{d=Yi.call(this,f)}catch(h){return Promise.reject(h)}for(u=0,p=c.length;u<p;)d=d.then(c[u++],c[u++]);return d}getUri(e){e=gt(this.defaults,e);const n=Fo(e.baseURL,e.url);return Co(n,e.params,e.paramsSerializer)}}y.forEach(["delete","get","head","options"],function(e){sn.prototype[e]=function(n,i){return this.request(gt(i||{},{method:e,url:n,data:(i||{}).data}))}});y.forEach(["post","put","patch"],function(e){function n(i){return function(o,r,a){return this.request(gt(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:r}))}}sn.prototype[e]=n(),sn.prototype[e+"Form"]=n(!0)});const tn=sn;class Ii{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(s=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](s);i._listeners=null}),this.promise.then=s=>{let o;const r=new Promise(a=>{i.subscribe(a),o=a}).then(s);return r.cancel=function(){i.unsubscribe(o)},r},e(function(o,r,a){i.reason||(i.reason=new Mt(o,r,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Ii(function(s){e=s}),cancel:e}}}const al=Ii;function ll(t){return function(n){return t.apply(null,n)}}function cl(t){return y.isObject(t)&&t.isAxiosError===!0}const ii={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ii).forEach(([t,e])=>{ii[e]=t});const dl=ii;function zo(t){const e=new tn(t),n=yo(tn.prototype.request,e);return y.extend(n,tn.prototype,e,{allOwnKeys:!0}),y.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return zo(gt(t,s))},n}const ee=zo(vi);ee.Axios=tn;ee.CanceledError=Mt;ee.CancelToken=al;ee.isCancel=No;ee.VERSION=Go;ee.toFormData=mn;ee.AxiosError=H;ee.Cancel=ee.CanceledError;ee.all=function(e){return Promise.all(e)};ee.spread=ll;ee.isAxiosError=cl;ee.mergeConfig=gt;ee.AxiosHeaders=Fe;ee.formToJSON=t=>xo(y.isHTMLForm(t)?new FormData(t):t);ee.getAdapter=Bo.getAdapter;ee.HttpStatusCode=dl;ee.default=ee;const Ri=ee;window.axios=Ri;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function ul(){document.getElementById("loading").style.display="flex"}function Ki(){document.getElementById("loading").style.display="none"}function Dn(t){const e=document.querySelector("#errorModal .modal-content p");e.innerText=t,new bootstrap.Modal(document.getElementById("errorModal")).show()}Ri.interceptors.request.use(function(t){return t.data instanceof FormData&&(t.headers["Content-Type"]="multipart/form-data"),ul(),t},function(t){return Promise.reject(t)});Ri.interceptors.response.use(function(t){return Ki(),t},function(t){return Ki(),t.response?Dn(t.response.data.message||"Erro desconhecido"):t.request?Dn("Sem resposta do servidor"):Dn("Erro ao enviar requisição"),Promise.reject(t)});function si(){let t=document.getElementById("logradouro"),e=document.getElementById("bairro"),n=document.getElementById("cidade"),i=document.getElementById("estado");t.value="",t.disabled=!1,e.value="",e.disabled=!1,n.value="",n.disabled=!1,i.value="",i.disabled=!1}window.meu_callback=function(t){if("erro"in t)si(),alert("CEP não encontrado.");else{let e=document.getElementById("logradouro"),n=document.getElementById("bairro"),i=document.getElementById("cidade"),s=document.getElementById("estado");e.value=t.logradouro,e.readOnly=!0,n.value=t.bairro,n.readOnly=!0,i.value=t.localidade,i.readOnly=!0,s.value=t.uf,s.readOnly=!0}};window.pesquisaCep=function(t){var e=t.replace(/\D/g,"");if(e!=""){var n=/^[0-9]{8}$/;if(n.test(e)){document.getElementById("logradouro").value="...",document.getElementById("bairro").value="...",document.getElementById("cidade").value="...",document.getElementById("estado").value="...";var i=document.createElement("script");i.src="https://viacep.com.br/ws/"+e+"/json/?callback=meu_callback",document.body.appendChild(i)}else si(),alert("Formato de CEP inválido.")}else si()};var ko=function(t){return t.replace(/\D/g,"").length>11?"00.000.000/0000-00":"000.000.000-009"},hl={onKeyPress:function(t,e,n,i){n.mask(ko.apply({},arguments),i)}};$("#cpfcnpj").mask(ko,hl);var Uo=function(t){return t.replace(/\D/g,"").length>10?"(00) 00000-0000":"(00) 0000-00009"},fl={onKeyPress:function(t,e,n,i){n.mask(Uo(t),i)}};$(".phone").mask(Uo,fl);document.addEventListener("DOMContentLoaded",function(){Fancybox.bind("[data-fancybox]",{})});/*!
 * FilePond 4.30.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const pl=t=>t instanceof HTMLElement,ml=(t,e=[],n=[])=>{const i={...t},s=[],o=[],r=()=>({...i}),a=()=>{const h=[...s];return s.length=0,h},l=()=>{const h=[...o];o.length=0,h.forEach(({type:m,data:E})=>{c(m,E)})},c=(h,m,E)=>{if(E&&!document.hidden){o.push({type:h,data:m});return}f[h]&&f[h](m),s.push({type:h,data:m})},d=(h,...m)=>p[h]?p[h](...m):null,u={getState:r,processActionQueue:a,processDispatchQueue:l,dispatch:c,query:d};let p={};e.forEach(h=>{p={...h(i),...p}});let f={};return n.forEach(h=>{f={...h(c,d,i),...f}}),u},gl=(t,e,n)=>{if(typeof n=="function"){t[e]=n;return}Object.defineProperty(t,e,{...n})},X=(t,e)=>{for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])},je=t=>{const e={};return X(t,n=>{gl(e,n,t[n])}),e},J=(t,e,n=null)=>{if(n===null)return t.getAttribute(e)||t.hasAttribute(e);t.setAttribute(e,n)},El="http://www.w3.org/2000/svg",bl=["svg","path"],Qi=t=>bl.includes(t),on=(t,e,n={})=>{typeof e=="object"&&(n=e,e=null);const i=Qi(t)?document.createElementNS(El,t):document.createElement(t);return e&&(Qi(t)?J(i,"class",e):i.className=e),X(n,(s,o)=>{J(i,s,o)}),i},yl=t=>(e,n)=>{typeof n<"u"&&t.children[n]?t.insertBefore(e,t.children[n]):t.appendChild(e)},vl=(t,e)=>(n,i)=>(typeof i<"u"?e.splice(i,0,n):e.push(n),n),Tl=(t,e)=>n=>(e.splice(e.indexOf(n),1),n.element.parentNode&&t.removeChild(n.element),n),Il=typeof window<"u"&&typeof window.document<"u",Ho=()=>Il,Rl=Ho()?on("svg"):{},Sl="children"in Rl?t=>t.children.length:t=>t.childNodes.length,jo=(t,e,n,i)=>{const s=n[0]||t.left,o=n[1]||t.top,r=s+t.width,a=o+t.height*(i[1]||1),l={element:{...t},inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:s,top:o,right:r,bottom:a}};return e.filter(c=>!c.isRectIgnored()).map(c=>c.rect).forEach(c=>{Ji(l.inner,{...c.inner}),Ji(l.outer,{...c.outer})}),es(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,es(l.outer),l},Ji=(t,e)=>{e.top+=t.top,e.right+=t.left,e.bottom+=t.top,e.left+=t.left,e.bottom>t.bottom&&(t.bottom=e.bottom),e.right>t.right&&(t.right=e.right)},es=t=>{t.width=t.right-t.left,t.height=t.bottom-t.top},Xe=t=>typeof t=="number",_l=(t,e,n,i=.001)=>Math.abs(t-e)<i&&Math.abs(n)<i,Ol=({stiffness:t=.5,damping:e=.75,mass:n=10}={})=>{let i=null,s=null,o=0,r=!1;const c=je({interpolate:(d,u)=>{if(r)return;if(!(Xe(i)&&Xe(s))){r=!0,o=0;return}const p=-(s-i)*t;o+=p/n,s+=o,o*=e,_l(s,i,o)||u?(s=i,o=0,r=!0,c.onupdate(s),c.oncomplete(s)):c.onupdate(s)},target:{set:d=>{if(Xe(d)&&!Xe(s)&&(s=d),i===null&&(i=d,s=d),i=d,s===i||typeof i>"u"){r=!0,o=0,c.onupdate(s),c.oncomplete(s);return}r=!1},get:()=>i},resting:{get:()=>r},onupdate:d=>{},oncomplete:d=>{}});return c},wl=t=>t<.5?2*t*t:-1+(4-2*t)*t,Pl=({duration:t=500,easing:e=wl,delay:n=0}={})=>{let i=null,s,o,r=!0,a=!1,l=null;const d=je({interpolate:(u,p)=>{r||l===null||(i===null&&(i=u),!(u-i<n)&&(s=u-i-n,s>=t||p?(s=1,o=a?0:1,d.onupdate(o*l),d.oncomplete(o*l),r=!0):(o=s/t,d.onupdate((s>=0?e(a?1-o:o):0)*l))))},target:{get:()=>a?0:l,set:u=>{if(l===null){l=u,d.onupdate(u),d.oncomplete(u);return}u<l?(l=1,a=!0):(a=!1,l=u),r=!1,i=null}},resting:{get:()=>r},onupdate:u=>{},oncomplete:u=>{}});return d},ts={spring:Ol,tween:Pl},Dl=(t,e,n)=>{const i=t[e]&&typeof t[e][n]=="object"?t[e][n]:t[e]||t,s=typeof i=="string"?i:i.type,o=typeof i=="object"?{...i}:{};return ts[s]?ts[s](o):null},Si=(t,e,n,i=!1)=>{e=Array.isArray(e)?e:[e],e.forEach(s=>{t.forEach(o=>{let r=o,a=()=>n[o],l=c=>n[o]=c;typeof o=="object"&&(r=o.key,a=o.getter||a,l=o.setter||l),!(s[r]&&!i)&&(s[r]={get:a,set:l})})})},Al=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:i})=>{const s={...e},o=[];return X(t,(r,a)=>{const l=Dl(a);if(!l)return;l.onupdate=d=>{e[r]=d},l.target=s[r],Si([{key:r,setter:d=>{l.target!==d&&(l.target=d)},getter:()=>e[r]}],[n,i],e,!0),o.push(l)}),{write:r=>{let a=document.hidden,l=!0;return o.forEach(c=>{c.resting||(l=!1),c.interpolate(r,a)}),l},destroy:()=>{}}},Cl=t=>(e,n)=>{t.addEventListener(e,n)},Ml=t=>(e,n)=>{t.removeEventListener(e,n)},Ll=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:i,viewState:s,view:o})=>{const r=[],a=Cl(o.element),l=Ml(o.element);return i.on=(c,d)=>{r.push({type:c,fn:d}),a(c,d)},i.off=(c,d)=>{r.splice(r.findIndex(u=>u.type===c&&u.fn===d),1),l(c,d)},{write:()=>!0,destroy:()=>{r.forEach(c=>{l(c.type,c.fn)})}}},xl=({mixinConfig:t,viewProps:e,viewExternalAPI:n})=>{Si(t,n,e)},ae=t=>t!=null,Nl={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Fl=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:i,view:s})=>{const o={...e},r={};Si(t,[n,i],e);const a=()=>[e.translateX||0,e.translateY||0],l=()=>[e.scaleX||0,e.scaleY||0],c=()=>s.rect?jo(s.rect,s.childViews,a(),l()):null;return n.rect={get:c},i.rect={get:c},t.forEach(d=>{e[d]=typeof o[d]>"u"?Nl[d]:o[d]}),{write:()=>{if(Bl(r,e))return Gl(s.element,e),Object.assign(r,{...e}),!0},destroy:()=>{}}},Bl=(t,e)=>{if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const n in e)if(e[n]!==t[n])return!0;return!1},Gl=(t,{opacity:e,perspective:n,translateX:i,translateY:s,scaleX:o,scaleY:r,rotateX:a,rotateY:l,rotateZ:c,originX:d,originY:u,width:p,height:f})=>{let h="",m="";(ae(d)||ae(u))&&(m+=`transform-origin: ${d||0}px ${u||0}px;`),ae(n)&&(h+=`perspective(${n}px) `),(ae(i)||ae(s))&&(h+=`translate3d(${i||0}px, ${s||0}px, 0) `),(ae(o)||ae(r))&&(h+=`scale3d(${ae(o)?o:1}, ${ae(r)?r:1}, 1) `),ae(c)&&(h+=`rotateZ(${c}rad) `),ae(a)&&(h+=`rotateX(${a}rad) `),ae(l)&&(h+=`rotateY(${l}rad) `),h.length&&(m+=`transform:${h};`),ae(e)&&(m+=`opacity:${e};`,e===0&&(m+="visibility:hidden;"),e<1&&(m+="pointer-events:none;")),ae(f)&&(m+=`height:${f}px;`),ae(p)&&(m+=`width:${p}px;`);const E=t.elementCurrentStyle||"";(m.length!==E.length||m!==E)&&(t.style.cssText=m,t.elementCurrentStyle=m)},zl={styles:Fl,listeners:Ll,animations:Al,apis:xl},ns=(t={},e={},n={})=>(e.layoutCalculated||(t.paddingTop=parseInt(n.paddingTop,10)||0,t.marginTop=parseInt(n.marginTop,10)||0,t.marginRight=parseInt(n.marginRight,10)||0,t.marginBottom=parseInt(n.marginBottom,10)||0,t.marginLeft=parseInt(n.marginLeft,10)||0,e.layoutCalculated=!0),t.left=e.offsetLeft||0,t.top=e.offsetTop||0,t.width=e.offsetWidth||0,t.height=e.offsetHeight||0,t.right=t.left+t.width,t.bottom=t.top+t.height,t.scrollTop=e.scrollTop,t.hidden=e.offsetParent===null,t),te=({tag:t="div",name:e=null,attributes:n={},read:i=()=>{},write:s=()=>{},create:o=()=>{},destroy:r=()=>{},filterFrameActionsForChild:a=(f,h)=>h,didCreateView:l=()=>{},didWriteView:c=()=>{},ignoreRect:d=!1,ignoreRectUpdate:u=!1,mixins:p=[]}={})=>(f,h={})=>{const m=on(t,`filepond--${e}`,n),E=window.getComputedStyle(m,null),g=ns();let b=null,T=!1;const R=[],P=[],C={},N={},w=[s],x=[i],G=[r],M=()=>m,F=()=>R.concat(),z=()=>C,S=U=>(oe,Me)=>oe(U,Me),k=()=>b||(b=jo(g,R,[0,0],[1,1]),b),I=()=>E,_=()=>{b=null,R.forEach(Me=>Me._read()),!(u&&g.width&&g.height)&&ns(g,m,E);const oe={root:ze,props:h,rect:g};x.forEach(Me=>Me(oe))},L=(U,oe,Me)=>{let rt=oe.length===0;return w.forEach(de=>{de({props:h,root:ze,actions:oe,timestamp:U,shouldOptimize:Me})===!1&&(rt=!1)}),P.forEach(de=>{de.write(U)===!1&&(rt=!1)}),R.filter(de=>!!de.element.parentNode).forEach(de=>{de._write(U,a(de,oe),Me)||(rt=!1)}),R.forEach((de,xt)=>{de.element.parentNode||(ze.appendChild(de.element,xt),de._read(),de._write(U,a(de,oe),Me),rt=!1)}),T=rt,c({props:h,root:ze,actions:oe,timestamp:U}),rt},A=()=>{P.forEach(U=>U.destroy()),G.forEach(U=>{U({root:ze,props:h})}),R.forEach(U=>U._destroy())},W={element:{get:M},style:{get:I},childViews:{get:F}},Y={...W,rect:{get:k},ref:{get:z},is:U=>e===U,appendChild:yl(m),createChildView:S(f),linkView:U=>(R.push(U),U),unlinkView:U=>{R.splice(R.indexOf(U),1)},appendChildView:vl(m,R),removeChildView:Tl(m,R),registerWriter:U=>w.push(U),registerReader:U=>x.push(U),registerDestroyer:U=>G.push(U),invalidateLayout:()=>m.layoutCalculated=!1,dispatch:f.dispatch,query:f.query},Sn={element:{get:M},childViews:{get:F},rect:{get:k},resting:{get:()=>T},isRectIgnored:()=>d,_read:_,_write:L,_destroy:A},Wr={...W,rect:{get:()=>g}};Object.keys(p).sort((U,oe)=>U==="styles"?1:oe==="styles"?-1:0).forEach(U=>{const oe=zl[U]({mixinConfig:p[U],viewProps:h,viewState:N,viewInternalAPI:Y,viewExternalAPI:Sn,view:je(Wr)});oe&&P.push(oe)});const ze=je(Y);o({root:ze,props:h});const Yr=Sl(m);return R.forEach((U,oe)=>{ze.appendChild(U.element,Yr+oe)}),l(ze),je(Sn)},kl=(t,e,n=60)=>{const i="__framePainter";if(window[i]){window[i].readers.push(t),window[i].writers.push(e);return}window[i]={readers:[t],writers:[e]};const s=window[i],o=1e3/n;let r=null,a=null,l=null,c=null;const d=()=>{document.hidden?(l=()=>window.setTimeout(()=>u(performance.now()),o),c=()=>window.clearTimeout(a)):(l=()=>window.requestAnimationFrame(u),c=()=>window.cancelAnimationFrame(a))};document.addEventListener("visibilitychange",()=>{c&&c(),d(),u(performance.now())});const u=p=>{a=l(u),r||(r=p);const f=p-r;f<=o||(r=p-f%o,s.readers.forEach(h=>h()),s.writers.forEach(h=>h(p)))};return d(),u(performance.now()),{pause:()=>{c(a)}}},ce=(t,e)=>({root:n,props:i,actions:s=[],timestamp:o,shouldOptimize:r})=>{s.filter(a=>t[a.type]).forEach(a=>t[a.type]({root:n,props:i,action:a.data,timestamp:o,shouldOptimize:r})),e&&e({root:n,props:i,actions:s,timestamp:o,shouldOptimize:r})},is=(t,e)=>e.parentNode.insertBefore(t,e),ss=(t,e)=>e.parentNode.insertBefore(t,e.nextSibling),En=t=>Array.isArray(t),Be=t=>t==null,Ul=t=>t.trim(),bn=t=>""+t,Hl=(t,e=",")=>Be(t)?[]:En(t)?t:bn(t).split(e).map(Ul).filter(n=>n.length),qo=t=>typeof t=="boolean",Vo=t=>qo(t)?t:t==="true",le=t=>typeof t=="string",$o=t=>Xe(t)?t:le(t)?bn(t).replace(/[a-z]+/gi,""):0,nn=t=>parseInt($o(t),10),os=t=>parseFloat($o(t)),vt=t=>Xe(t)&&isFinite(t)&&Math.floor(t)===t,rs=(t,e=1e3)=>{if(vt(t))return t;let n=bn(t).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),nn(n)*e*e):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),nn(n)*e):nn(n)},Ze=t=>typeof t=="function",jl=t=>{let e=self,n=t.split("."),i=null;for(;i=n.shift();)if(e=e[i],!e)return null;return e},as={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},ql=t=>{const e={};return e.url=le(t)?t:t.url||"",e.timeout=t.timeout?parseInt(t.timeout,10):0,e.headers=t.headers?t.headers:{},X(as,n=>{e[n]=Vl(n,t[n],as[n],e.timeout,e.headers)}),e.process=t.process||le(t)||t.url?e.process:null,e.remove=t.remove||null,delete e.headers,e},Vl=(t,e,n,i,s)=>{if(e===null)return null;if(typeof e=="function")return e;const o={url:n==="GET"||n==="PATCH"?`?${t}=`:"",method:n,headers:s,withCredentials:!1,timeout:i,onload:null,ondata:null,onerror:null};if(le(e))return o.url=e,o;if(Object.assign(o,e),le(o.headers)){const r=o.headers.split(/:(.+)/);o.headers={header:r[0],value:r[1]}}return o.withCredentials=Vo(o.withCredentials),o},$l=t=>ql(t),Wl=t=>t===null,se=t=>typeof t=="object"&&t!==null,Yl=t=>se(t)&&le(t.url)&&se(t.process)&&se(t.revert)&&se(t.restore)&&se(t.fetch),oi=t=>En(t)?"array":Wl(t)?"null":vt(t)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)?"bytes":Yl(t)?"api":typeof t,Xl=t=>t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),Zl={array:Hl,boolean:Vo,int:t=>oi(t)==="bytes"?rs(t):nn(t),number:os,float:os,bytes:rs,string:t=>Ze(t)?t:bn(t),function:t=>jl(t),serverapi:$l,object:t=>{try{return JSON.parse(Xl(t))}catch{return null}}},Kl=(t,e)=>Zl[e](t),Wo=(t,e,n)=>{if(t===e)return t;let i=oi(t);if(i!==n){const s=Kl(t,n);if(i=oi(s),s===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;t=s}return t},Ql=(t,e)=>{let n=t;return{enumerable:!0,get:()=>n,set:i=>{n=Wo(i,t,e)}}},Jl=t=>{const e={};return X(t,n=>{const i=t[n];e[n]=Ql(i[0],i[1])}),je(e)},ec=t=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:Jl(t)}),yn=(t,e="-")=>t.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(e),tc=(t,e)=>{const n={};return X(e,i=>{n[i]={get:()=>t.getState().options[i],set:s=>{t.dispatch(`SET_${yn(i,"_").toUpperCase()}`,{value:s})}}}),n},nc=t=>(e,n,i)=>{const s={};return X(t,o=>{const r=yn(o,"_").toUpperCase();s[`SET_${r}`]=a=>{try{i.options[o]=a.value}catch{}e(`DID_SET_${r}`,{value:i.options[o]})}}),s},ic=t=>e=>{const n={};return X(t,i=>{n[`GET_${yn(i,"_").toUpperCase()}`]=s=>e.options[i]}),n},Te={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},_i=()=>Math.random().toString(36).substring(2,11),Oi=(t,e)=>t.splice(e,1),sc=(t,e)=>{e?t():document.hidden?Promise.resolve(1).then(t):setTimeout(t,0)},vn=()=>{const t=[],e=(i,s)=>{Oi(t,t.findIndex(o=>o.event===i&&(o.cb===s||!s)))},n=(i,s,o)=>{t.filter(r=>r.event===i).map(r=>r.cb).forEach(r=>sc(()=>r(...s),o))};return{fireSync:(i,...s)=>{n(i,s,!0)},fire:(i,...s)=>{n(i,s,!1)},on:(i,s)=>{t.push({event:i,cb:s})},onOnce:(i,s)=>{t.push({event:i,cb:(...o)=>{e(i,s),s(...o)}})},off:e}},Yo=(t,e,n)=>{Object.getOwnPropertyNames(t).filter(i=>!n.includes(i)).forEach(i=>Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i)))},oc=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],ue=t=>{const e={};return Yo(t,e,oc),e},rc=t=>{t.forEach((e,n)=>{e.released&&Oi(t,n)})},B={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},ne={INPUT:1,LIMBO:2,LOCAL:3},Xo=t=>/[^0-9]+/.exec(t),Zo=()=>Xo(1.1.toLocaleString())[0],ac=()=>{const t=Zo(),e=1e3.toLocaleString();return e!=="1000"?Xo(e)[0]:t==="."?",":"."},v={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},wi=[],Re=(t,e,n)=>new Promise((i,s)=>{const o=wi.filter(a=>a.key===t).map(a=>a.cb);if(o.length===0){i(e);return}const r=o.shift();o.reduce((a,l)=>a.then(c=>l(c,n)),r(e,n)).then(a=>i(a)).catch(a=>s(a))}),st=(t,e,n)=>wi.filter(i=>i.key===t).map(i=>i.cb(e,n)),lc=(t,e)=>wi.push({key:t,cb:e}),cc=t=>Object.assign(ft,t),rn=()=>({...ft}),dc=t=>{X(t,(e,n)=>{ft[e]&&(ft[e][0]=Wo(n,ft[e][0],ft[e][1]))})},ft={id:[null,v.STRING],name:["filepond",v.STRING],disabled:[!1,v.BOOLEAN],className:[null,v.STRING],required:[!1,v.BOOLEAN],captureMethod:[null,v.STRING],allowSyncAcceptAttribute:[!0,v.BOOLEAN],allowDrop:[!0,v.BOOLEAN],allowBrowse:[!0,v.BOOLEAN],allowPaste:[!0,v.BOOLEAN],allowMultiple:[!1,v.BOOLEAN],allowReplace:[!0,v.BOOLEAN],allowRevert:[!0,v.BOOLEAN],allowRemove:[!0,v.BOOLEAN],allowProcess:[!0,v.BOOLEAN],allowReorder:[!1,v.BOOLEAN],allowDirectoriesOnly:[!1,v.BOOLEAN],storeAsFile:[!1,v.BOOLEAN],forceRevert:[!1,v.BOOLEAN],maxFiles:[null,v.INT],checkValidity:[!1,v.BOOLEAN],itemInsertLocationFreedom:[!0,v.BOOLEAN],itemInsertLocation:["before",v.STRING],itemInsertInterval:[75,v.INT],dropOnPage:[!1,v.BOOLEAN],dropOnElement:[!0,v.BOOLEAN],dropValidation:[!1,v.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],v.ARRAY],instantUpload:[!0,v.BOOLEAN],maxParallelUploads:[2,v.INT],allowMinimumUploadDuration:[!0,v.BOOLEAN],chunkUploads:[!1,v.BOOLEAN],chunkForce:[!1,v.BOOLEAN],chunkSize:[5e6,v.INT],chunkRetryDelays:[[500,1e3,3e3],v.ARRAY],server:[null,v.SERVER_API],fileSizeBase:[1e3,v.INT],labelFileSizeBytes:["bytes",v.STRING],labelFileSizeKilobytes:["KB",v.STRING],labelFileSizeMegabytes:["MB",v.STRING],labelFileSizeGigabytes:["GB",v.STRING],labelDecimalSeparator:[Zo(),v.STRING],labelThousandsSeparator:[ac(),v.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',v.STRING],labelInvalidField:["Field contains invalid files",v.STRING],labelFileWaitingForSize:["Waiting for size",v.STRING],labelFileSizeNotAvailable:["Size not available",v.STRING],labelFileCountSingular:["file in list",v.STRING],labelFileCountPlural:["files in list",v.STRING],labelFileLoading:["Loading",v.STRING],labelFileAdded:["Added",v.STRING],labelFileLoadError:["Error during load",v.STRING],labelFileRemoved:["Removed",v.STRING],labelFileRemoveError:["Error during remove",v.STRING],labelFileProcessing:["Uploading",v.STRING],labelFileProcessingComplete:["Upload complete",v.STRING],labelFileProcessingAborted:["Upload cancelled",v.STRING],labelFileProcessingError:["Error during upload",v.STRING],labelFileProcessingRevertError:["Error during revert",v.STRING],labelTapToCancel:["tap to cancel",v.STRING],labelTapToRetry:["tap to retry",v.STRING],labelTapToUndo:["tap to undo",v.STRING],labelButtonRemoveItem:["Remove",v.STRING],labelButtonAbortItemLoad:["Abort",v.STRING],labelButtonRetryItemLoad:["Retry",v.STRING],labelButtonAbortItemProcessing:["Cancel",v.STRING],labelButtonUndoItemProcessing:["Undo",v.STRING],labelButtonRetryItemProcessing:["Retry",v.STRING],labelButtonProcessItem:["Upload",v.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',v.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',v.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',v.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',v.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',v.STRING],oninit:[null,v.FUNCTION],onwarning:[null,v.FUNCTION],onerror:[null,v.FUNCTION],onactivatefile:[null,v.FUNCTION],oninitfile:[null,v.FUNCTION],onaddfilestart:[null,v.FUNCTION],onaddfileprogress:[null,v.FUNCTION],onaddfile:[null,v.FUNCTION],onprocessfilestart:[null,v.FUNCTION],onprocessfileprogress:[null,v.FUNCTION],onprocessfileabort:[null,v.FUNCTION],onprocessfilerevert:[null,v.FUNCTION],onprocessfile:[null,v.FUNCTION],onprocessfiles:[null,v.FUNCTION],onremovefile:[null,v.FUNCTION],onpreparefile:[null,v.FUNCTION],onupdatefiles:[null,v.FUNCTION],onreorderfiles:[null,v.FUNCTION],beforeDropFile:[null,v.FUNCTION],beforeAddFile:[null,v.FUNCTION],beforeRemoveFile:[null,v.FUNCTION],beforePrepareFile:[null,v.FUNCTION],stylePanelLayout:[null,v.STRING],stylePanelAspectRatio:[null,v.STRING],styleItemPanelAspectRatio:[null,v.STRING],styleButtonRemoveItemPosition:["left",v.STRING],styleButtonProcessItemPosition:["right",v.STRING],styleLoadIndicatorPosition:["right",v.STRING],styleProgressIndicatorPosition:["right",v.STRING],styleButtonRemoveItemAlign:[!1,v.BOOLEAN],files:[[],v.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],v.ARRAY]},Ke=(t,e)=>Be(e)?t[0]||null:vt(e)?t[e]||null:(typeof e=="object"&&(e=e.id),t.find(n=>n.id===e)||null),Ko=t=>{if(Be(t))return t;if(/:/.test(t)){const e=t.split(":");return e[1]/e[0]}return parseFloat(t)},Se=t=>t.filter(e=>!e.archived),uc={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Nt=null;const hc=()=>{if(Nt===null)try{const t=new DataTransfer;t.items.add(new File(["hello world"],"This_Works.txt"));const e=document.createElement("input");e.setAttribute("type","file"),e.files=t.files,Nt=e.files.length===1}catch{Nt=!1}return Nt},fc=[B.LOAD_ERROR,B.PROCESSING_ERROR,B.PROCESSING_REVERT_ERROR],pc=[B.LOADING,B.PROCESSING,B.PROCESSING_QUEUED,B.INIT],mc=[B.PROCESSING_COMPLETE],gc=t=>fc.includes(t.status),Ec=t=>pc.includes(t.status),bc=t=>mc.includes(t.status),ls=t=>se(t.options.server)&&(se(t.options.server.process)||Ze(t.options.server.process)),yc=t=>({GET_STATUS:()=>{const e=Se(t.items),{EMPTY:n,ERROR:i,BUSY:s,IDLE:o,READY:r}=uc;return e.length===0?n:e.some(gc)?i:e.some(Ec)?s:e.some(bc)?r:o},GET_ITEM:e=>Ke(t.items,e),GET_ACTIVE_ITEM:e=>Ke(Se(t.items),e),GET_ACTIVE_ITEMS:()=>Se(t.items),GET_ITEMS:()=>t.items,GET_ITEM_NAME:e=>{const n=Ke(t.items,e);return n?n.filename:null},GET_ITEM_SIZE:e=>{const n=Ke(t.items,e);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(t.options).filter(e=>/^style/.test(e)).map(e=>({name:e,value:t.options[e]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(t.options.stylePanelLayout)?1:Ko(t.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>t.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:e=>Se(t.items).filter(n=>n.status===e),GET_TOTAL_ITEMS:()=>Se(t.items).length,SHOULD_UPDATE_FILE_INPUT:()=>t.options.storeAsFile&&hc()&&!ls(t),IS_ASYNC:()=>ls(t),GET_FILE_SIZE_LABELS:e=>({labelBytes:e("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:e("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:e("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:e("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),vc=t=>{const e=Se(t.items).length;if(!t.options.allowMultiple)return e===0;const n=t.options.maxFiles;return n===null||e<n},Qo=(t,e,n)=>Math.max(Math.min(n,t),e),Tc=(t,e,n)=>t.splice(e,0,n),Ic=(t,e,n)=>Be(e)?null:typeof n>"u"?(t.push(e),e):(n=Qo(n,0,t.length),Tc(t,n,e),e),ri=t=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t),Lt=t=>`${t}`.split("/").pop().split("?").shift(),Tn=t=>t.split(".").pop(),Rc=t=>{if(typeof t!="string")return"";const e=t.split("/").pop();return/svg/.test(e)?"svg":/zip|compressed/.test(e)?"zip":/plain/.test(e)?"txt":/msword/.test(e)?"doc":/[a-z]+/.test(e)?e==="jpeg"?"jpg":e:""},It=(t,e="")=>(e+t).slice(-e.length),Jo=(t=new Date)=>`${t.getFullYear()}-${It(t.getMonth()+1,"00")}-${It(t.getDate(),"00")}_${It(t.getHours(),"00")}-${It(t.getMinutes(),"00")}-${It(t.getSeconds(),"00")}`,Et=(t,e,n=null,i=null)=>{const s=typeof n=="string"?t.slice(0,t.size,n):t.slice(0,t.size,t.type);return s.lastModifiedDate=new Date,t._relativePath&&(s._relativePath=t._relativePath),le(e)||(e=Jo()),e&&i===null&&Tn(e)?s.name=e:(i=i||Rc(s.type),s.name=e+(i?"."+i:"")),s},Sc=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,er=(t,e)=>{const n=Sc();if(n){const i=new n;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},_c=(t,e)=>{const n=new ArrayBuffer(t.length),i=new Uint8Array(n);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return er(n,e)},tr=t=>(/^data:(.+);/.exec(t)||[])[1]||null,Oc=t=>t.split(",")[1].replace(/\s/g,""),wc=t=>atob(Oc(t)),Pc=t=>{const e=tr(t),n=wc(t);return _c(n,e)},Dc=(t,e,n)=>Et(Pc(t),e,null,n),Ac=t=>{if(!/^content-disposition:/i.test(t))return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return e.length?decodeURI(e[e.length-1]):null},Cc=t=>{if(/content-length:/i.test(t)){const e=t.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},Mc=t=>/x-content-transfer-id:/i.test(t)&&(t.split(":")[1]||"").trim()||null,Pi=t=>{const e={source:null,name:null,size:null},n=t.split(`
`);for(let i of n){const s=Ac(i);if(s){e.name=s;continue}const o=Cc(i);if(o){e.size=o;continue}const r=Mc(i);if(r){e.source=r;continue}}return e},Lc=t=>{const e={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>e.progress,i=()=>{e.request&&e.request.abort&&e.request.abort()},s=()=>{const a=e.source;r.fire("init",a),a instanceof File?r.fire("load",a):a instanceof Blob?r.fire("load",Et(a,a.name)):ri(a)?r.fire("load",Dc(a)):o(a)},o=a=>{if(!t){r.fire("error",{type:"error",body:"Can't load URL",code:400});return}e.timestamp=Date.now(),e.request=t(a,l=>{e.duration=Date.now()-e.timestamp,e.complete=!0,l instanceof Blob&&(l=Et(l,l.name||Lt(a))),r.fire("load",l instanceof Blob?l:l?l.body:null)},l=>{r.fire("error",typeof l=="string"?{type:"error",code:0,body:l}:l)},(l,c,d)=>{if(d&&(e.size=d),e.duration=Date.now()-e.timestamp,!l){e.progress=null;return}e.progress=c/d,r.fire("progress",e.progress)},()=>{r.fire("abort")},l=>{const c=Pi(typeof l=="string"?l:l.headers);r.fire("meta",{size:e.size||c.size,filename:c.name,source:c.source})})},r={...vn(),setSource:a=>e.source=a,getProgress:n,abort:i,load:s};return r},cs=t=>/GET|HEAD/.test(t),Je=(t,e,n)=>{const i={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{s=!0,r.abort()}};let s=!1,o=!1;n={method:"POST",headers:{},withCredentials:!1,...n},e=encodeURI(e),cs(n.method)&&t&&(e=`${e}${encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))}`);const r=new XMLHttpRequest,a=cs(n.method)?r:r.upload;return a.onprogress=l=>{s||i.onprogress(l.lengthComputable,l.loaded,l.total)},r.onreadystatechange=()=>{r.readyState<2||r.readyState===4&&r.status===0||o||(o=!0,i.onheaders(r))},r.onload=()=>{r.status>=200&&r.status<300?i.onload(r):i.onerror(r)},r.onerror=()=>i.onerror(r),r.onabort=()=>{s=!0,i.onabort()},r.ontimeout=()=>i.ontimeout(r),r.open(n.method,e,!0),vt(n.timeout)&&(r.timeout=n.timeout),Object.keys(n.headers).forEach(l=>{const c=unescape(encodeURIComponent(n.headers[l]));r.setRequestHeader(l,c)}),n.responseType&&(r.responseType=n.responseType),n.withCredentials&&(r.withCredentials=!0),r.send(t),i},Z=(t,e,n,i)=>({type:t,code:e,body:n,headers:i}),et=t=>e=>{t(Z("error",0,"Timeout",e.getAllResponseHeaders()))},ds=t=>/\?/.test(t),Pt=(...t)=>{let e="";return t.forEach(n=>{e+=ds(e)&&ds(n)?n.replace(/\?/,"&"):n}),e},An=(t="",e)=>{if(typeof e=="function")return e;if(!e||!le(e.url))return null;const n=e.onload||(s=>s),i=e.onerror||(s=>null);return(s,o,r,a,l,c)=>{const d=Je(s,Pt(t,e.url),{...e,responseType:"blob"});return d.onload=u=>{const p=u.getAllResponseHeaders(),f=Pi(p).name||Lt(s);o(Z("load",u.status,e.method==="HEAD"?null:Et(n(u.response),f),p))},d.onerror=u=>{r(Z("error",u.status,i(u.response)||u.statusText,u.getAllResponseHeaders()))},d.onheaders=u=>{c(Z("headers",u.status,null,u.getAllResponseHeaders()))},d.ontimeout=et(r),d.onprogress=a,d.onabort=l,d}},me={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},xc=(t,e,n,i,s,o,r,a,l,c,d)=>{const u=[],{chunkTransferId:p,chunkServer:f,chunkSize:h,chunkRetryDelays:m}=d,E={serverId:p,aborted:!1},g=e.ondata||(S=>S),b=e.onload||((S,k)=>k==="HEAD"?S.getResponseHeader("Upload-Offset"):S.response),T=e.onerror||(S=>null),R=S=>{const k=new FormData;se(s)&&k.append(n,JSON.stringify(s));const I=typeof e.headers=="function"?e.headers(i,s):{...e.headers,"Upload-Length":i.size},_={...e,headers:I},L=Je(g(k),Pt(t,e.url),_);L.onload=A=>S(b(A,_.method)),L.onerror=A=>r(Z("error",A.status,T(A.response)||A.statusText,A.getAllResponseHeaders())),L.ontimeout=et(r)},P=S=>{const k=Pt(t,f.url,E.serverId),_={headers:typeof e.headers=="function"?e.headers(E.serverId):{...e.headers},method:"HEAD"},L=Je(null,k,_);L.onload=A=>S(b(A,_.method)),L.onerror=A=>r(Z("error",A.status,T(A.response)||A.statusText,A.getAllResponseHeaders())),L.ontimeout=et(r)},C=Math.floor(i.size/h);for(let S=0;S<=C;S++){const k=S*h,I=i.slice(k,k+h,"application/offset+octet-stream");u[S]={index:S,size:I.size,offset:k,data:I,file:i,progress:0,retries:[...m],status:me.QUEUED,error:null,request:null,timeout:null}}const N=()=>o(E.serverId),w=S=>S.status===me.QUEUED||S.status===me.ERROR,x=S=>{if(E.aborted)return;if(S=S||u.find(w),!S){u.every(W=>W.status===me.COMPLETE)&&N();return}S.status=me.PROCESSING,S.progress=null;const k=f.ondata||(W=>W),I=f.onerror||(W=>null),_=Pt(t,f.url,E.serverId),L=typeof f.headers=="function"?f.headers(S):{...f.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":S.offset,"Upload-Length":i.size,"Upload-Name":i.name},A=S.request=Je(k(S.data),_,{...f,headers:L});A.onload=()=>{S.status=me.COMPLETE,S.request=null,F()},A.onprogress=(W,Y,Sn)=>{S.progress=W?Y:null,M()},A.onerror=W=>{S.status=me.ERROR,S.request=null,S.error=I(W.response)||W.statusText,G(S)||r(Z("error",W.status,I(W.response)||W.statusText,W.getAllResponseHeaders()))},A.ontimeout=W=>{S.status=me.ERROR,S.request=null,G(S)||et(r)(W)},A.onabort=()=>{S.status=me.QUEUED,S.request=null,l()}},G=S=>S.retries.length===0?!1:(S.status=me.WAITING,clearTimeout(S.timeout),S.timeout=setTimeout(()=>{x(S)},S.retries.shift()),!0),M=()=>{const S=u.reduce((I,_)=>I===null||_.progress===null?null:I+_.progress,0);if(S===null)return a(!1,0,0);const k=u.reduce((I,_)=>I+_.size,0);a(!0,S,k)},F=()=>{u.filter(k=>k.status===me.PROCESSING).length>=1||x()},z=()=>{u.forEach(S=>{clearTimeout(S.timeout),S.request&&S.request.abort()})};return E.serverId?P(S=>{E.aborted||(u.filter(k=>k.offset<S).forEach(k=>{k.status=me.COMPLETE,k.progress=k.size}),F())}):R(S=>{E.aborted||(c(S),E.serverId=S,F())}),{abort:()=>{E.aborted=!0,z()}}},Nc=(t,e,n,i)=>(s,o,r,a,l,c,d)=>{if(!s)return;const u=i.chunkUploads,p=u&&s.size>i.chunkSize,f=u&&(p||i.chunkForce);if(s instanceof Blob&&f)return xc(t,e,n,s,o,r,a,l,c,d,i);const h=e.ondata||(P=>P),m=e.onload||(P=>P),E=e.onerror||(P=>null),g=typeof e.headers=="function"?e.headers(s,o)||{}:{...e.headers},b={...e,headers:g};var T=new FormData;se(o)&&T.append(n,JSON.stringify(o)),(s instanceof Blob?[{name:null,file:s}]:s).forEach(P=>{T.append(n,P.file,P.name===null?P.file.name:`${P.name}${P.file.name}`)});const R=Je(h(T),Pt(t,e.url),b);return R.onload=P=>{r(Z("load",P.status,m(P.response),P.getAllResponseHeaders()))},R.onerror=P=>{a(Z("error",P.status,E(P.response)||P.statusText,P.getAllResponseHeaders()))},R.ontimeout=et(a),R.onprogress=l,R.onabort=c,R},Fc=(t="",e,n,i)=>typeof e=="function"?(...s)=>e(n,...s,i):!e||!le(e.url)?null:Nc(t,e,n,i),Rt=(t="",e)=>{if(typeof e=="function")return e;if(!e||!le(e.url))return(s,o)=>o();const n=e.onload||(s=>s),i=e.onerror||(s=>null);return(s,o,r)=>{const a=Je(s,t+e.url,e);return a.onload=l=>{o(Z("load",l.status,n(l.response),l.getAllResponseHeaders()))},a.onerror=l=>{r(Z("error",l.status,i(l.response)||l.statusText,l.getAllResponseHeaders()))},a.ontimeout=et(r),a}},nr=(t=0,e=1)=>t+Math.random()*(e-t),Bc=(t,e=1e3,n=0,i=25,s=250)=>{let o=null;const r=Date.now(),a=()=>{let l=Date.now()-r,c=nr(i,s);l+c>e&&(c=l+c-e);let d=l/e;if(d>=1||document.hidden){t(1);return}t(d),o=setTimeout(a,c)};return e>0&&a(),{clear:()=>{clearTimeout(o)}}},Gc=(t,e)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:i}=e,s=(d,u)=>{const p=()=>{n.duration===0||n.progress===null||c.fire("progress",c.getProgress())},f=()=>{n.complete=!0,c.fire("load-perceived",n.response.body)};c.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=Bc(h=>{n.perceivedProgress=h,n.perceivedDuration=Date.now()-n.timestamp,p(),n.response&&n.perceivedProgress===1&&!n.complete&&f()},i?nr(750,1500):0),n.request=t(d,u,h=>{n.response=se(h)?h:{type:"load",code:200,body:`${h}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,c.fire("load",n.response.body),(!i||i&&n.perceivedProgress===1)&&f()},h=>{n.perceivedPerformanceUpdater.clear(),c.fire("error",se(h)?h:{type:"error",code:0,body:`${h}`})},(h,m,E)=>{n.duration=Date.now()-n.timestamp,n.progress=h?m/E:null,p()},()=>{n.perceivedPerformanceUpdater.clear(),c.fire("abort",n.response?n.response.body:null)},h=>{c.fire("transfer",h)})},o=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},r=()=>{o(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},a=i?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,l=i?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,c={...vn(),process:s,abort:o,getProgress:a,getDuration:l,reset:r};return c},ir=t=>t.substring(0,t.lastIndexOf("."))||t,zc=t=>{let e=[t.name,t.size,t.type];return t instanceof Blob||ri(t)?e[0]=t.name||Jo():ri(t)?(e[1]=t.length,e[2]=tr(t)):le(t)&&(e[0]=Lt(t),e[1]=0,e[2]="application/octet-stream"),{name:e[0],size:e[1],type:e[2]}},bt=t=>!!(t instanceof File||t instanceof Blob&&t.name),sr=t=>{if(!se(t))return t;const e=En(t)?[]:{};for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n];e[n]=i&&se(i)?sr(i):i}return e},kc=(t=null,e=null,n=null)=>{const i=_i(),s={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:e,transferId:null,processingAborted:!1,status:e?B.PROCESSING_COMPLETE:B.INIT,activeLoader:null,activeProcessor:null};let o=null;const r={},a=w=>s.status=w,l=(w,...x)=>{s.released||s.frozen||C.fire(w,...x)},c=()=>Tn(s.file.name),d=()=>s.file.type,u=()=>s.file.size,p=()=>s.file,f=(w,x,G)=>{if(s.source=w,C.fireSync("init"),s.file){C.fireSync("load-skip");return}s.file=zc(w),x.on("init",()=>{l("load-init")}),x.on("meta",M=>{s.file.size=M.size,s.file.filename=M.filename,M.source&&(t=ne.LIMBO,s.serverFileReference=M.source,s.status=B.PROCESSING_COMPLETE),l("load-meta")}),x.on("progress",M=>{a(B.LOADING),l("load-progress",M)}),x.on("error",M=>{a(B.LOAD_ERROR),l("load-request-error",M)}),x.on("abort",()=>{a(B.INIT),l("load-abort")}),x.on("load",M=>{s.activeLoader=null;const F=S=>{s.file=bt(S)?S:s.file,t===ne.LIMBO&&s.serverFileReference?a(B.PROCESSING_COMPLETE):a(B.IDLE),l("load")},z=S=>{s.file=M,l("load-meta"),a(B.LOAD_ERROR),l("load-file-error",S)};if(s.serverFileReference){F(M);return}G(M,F,z)}),x.setSource(w),s.activeLoader=x,x.load()},h=()=>{s.activeLoader&&s.activeLoader.load()},m=()=>{if(s.activeLoader){s.activeLoader.abort();return}a(B.INIT),l("load-abort")},E=(w,x)=>{if(s.processingAborted){s.processingAborted=!1;return}if(a(B.PROCESSING),o=null,!(s.file instanceof Blob)){C.on("load",()=>{E(w,x)});return}w.on("load",F=>{s.transferId=null,s.serverFileReference=F}),w.on("transfer",F=>{s.transferId=F}),w.on("load-perceived",F=>{s.activeProcessor=null,s.transferId=null,s.serverFileReference=F,a(B.PROCESSING_COMPLETE),l("process-complete",F)}),w.on("start",()=>{l("process-start")}),w.on("error",F=>{s.activeProcessor=null,a(B.PROCESSING_ERROR),l("process-error",F)}),w.on("abort",F=>{s.activeProcessor=null,s.serverFileReference=F,a(B.IDLE),l("process-abort"),o&&o()}),w.on("progress",F=>{l("process-progress",F)});const G=F=>{s.archived||w.process(F,{...r})},M=console.error;x(s.file,G,M),s.activeProcessor=w},g=()=>{s.processingAborted=!1,a(B.PROCESSING_QUEUED)},b=()=>new Promise(w=>{if(!s.activeProcessor){s.processingAborted=!0,a(B.IDLE),l("process-abort"),w();return}o=()=>{w()},s.activeProcessor.abort()}),T=(w,x)=>new Promise((G,M)=>{const F=s.serverFileReference!==null?s.serverFileReference:s.transferId;if(F===null){G();return}w(F,()=>{s.serverFileReference=null,s.transferId=null,G()},z=>{if(!x){G();return}a(B.PROCESSING_REVERT_ERROR),l("process-revert-error"),M(z)}),a(B.IDLE),l("process-revert")}),R=(w,x,G)=>{const M=w.split("."),F=M[0],z=M.pop();let S=r;M.forEach(k=>S=S[k]),JSON.stringify(S[z])!==JSON.stringify(x)&&(S[z]=x,l("metadata-update",{key:F,value:r[F],silent:G}))},C={id:{get:()=>i},origin:{get:()=>t,set:w=>t=w},serverId:{get:()=>s.serverFileReference},transferId:{get:()=>s.transferId},status:{get:()=>s.status},filename:{get:()=>s.file.name},filenameWithoutExtension:{get:()=>ir(s.file.name)},fileExtension:{get:c},fileType:{get:d},fileSize:{get:u},file:{get:p},relativePath:{get:()=>s.file._relativePath},source:{get:()=>s.source},getMetadata:w=>sr(w?r[w]:r),setMetadata:(w,x,G)=>{if(se(w)){const M=w;return Object.keys(M).forEach(F=>{R(F,M[F],x)}),w}return R(w,x,G),x},extend:(w,x)=>N[w]=x,abortLoad:m,retryLoad:h,requestProcessing:g,abortProcessing:b,load:f,process:E,revert:T,...vn(),freeze:()=>s.frozen=!0,release:()=>s.released=!0,released:{get:()=>s.released},archive:()=>s.archived=!0,archived:{get:()=>s.archived}},N=je(C);return N},Uc=(t,e)=>Be(e)?0:le(e)?t.findIndex(n=>n.id===e):-1,us=(t,e)=>{const n=Uc(t,e);if(!(n<0))return t[n]||null},hs=(t,e,n,i,s,o)=>{const r=Je(null,t,{method:"GET",responseType:"blob"});return r.onload=a=>{const l=a.getAllResponseHeaders(),c=Pi(l).name||Lt(t);e(Z("load",a.status,Et(a.response,c),l))},r.onerror=a=>{n(Z("error",a.status,a.statusText,a.getAllResponseHeaders()))},r.onheaders=a=>{o(Z("headers",a.status,null,a.getAllResponseHeaders()))},r.ontimeout=et(n),r.onprogress=i,r.onabort=s,r},fs=t=>(t.indexOf("//")===0&&(t=location.protocol+t),t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),Hc=t=>(t.indexOf(":")>-1||t.indexOf("//")>-1)&&fs(location.href)!==fs(t),Ft=t=>(...e)=>Ze(t)?t(...e):t,jc=t=>!bt(t.file),Cn=(t,e)=>{clearTimeout(e.listUpdateTimeout),e.listUpdateTimeout=setTimeout(()=>{t("DID_UPDATE_ITEMS",{items:Se(e.items)})},0)},ps=(t,...e)=>new Promise(n=>{if(!t)return n(!0);const i=t(...e);if(i==null)return n(!0);if(typeof i=="boolean")return n(i);typeof i.then=="function"&&i.then(n)}),Mn=(t,e)=>{t.items.sort((n,i)=>e(ue(n),ue(i)))},ge=(t,e)=>({query:n,success:i=()=>{},failure:s=()=>{},...o}={})=>{const r=Ke(t.items,n);if(!r){s({error:Z("error",0,"Item not found"),file:null});return}e(r,i,s,o||{})},qc=(t,e,n)=>({ABORT_ALL:()=>{Se(n.items).forEach(i=>{i.freeze(),i.abortLoad(),i.abortProcessing()})},DID_SET_FILES:({value:i=[]})=>{const s=i.map(r=>({source:r.source?r.source:r,options:r.options}));let o=Se(n.items);o.forEach(r=>{s.find(a=>a.source===r.source||a.source===r.file)||t("REMOVE_ITEM",{query:r,remove:!1})}),o=Se(n.items),s.forEach((r,a)=>{o.find(l=>l.source===r.source||l.file===r.source)||t("ADD_ITEM",{...r,interactionMethod:Te.NONE,index:a})})},DID_UPDATE_ITEM_METADATA:({id:i,action:s,change:o})=>{o.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const r=us(n.items,i);if(!e("IS_ASYNC")){Re("SHOULD_PREPARE_OUTPUT",!1,{item:r,query:e,action:s,change:o}).then(d=>{const u=e("GET_BEFORE_PREPARE_FILE");u&&(d=u(r,d)),d&&t("REQUEST_PREPARE_OUTPUT",{query:i,item:r,success:p=>{t("DID_PREPARE_OUTPUT",{id:i,file:p})}},!0)});return}r.origin===ne.LOCAL&&t("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.source});const a=()=>{setTimeout(()=>{t("REQUEST_ITEM_PROCESSING",{query:i})},32)},l=d=>{r.revert(Rt(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(d?a:()=>{}).catch(()=>{})},c=d=>{r.abortProcessing().then(d?a:()=>{})};if(r.status===B.PROCESSING_COMPLETE)return l(n.options.instantUpload);if(r.status===B.PROCESSING)return c(n.options.instantUpload);n.options.instantUpload&&a()},0))},MOVE_ITEM:({query:i,index:s})=>{const o=Ke(n.items,i);if(!o)return;const r=n.items.indexOf(o);s=Qo(s,0,n.items.length-1),r!==s&&n.items.splice(s,0,n.items.splice(r,1)[0])},SORT:({compare:i})=>{Mn(n,i),t("DID_SORT_ITEMS",{items:e("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:i,index:s,interactionMethod:o,success:r=()=>{},failure:a=()=>{}})=>{let l=s;if(s===-1||typeof s>"u"){const f=e("GET_ITEM_INSERT_LOCATION"),h=e("GET_TOTAL_ITEMS");l=f==="before"?0:h}const c=e("GET_IGNORED_FILES"),d=f=>bt(f)?!c.includes(f.name.toLowerCase()):!Be(f),p=i.filter(d).map(f=>new Promise((h,m)=>{t("ADD_ITEM",{interactionMethod:o,source:f.source||f,success:h,failure:m,index:l++,options:f.options||{}})}));Promise.all(p).then(r).catch(a)},ADD_ITEM:({source:i,index:s=-1,interactionMethod:o,success:r=()=>{},failure:a=()=>{},options:l={}})=>{if(Be(i)){a({error:Z("error",0,"No source"),file:null});return}if(bt(i)&&n.options.ignoredFiles.includes(i.name.toLowerCase()))return;if(!vc(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const b=Z("warning",0,"Max files");t("DID_THROW_MAX_FILES",{source:i,error:b}),a({error:b,file:null});return}const g=Se(n.items)[0];if(g.status===B.PROCESSING_COMPLETE||g.status===B.PROCESSING_REVERT_ERROR){const b=e("GET_FORCE_REVERT");if(g.revert(Rt(n.options.server.url,n.options.server.revert),b).then(()=>{b&&t("ADD_ITEM",{source:i,index:s,interactionMethod:o,success:r,failure:a,options:l})}).catch(()=>{}),b)return}t("REMOVE_ITEM",{query:g.id})}const c=l.type==="local"?ne.LOCAL:l.type==="limbo"?ne.LIMBO:ne.INPUT,d=kc(c,c===ne.INPUT?null:i,l.file);Object.keys(l.metadata||{}).forEach(g=>{d.setMetadata(g,l.metadata[g])}),st("DID_CREATE_ITEM",d,{query:e,dispatch:t});const u=e("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(s=u==="before"?-1:n.items.length),Ic(n.items,d,s),Ze(u)&&i&&Mn(n,u);const p=d.id;d.on("init",()=>{t("DID_INIT_ITEM",{id:p})}),d.on("load-init",()=>{t("DID_START_ITEM_LOAD",{id:p})}),d.on("load-meta",()=>{t("DID_UPDATE_ITEM_META",{id:p})}),d.on("load-progress",g=>{t("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:g})}),d.on("load-request-error",g=>{const b=Ft(n.options.labelFileLoadError)(g);if(g.code>=400&&g.code<500){t("DID_THROW_ITEM_INVALID",{id:p,error:g,status:{main:b,sub:`${g.code} (${g.body})`}}),a({error:g,file:ue(d)});return}t("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:g,status:{main:b,sub:n.options.labelTapToRetry}})}),d.on("load-file-error",g=>{t("DID_THROW_ITEM_INVALID",{id:p,error:g.status,status:g.status}),a({error:g.status,file:ue(d)})}),d.on("load-abort",()=>{t("REMOVE_ITEM",{query:p})}),d.on("load-skip",()=>{t("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:i,success:r}})}),d.on("load",()=>{const g=b=>{if(!b){t("REMOVE_ITEM",{query:p});return}d.on("metadata-update",T=>{t("DID_UPDATE_ITEM_METADATA",{id:p,change:T})}),Re("SHOULD_PREPARE_OUTPUT",!1,{item:d,query:e}).then(T=>{const R=e("GET_BEFORE_PREPARE_FILE");R&&(T=R(d,T));const P=()=>{t("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:i,success:r}}),Cn(t,n)};if(T){t("REQUEST_PREPARE_OUTPUT",{query:p,item:d,success:C=>{t("DID_PREPARE_OUTPUT",{id:p,file:C}),P()}},!0);return}P()})};Re("DID_LOAD_ITEM",d,{query:e,dispatch:t}).then(()=>{ps(e("GET_BEFORE_ADD_FILE"),ue(d)).then(g)}).catch(b=>{if(!b||!b.error||!b.status)return g(!1);t("DID_THROW_ITEM_INVALID",{id:p,error:b.error,status:b.status})})}),d.on("process-start",()=>{t("DID_START_ITEM_PROCESSING",{id:p})}),d.on("process-progress",g=>{t("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:g})}),d.on("process-error",g=>{t("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,error:g,status:{main:Ft(n.options.labelFileProcessingError)(g),sub:n.options.labelTapToRetry}})}),d.on("process-revert-error",g=>{t("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:p,error:g,status:{main:Ft(n.options.labelFileProcessingRevertError)(g),sub:n.options.labelTapToRetry}})}),d.on("process-complete",g=>{t("DID_COMPLETE_ITEM_PROCESSING",{id:p,error:null,serverFileReference:g}),t("DID_DEFINE_VALUE",{id:p,value:g})}),d.on("process-abort",()=>{t("DID_ABORT_ITEM_PROCESSING",{id:p})}),d.on("process-revert",()=>{t("DID_REVERT_ITEM_PROCESSING",{id:p}),t("DID_DEFINE_VALUE",{id:p,value:null})}),t("DID_ADD_ITEM",{id:p,index:s,interactionMethod:o}),Cn(t,n);const{url:f,load:h,restore:m,fetch:E}=n.options.server||{};d.load(i,Lc(c===ne.INPUT?le(i)&&Hc(i)&&E?An(f,E):hs:c===ne.LIMBO?An(f,m):An(f,h)),(g,b,T)=>{Re("LOAD_FILE",g,{query:e}).then(b).catch(T)})},REQUEST_PREPARE_OUTPUT:({item:i,success:s,failure:o=()=>{}})=>{const r={error:Z("error",0,"Item not found"),file:null};if(i.archived)return o(r);Re("PREPARE_OUTPUT",i.file,{query:e,item:i}).then(a=>{Re("COMPLETE_PREPARE_OUTPUT",a,{query:e,item:i}).then(l=>{if(i.archived)return o(r);s(l)})})},COMPLETE_LOAD_ITEM:({item:i,data:s})=>{const{success:o,source:r}=s,a=e("GET_ITEM_INSERT_LOCATION");if(Ze(a)&&r&&Mn(n,a),t("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.origin===ne.INPUT?null:r}),o(ue(i)),i.origin===ne.LOCAL){t("DID_LOAD_LOCAL_ITEM",{id:i.id});return}if(i.origin===ne.LIMBO){t("DID_COMPLETE_ITEM_PROCESSING",{id:i.id,error:null,serverFileReference:r}),t("DID_DEFINE_VALUE",{id:i.id,value:i.serverId||r});return}e("IS_ASYNC")&&n.options.instantUpload&&t("REQUEST_ITEM_PROCESSING",{query:i.id})},RETRY_ITEM_LOAD:ge(n,i=>{i.retryLoad()}),REQUEST_ITEM_PREPARE:ge(n,(i,s,o)=>{t("REQUEST_PREPARE_OUTPUT",{query:i.id,item:i,success:r=>{t("DID_PREPARE_OUTPUT",{id:i.id,file:r}),s({file:i,output:r})},failure:o},!0)}),REQUEST_ITEM_PROCESSING:ge(n,(i,s,o)=>{if(!(i.status===B.IDLE||i.status===B.PROCESSING_ERROR)){const a=()=>t("REQUEST_ITEM_PROCESSING",{query:i,success:s,failure:o}),l=()=>document.hidden?a():setTimeout(a,32);i.status===B.PROCESSING_COMPLETE||i.status===B.PROCESSING_REVERT_ERROR?i.revert(Rt(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(l).catch(()=>{}):i.status===B.PROCESSING&&i.abortProcessing().then(l);return}i.status!==B.PROCESSING_QUEUED&&(i.requestProcessing(),t("DID_REQUEST_ITEM_PROCESSING",{id:i.id}),t("PROCESS_ITEM",{query:i,success:s,failure:o},!0))}),PROCESS_ITEM:ge(n,(i,s,o)=>{const r=e("GET_MAX_PARALLEL_UPLOADS");if(e("GET_ITEMS_BY_STATUS",B.PROCESSING).length===r){n.processingQueue.push({id:i.id,success:s,failure:o});return}if(i.status===B.PROCESSING)return;const l=()=>{const d=n.processingQueue.shift();if(!d)return;const{id:u,success:p,failure:f}=d,h=Ke(n.items,u);if(!h||h.archived){l();return}t("PROCESS_ITEM",{query:u,success:p,failure:f},!0)};i.onOnce("process-complete",()=>{s(ue(i)),l();const d=n.options.server;if(n.options.instantUpload&&i.origin===ne.LOCAL&&Ze(d.remove)){const f=()=>{};i.origin=ne.LIMBO,n.options.server.remove(i.source,f,f)}e("GET_ITEMS_BY_STATUS",B.PROCESSING_COMPLETE).length===n.items.length&&t("DID_COMPLETE_ITEM_PROCESSING_ALL")}),i.onOnce("process-error",d=>{o({error:d,file:ue(i)}),l()});const c=n.options;i.process(Gc(Fc(c.server.url,c.server.process,c.name,{chunkTransferId:i.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays}),{allowMinimumUploadDuration:e("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(d,u,p)=>{Re("PREPARE_OUTPUT",d,{query:e,item:i}).then(f=>{t("DID_PREPARE_OUTPUT",{id:i.id,file:f}),u(f)}).catch(p)})}),RETRY_ITEM_PROCESSING:ge(n,i=>{t("REQUEST_ITEM_PROCESSING",{query:i})}),REQUEST_REMOVE_ITEM:ge(n,i=>{ps(e("GET_BEFORE_REMOVE_FILE"),ue(i)).then(s=>{s&&t("REMOVE_ITEM",{query:i})})}),RELEASE_ITEM:ge(n,i=>{i.release()}),REMOVE_ITEM:ge(n,(i,s,o,r)=>{const a=()=>{const c=i.id;us(n.items,c).archive(),t("DID_REMOVE_ITEM",{error:null,id:c,item:i}),Cn(t,n),s(ue(i))},l=n.options.server;i.origin===ne.LOCAL&&l&&Ze(l.remove)&&r.remove!==!1?(t("DID_START_ITEM_REMOVE",{id:i.id}),l.remove(i.source,()=>a(),c=>{t("DID_THROW_ITEM_REMOVE_ERROR",{id:i.id,error:Z("error",0,c,null),status:{main:Ft(n.options.labelFileRemoveError)(c),sub:n.options.labelTapToRetry}})})):((r.revert&&i.origin!==ne.LOCAL&&i.serverId!==null||n.options.chunkUploads&&i.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&i.revert(Rt(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")),a())}),ABORT_ITEM_LOAD:ge(n,i=>{i.abortLoad()}),ABORT_ITEM_PROCESSING:ge(n,i=>{if(i.serverId){t("REVERT_ITEM_PROCESSING",{id:i.id});return}i.abortProcessing().then(()=>{n.options.instantUpload&&t("REMOVE_ITEM",{query:i.id})})}),REQUEST_REVERT_ITEM_PROCESSING:ge(n,i=>{if(!n.options.instantUpload){t("REVERT_ITEM_PROCESSING",{query:i});return}const s=a=>{a&&t("REVERT_ITEM_PROCESSING",{query:i})},o=e("GET_BEFORE_REMOVE_FILE");if(!o)return s(!0);const r=o(ue(i));if(r==null)return s(!0);if(typeof r=="boolean")return s(r);typeof r.then=="function"&&r.then(s)}),REVERT_ITEM_PROCESSING:ge(n,i=>{i.revert(Rt(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||jc(i))&&t("REMOVE_ITEM",{query:i.id})}).catch(()=>{})}),SET_OPTIONS:({options:i})=>{const s=Object.keys(i),o=Vc.filter(a=>s.includes(a));[...o,...Object.keys(i).filter(a=>!o.includes(a))].forEach(a=>{t(`SET_${yn(a,"_").toUpperCase()}`,{value:i[a]})})}}),Vc=["server"],Di=t=>t,Ge=t=>document.createElement(t),K=(t,e)=>{let n=t.childNodes[0];n?e!==n.nodeValue&&(n.nodeValue=e):(n=document.createTextNode(e),t.appendChild(n))},ms=(t,e,n,i)=>{const s=(i%360-90)*Math.PI/180;return{x:t+n*Math.cos(s),y:e+n*Math.sin(s)}},$c=(t,e,n,i,s,o)=>{const r=ms(t,e,n,s),a=ms(t,e,n,i);return["M",r.x,r.y,"A",n,n,0,o,0,a.x,a.y].join(" ")},Wc=(t,e,n,i,s)=>{let o=1;return s>i&&s-i<=.5&&(o=0),i>s&&i-s>=.5&&(o=0),$c(t,e,n,Math.min(.9999,i)*360,Math.min(.9999,s)*360,o)},Yc=({root:t,props:e})=>{e.spin=!1,e.progress=0,e.opacity=0;const n=on("svg");t.ref.path=on("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(t.ref.path),t.ref.svg=n,t.appendChild(n)},Xc=({root:t,props:e})=>{if(e.opacity===0)return;e.align&&(t.element.dataset.align=e.align);const n=parseInt(J(t.ref.path,"stroke-width"),10),i=t.rect.element.width*.5;let s=0,o=0;e.spin?(s=0,o=.5):(s=0,o=e.progress);const r=Wc(i,i,i-n,s,o);J(t.ref.path,"d",r),J(t.ref.path,"stroke-opacity",e.spin||e.progress>0?1:0)},gs=te({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:Yc,write:Xc,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Zc=({root:t,props:e})=>{t.element.innerHTML=(e.icon||"")+`<span>${e.label}</span>`,e.isDisabled=!1},Kc=({root:t,props:e})=>{const{isDisabled:n}=e,i=t.query("GET_DISABLED")||e.opacity===0;i&&!n?(e.isDisabled=!0,J(t.element,"disabled","disabled")):!i&&n&&(e.isDisabled=!1,t.element.removeAttribute("disabled"))},or=te({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:Zc,write:Kc}),rr=(t,e=".",n=1e3,i={})=>{const{labelBytes:s="bytes",labelKilobytes:o="KB",labelMegabytes:r="MB",labelGigabytes:a="GB"}=i;t=Math.round(Math.abs(t));const l=n,c=n*n,d=n*n*n;return t<l?`${t} ${s}`:t<c?`${Math.floor(t/l)} ${o}`:t<d?`${Es(t/c,1,e)} ${r}`:`${Es(t/d,2,e)} ${a}`},Es=(t,e,n)=>t.toFixed(e).split(".").filter(i=>i!=="0").join(n),Qc=({root:t,props:e})=>{const n=Ge("span");n.className="filepond--file-info-main",J(n,"aria-hidden","true"),t.appendChild(n),t.ref.fileName=n;const i=Ge("span");i.className="filepond--file-info-sub",t.appendChild(i),t.ref.fileSize=i,K(i,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),K(n,Di(t.query("GET_ITEM_NAME",e.id)))},ai=({root:t,props:e})=>{K(t.ref.fileSize,rr(t.query("GET_ITEM_SIZE",e.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),K(t.ref.fileName,Di(t.query("GET_ITEM_NAME",e.id)))},bs=({root:t,props:e})=>{if(vt(t.query("GET_ITEM_SIZE",e.id))){ai({root:t,props:e});return}K(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},Jc=te({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:ce({DID_LOAD_ITEM:ai,DID_UPDATE_ITEM_META:ai,DID_THROW_ITEM_LOAD_ERROR:bs,DID_THROW_ITEM_INVALID:bs}),didCreateView:t=>{st("CREATE_VIEW",{...t,view:t})},create:Qc,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),ar=t=>Math.round(t*100),ed=({root:t})=>{const e=Ge("span");e.className="filepond--file-status-main",t.appendChild(e),t.ref.main=e;const n=Ge("span");n.className="filepond--file-status-sub",t.appendChild(n),t.ref.sub=n,lr({root:t,action:{progress:null}})},lr=({root:t,action:e})=>{const n=e.progress===null?t.query("GET_LABEL_FILE_LOADING"):`${t.query("GET_LABEL_FILE_LOADING")} ${ar(e.progress)}%`;K(t.ref.main,n),K(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},td=({root:t,action:e})=>{const n=e.progress===null?t.query("GET_LABEL_FILE_PROCESSING"):`${t.query("GET_LABEL_FILE_PROCESSING")} ${ar(e.progress)}%`;K(t.ref.main,n),K(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},nd=({root:t})=>{K(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),K(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},id=({root:t})=>{K(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),K(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},sd=({root:t})=>{K(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),K(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},ys=({root:t})=>{K(t.ref.main,""),K(t.ref.sub,"")},St=({root:t,action:e})=>{K(t.ref.main,e.status.main),K(t.ref.sub,e.status.sub)},od=te({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:ce({DID_LOAD_ITEM:ys,DID_REVERT_ITEM_PROCESSING:ys,DID_REQUEST_ITEM_PROCESSING:nd,DID_ABORT_ITEM_PROCESSING:id,DID_COMPLETE_ITEM_PROCESSING:sd,DID_UPDATE_ITEM_PROCESS_PROGRESS:td,DID_UPDATE_ITEM_LOAD_PROGRESS:lr,DID_THROW_ITEM_LOAD_ERROR:St,DID_THROW_ITEM_INVALID:St,DID_THROW_ITEM_PROCESSING_ERROR:St,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:St,DID_THROW_ITEM_REMOVE_ERROR:St}),didCreateView:t=>{st("CREATE_VIEW",{...t,view:t})},create:ed,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),li={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},ci=[];X(li,t=>{ci.push(t)});const pe=t=>{if(di(t)==="right")return 0;const e=t.ref.buttonRemoveItem.rect.element;return e.hidden?null:e.width+e.left},rd=t=>t.ref.buttonAbortItemLoad.rect.element.width,Bt=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.height/4),ad=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.left/2),ld=t=>t.query("GET_STYLE_LOAD_INDICATOR_POSITION"),cd=t=>t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),di=t=>t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),dd={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:ld},processProgressIndicator:{opacity:0,align:cd},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},vs={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:pe},status:{translateX:pe}},Ln={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},pt={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:pe},status:{translateX:pe,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:pe},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:di},info:{translateX:pe},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:di},buttonRemoveItem:{opacity:1},info:{translateX:pe},status:{opacity:1,translateX:pe}},DID_LOAD_ITEM:vs,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:pe},status:{translateX:pe}},DID_START_ITEM_PROCESSING:Ln,DID_REQUEST_ITEM_PROCESSING:Ln,DID_UPDATE_ITEM_PROCESS_PROGRESS:Ln,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:pe}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:pe},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:vs},ud=te({create:({root:t})=>{t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),hd=({root:t,props:e})=>{const n=Object.keys(li).reduce((h,m)=>(h[m]={...li[m]},h),{}),{id:i}=e,s=t.query("GET_ALLOW_REVERT"),o=t.query("GET_ALLOW_REMOVE"),r=t.query("GET_ALLOW_PROCESS"),a=t.query("GET_INSTANT_UPLOAD"),l=t.query("IS_ASYNC"),c=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let d;l?r&&!s?d=h=>!/RevertItemProcessing/.test(h):!r&&s?d=h=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(h):!r&&!s&&(d=h=>!/Process/.test(h)):d=h=>!/Process/.test(h);const u=d?ci.filter(d):ci.concat();if(a&&s&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),l&&!s){const h=pt.DID_COMPLETE_ITEM_PROCESSING;h.info.translateX=ad,h.info.translateY=Bt,h.status.translateY=Bt,h.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(l&&!r&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(h=>{pt[h].status.translateY=Bt}),pt.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=rd),c&&s){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const h=pt.DID_COMPLETE_ITEM_PROCESSING;h.info.translateX=pe,h.status.translateY=Bt,h.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}o||(n.RemoveItem.disabled=!0),X(n,(h,m)=>{const E=t.createChildView(or,{label:t.query(m.label),icon:t.query(m.icon),opacity:0});u.includes(h)&&t.appendChildView(E),m.disabled&&(E.element.setAttribute("disabled","disabled"),E.element.setAttribute("hidden","hidden")),E.element.dataset.align=t.query(`GET_STYLE_${m.align}`),E.element.classList.add(m.className),E.on("click",g=>{g.stopPropagation(),!m.disabled&&t.dispatch(m.action,{query:i})}),t.ref[`button${h}`]=E}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(ud)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(Jc,{id:i})),t.ref.status=t.appendChildView(t.createChildView(od,{id:i}));const p=t.appendChildView(t.createChildView(gs,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));p.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=p;const f=t.appendChildView(t.createChildView(gs,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));f.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=f,t.ref.activeStyles=[]},fd=({root:t,actions:e,props:n})=>{pd({root:t,actions:e,props:n});let i=e.concat().filter(s=>/^DID_/.test(s.type)).reverse().find(s=>pt[s.type]);if(i){t.ref.activeStyles=[];const s=pt[i.type];X(dd,(o,r)=>{const a=t.ref[o];X(r,(l,c)=>{const d=s[o]&&typeof s[o][l]<"u"?s[o][l]:c;t.ref.activeStyles.push({control:a,key:l,value:d})})})}t.ref.activeStyles.forEach(({control:s,key:o,value:r})=>{s[o]=typeof r=="function"?r(t):r})},pd=ce({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:t,action:e})=>{t.ref.buttonAbortItemProcessing.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:t,action:e})=>{t.ref.buttonAbortItemLoad.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:t,action:e})=>{t.ref.buttonAbortItemRemoval.label=e.value},DID_REQUEST_ITEM_PROCESSING:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:t})=>{t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:t,action:e})=>{t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=e.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:t,action:e})=>{t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=e.progress}}),md=te({create:hd,write:fd,didCreateView:t=>{st("CREATE_VIEW",{...t,view:t})},name:"file"}),gd=({root:t,props:e})=>{t.ref.fileName=Ge("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(md,{id:e.id})),t.ref.data=!1},Ed=({root:t,props:e})=>{K(t.ref.fileName,Di(t.query("GET_ITEM_NAME",e.id)))},bd=te({create:gd,ignoreRect:!0,write:ce({DID_LOAD_ITEM:Ed}),didCreateView:t=>{st("CREATE_VIEW",{...t,view:t})},tag:"fieldset",name:"file-wrapper"}),Ts={type:"spring",damping:.6,mass:7},yd=({root:t,props:e})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Ts},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Ts},styles:["translateY"]}}].forEach(n=>{vd(t,n,e.name)}),t.element.classList.add(`filepond--${e.name}`),t.ref.scalable=null},vd=(t,e,n)=>{const i=te({name:`panel-${e.name} filepond--${n}`,mixins:e.mixins,ignoreRectUpdate:!0}),s=t.createChildView(i,e.props);t.ref[e.name]=t.appendChildView(s)},Td=({root:t,props:e})=>{if((t.ref.scalable===null||e.scalable!==t.ref.scalable)&&(t.ref.scalable=qo(e.scalable)?e.scalable:!0,t.element.dataset.scalable=t.ref.scalable),!e.height)return;const n=t.ref.top.rect.element,i=t.ref.bottom.rect.element,s=Math.max(n.height+i.height,e.height);t.ref.center.translateY=n.height,t.ref.center.scaleY=(s-n.height-i.height)/100,t.ref.bottom.translateY=s-i.height},cr=te({name:"panel",read:({root:t,props:e})=>e.heightCurrent=t.ref.bottom.translateY,write:Td,create:yd,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),Id=t=>{const e=t.map(i=>i.id);let n;return{setIndex:i=>{n=i},getIndex:()=>n,getItemIndex:i=>e.indexOf(i.id)}},Is={type:"spring",stiffness:.75,damping:.45,mass:10},Rs="spring",Ss={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Rd=({root:t,props:e})=>{if(t.ref.handleClick=i=>t.dispatch("DID_ACTIVATE_ITEM",{id:e.id}),t.element.id=`filepond--item-${e.id}`,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(bd,{id:e.id})),t.ref.panel=t.appendChildView(t.createChildView(cr,{name:"item-panel"})),t.ref.panel.height=null,e.markedForRemoval=!1,!t.query("GET_ALLOW_REORDER"))return;t.element.dataset.dragState="idle";const n=i=>{if(!i.isPrimary)return;let s=!1;const o={x:i.pageX,y:i.pageY};e.dragOrigin={x:t.translateX,y:t.translateY},e.dragCenter={x:i.offsetX,y:i.offsetY};const r=Id(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:e.id,dragState:r});const a=c=>{if(!c.isPrimary)return;c.stopPropagation(),c.preventDefault(),e.dragOffset={x:c.pageX-o.x,y:c.pageY-o.y},e.dragOffset.x*e.dragOffset.x+e.dragOffset.y*e.dragOffset.y>16&&!s&&(s=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:e.id,dragState:r})},l=c=>{c.isPrimary&&(document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),e.dragOffset={x:c.pageX-o.x,y:c.pageY-o.y},t.dispatch("DID_DROP_ITEM",{id:e.id,dragState:r}),s&&setTimeout(()=>t.element.addEventListener("click",t.ref.handleClick),0))};document.addEventListener("pointermove",a),document.addEventListener("pointerup",l)};t.element.addEventListener("pointerdown",n)},Sd=ce({DID_UPDATE_PANEL_HEIGHT:({root:t,action:e})=>{t.height=e.height}}),_d=ce({DID_GRAB_ITEM:({root:t,props:e})=>{e.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:({root:t})=>{t.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:t,props:e})=>{e.dragOffset=null,e.dragOrigin=null,t.element.dataset.dragState="drop"}},({root:t,actions:e,props:n,shouldOptimize:i})=>{t.element.dataset.dragState==="drop"&&t.scaleX<=1&&(t.element.dataset.dragState="idle");let s=e.concat().filter(r=>/^DID_/.test(r.type)).reverse().find(r=>Ss[r.type]);s&&s.type!==n.currentState&&(n.currentState=s.type,t.element.dataset.filepondItemState=Ss[n.currentState]||"");const o=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");o?i||(t.height=t.rect.element.width*o):(Sd({root:t,actions:e,props:n}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),i&&(t.ref.panel.height=null),t.ref.panel.height=t.height}),Od=te({create:Rd,write:_d,destroy:({root:t,props:e})=>{t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:e.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Rs,scaleY:Rs,translateX:Is,translateY:Is,opacity:{type:"tween",duration:150}}}});var Ai=(t,e)=>Math.max(1,Math.floor((t+1)/e));const Ci=(t,e,n)=>{if(!n)return;const i=t.rect.element.width,s=e.length;let o=null;if(s===0||n.top<e[0].rect.element.top)return-1;const a=e[0].rect.element,l=a.marginLeft+a.marginRight,c=a.width+l,d=Ai(i,c);if(d===1){for(let f=0;f<s;f++){const h=e[f],m=h.rect.outer.top+h.rect.element.height*.5;if(n.top<m)return f}return s}const u=a.marginTop+a.marginBottom,p=a.height+u;for(let f=0;f<s;f++){const h=f%d,m=Math.floor(f/d),E=h*c,g=m*p,b=g-a.marginTop,T=E+c,R=g+p+a.marginBottom;if(n.top<R&&n.top>b){if(n.left<T)return f;f!==s-1?o=f:o=null}}return o!==null?o:s},Gt={height:0,width:0,get getHeight(){return this.height},set setHeight(t){(this.height===0||t===0)&&(this.height=t)},get getWidth(){return this.width},set setWidth(t){(this.width===0||t===0)&&(this.width=t)},setDimensions:function(t,e){(this.height===0||t===0)&&(this.height=t),(this.width===0||e===0)&&(this.width=e)}},wd=({root:t})=>{J(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},Pd=({root:t,action:e})=>{const{id:n,index:i,interactionMethod:s}=e;t.ref.addIndex=i;const o=Date.now();let r=o,a=1;if(s!==Te.NONE){a=0;const l=t.query("GET_ITEM_INSERT_INTERVAL"),c=o-t.ref.lastItemSpanwDate;r=c<l?o+(l-c):o}t.ref.lastItemSpanwDate=r,t.appendChildView(t.createChildView(Od,{spawnDate:r,id:n,opacity:a,interactionMethod:s}),i)},_s=(t,e,n,i=0,s=1)=>{t.dragOffset?(t.translateX=null,t.translateY=null,t.translateX=t.dragOrigin.x+t.dragOffset.x,t.translateY=t.dragOrigin.y+t.dragOffset.y,t.scaleX=1.025,t.scaleY=1.025):(t.translateX=e,t.translateY=n,Date.now()>t.spawnDate&&(t.opacity===0&&Dd(t,e,n,i,s),t.scaleX=1,t.scaleY=1,t.opacity=1))},Dd=(t,e,n,i,s)=>{t.interactionMethod===Te.NONE?(t.translateX=null,t.translateX=e,t.translateY=null,t.translateY=n):t.interactionMethod===Te.DROP?(t.translateX=null,t.translateX=e-i*20,t.translateY=null,t.translateY=n-s*10,t.scaleX=.8,t.scaleY=.8):t.interactionMethod===Te.BROWSE?(t.translateY=null,t.translateY=n-30):t.interactionMethod===Te.API&&(t.translateX=null,t.translateX=e-30,t.translateY=null)},Ad=({root:t,action:e})=>{const{id:n}=e,i=t.childViews.find(s=>s.id===n);i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},xn=t=>t.rect.element.height+t.rect.element.marginBottom*.5+t.rect.element.marginTop*.5,Cd=t=>t.rect.element.width+t.rect.element.marginLeft*.5+t.rect.element.marginRight*.5,Md=({root:t,action:e})=>{const{id:n,dragState:i}=e,s=t.query("GET_ITEM",{id:n}),o=t.childViews.find(E=>E.id===n),r=t.childViews.length,a=i.getItemIndex(s);if(!o)return;const l={x:o.dragOrigin.x+o.dragOffset.x+o.dragCenter.x,y:o.dragOrigin.y+o.dragOffset.y+o.dragCenter.y},c=xn(o),d=Cd(o);let u=Math.floor(t.rect.outer.width/d);u>r&&(u=r);const p=Math.floor(r/u+1);Gt.setHeight=c*p,Gt.setWidth=d*u;var f={y:Math.floor(l.y/c),x:Math.floor(l.x/d),getGridIndex:function(){return l.y>Gt.getHeight||l.y<0||l.x>Gt.getWidth||l.x<0?a:this.y*u+this.x},getColIndex:function(){const g=t.query("GET_ACTIVE_ITEMS"),b=t.childViews.filter(M=>M.rect.element.height),T=g.map(M=>b.find(F=>F.id===M.id)),R=T.findIndex(M=>M===o),P=xn(o),C=T.length;let N=C,w=0,x=0,G=0;for(let M=0;M<C;M++)if(w=xn(T[M]),G=x,x=G+w,l.y<x){if(R>M){if(l.y<G+P){N=M;break}continue}N=M;break}return N}};const h=u>1?f.getGridIndex():f.getColIndex();t.dispatch("MOVE_ITEM",{query:o,index:h});const m=i.getIndex();if(m===void 0||m!==h){if(i.setIndex(h),m===void 0)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:a,target:h})}},Ld=ce({DID_ADD_ITEM:Pd,DID_REMOVE_ITEM:Ad,DID_DRAG_ITEM:Md}),xd=({root:t,props:e,actions:n,shouldOptimize:i})=>{Ld({root:t,props:e,actions:n});const{dragCoordinates:s}=e,o=t.rect.element.width,r=t.childViews.filter(T=>T.rect.element.height),a=t.query("GET_ACTIVE_ITEMS").map(T=>r.find(R=>R.id===T.id)).filter(T=>T),l=s?Ci(t,a,s):null,c=t.ref.addIndex||null;t.ref.addIndex=null;let d=0,u=0,p=0;if(a.length===0)return;const f=a[0].rect.element,h=f.marginTop+f.marginBottom,m=f.marginLeft+f.marginRight,E=f.width+m,g=f.height+h,b=Ai(o,E);if(b===1){let T=0,R=0;a.forEach((P,C)=>{if(l){let x=C-l;x===-2?R=-h*.25:x===-1?R=-h*.75:x===0?R=h*.75:x===1?R=h*.25:R=0}i&&(P.translateX=null,P.translateY=null),P.markedForRemoval||_s(P,0,T+R);let w=(P.rect.element.height+h)*(P.markedForRemoval?P.opacity:1);T+=w})}else{let T=0,R=0;a.forEach((P,C)=>{C===l&&(d=1),C===c&&(p+=1),P.markedForRemoval&&P.opacity<.5&&(u-=1);const N=C+p+d+u,w=N%b,x=Math.floor(N/b),G=w*E,M=x*g,F=Math.sign(G-T),z=Math.sign(M-R);T=G,R=M,!P.markedForRemoval&&(i&&(P.translateX=null,P.translateY=null),_s(P,G,M,F,z))})}},Nd=(t,e)=>e.filter(n=>n.data&&n.data.id?t.id===n.data.id:!0),Fd=te({create:wd,write:xd,tag:"ul",name:"list",didWriteView:({root:t})=>{t.childViews.filter(e=>e.markedForRemoval&&e.opacity===0&&e.resting).forEach(e=>{e._destroy(),t.removeChildView(e)})},filterFrameActionsForChild:Nd,mixins:{apis:["dragCoordinates"]}}),Bd=({root:t,props:e})=>{t.ref.list=t.appendChildView(t.createChildView(Fd)),e.dragCoordinates=null,e.overflowing=!1},Gd=({root:t,props:e,action:n})=>{t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(e.dragCoordinates={left:n.position.scopeLeft-t.ref.list.rect.element.left,top:n.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},zd=({props:t})=>{t.dragCoordinates=null},kd=ce({DID_DRAG:Gd,DID_END_DRAG:zd}),Ud=({root:t,props:e,actions:n})=>{if(kd({root:t,props:e,actions:n}),t.ref.list.dragCoordinates=e.dragCoordinates,e.overflowing&&!e.overflow&&(e.overflowing=!1,t.element.dataset.state="",t.height=null),e.overflow){const i=Math.round(e.overflow);i!==t.height&&(e.overflowing=!0,t.element.dataset.state="overflow",t.height=i)}},Hd=te({create:Bd,write:Ud,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),_e=(t,e,n,i="")=>{n?J(t,e,i):t.removeAttribute(e)},jd=t=>{if(!(!t||t.value==="")){try{t.value=""}catch{}if(t.value){const e=Ge("form"),n=t.parentNode,i=t.nextSibling;e.appendChild(t),e.reset(),i?n.insertBefore(t,i):n.appendChild(t)}}},qd=({root:t,props:e})=>{t.element.id=`filepond--browser-${e.id}`,J(t.element,"name",t.query("GET_NAME")),J(t.element,"aria-controls",`filepond--assistant-${e.id}`),J(t.element,"aria-labelledby",`filepond--drop-label-${e.id}`),dr({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),ur({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),hr({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),ui({root:t}),fr({root:t,action:{value:t.query("GET_REQUIRED")}}),pr({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=n=>{if(!t.element.value)return;const i=Array.from(t.element.files).map(s=>(s._relativePath=s.webkitRelativePath,s));setTimeout(()=>{e.onload(i),jd(t.element)},250)},t.element.addEventListener("change",t.ref.handleChange)},dr=({root:t,action:e})=>{t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&_e(t.element,"accept",!!e.value,e.value?e.value.join(","):"")},ur=({root:t,action:e})=>{_e(t.element,"multiple",e.value)},hr=({root:t,action:e})=>{_e(t.element,"webkitdirectory",e.value)},ui=({root:t})=>{const e=t.query("GET_DISABLED"),n=t.query("GET_ALLOW_BROWSE"),i=e||!n;_e(t.element,"disabled",i)},fr=({root:t,action:e})=>{e.value?t.query("GET_TOTAL_ITEMS")===0&&_e(t.element,"required",!0):_e(t.element,"required",!1)},pr=({root:t,action:e})=>{_e(t.element,"capture",!!e.value,e.value===!0?"":e.value)},Os=({root:t})=>{const{element:e}=t;t.query("GET_TOTAL_ITEMS")>0?(_e(e,"required",!1),_e(e,"name",!1)):(_e(e,"name",!0,t.query("GET_NAME")),t.query("GET_CHECK_VALIDITY")&&e.setCustomValidity(""),t.query("GET_REQUIRED")&&_e(e,"required",!0))},Vd=({root:t})=>{t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},$d=te({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:qd,destroy:({root:t})=>{t.element.removeEventListener("change",t.ref.handleChange)},write:ce({DID_LOAD_ITEM:Os,DID_REMOVE_ITEM:Os,DID_THROW_ITEM_INVALID:Vd,DID_SET_DISABLED:ui,DID_SET_ALLOW_BROWSE:ui,DID_SET_ALLOW_DIRECTORIES_ONLY:hr,DID_SET_ALLOW_MULTIPLE:ur,DID_SET_ACCEPTED_FILE_TYPES:dr,DID_SET_CAPTURE_METHOD:pr,DID_SET_REQUIRED:fr})}),ws={ENTER:13,SPACE:32},Wd=({root:t,props:e})=>{const n=Ge("label");J(n,"for",`filepond--browser-${e.id}`),J(n,"id",`filepond--drop-label-${e.id}`),J(n,"aria-hidden","true"),t.ref.handleKeyDown=i=>{(i.keyCode===ws.ENTER||i.keyCode===ws.SPACE)&&(i.preventDefault(),t.ref.label.click())},t.ref.handleClick=i=>{i.target===n||n.contains(i.target)||t.ref.label.click()},n.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),mr(n,e.caption),t.appendChild(n),t.ref.label=n},mr=(t,e)=>{t.innerHTML=e;const n=t.querySelector(".filepond--label-action");return n&&J(n,"tabindex","0"),e},Yd=te({name:"drop-label",ignoreRect:!0,create:Wd,destroy:({root:t})=>{t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:ce({DID_SET_LABEL_IDLE:({root:t,action:e})=>{mr(t.ref.label,e.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Xd=te({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Zd=({root:t})=>{const e=t.rect.element.width*.5,n=t.rect.element.height*.5;t.ref.blob=t.appendChildView(t.createChildView(Xd,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:e,translateY:n}))},Kd=({root:t,action:e})=>{if(!t.ref.blob){Zd({root:t});return}t.ref.blob.translateX=e.position.scopeLeft,t.ref.blob.translateY=e.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1},Qd=({root:t})=>{t.ref.blob&&(t.ref.blob.opacity=0)},Jd=({root:t})=>{t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},eu=({root:t,props:e,actions:n})=>{tu({root:t,props:e,actions:n});const{blob:i}=t.ref;n.length===0&&i&&i.opacity===0&&(t.removeChildView(i),t.ref.blob=null)},tu=ce({DID_DRAG:Kd,DID_DROP:Jd,DID_END_DRAG:Qd}),nu=te({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:eu}),gr=(t,e)=>{try{const n=new DataTransfer;e.forEach(i=>{i instanceof File?n.items.add(i):n.items.add(new File([i],i.name,{type:i.type}))}),t.files=n.files}catch{return!1}return!0},iu=({root:t})=>t.ref.fields={},In=(t,e)=>t.ref.fields[e],Mi=t=>{t.query("GET_ACTIVE_ITEMS").forEach(e=>{t.ref.fields[e.id]&&t.element.appendChild(t.ref.fields[e.id])})},Ps=({root:t})=>Mi(t),su=({root:t,action:e})=>{const s=!(t.query("GET_ITEM",e.id).origin===ne.LOCAL)&&t.query("SHOULD_UPDATE_FILE_INPUT"),o=Ge("input");o.type=s?"file":"hidden",o.name=t.query("GET_NAME"),o.disabled=t.query("GET_DISABLED"),t.ref.fields[e.id]=o,Mi(t)},ou=({root:t,action:e})=>{const n=In(t,e.id);if(!n||(e.serverFileReference!==null&&(n.value=e.serverFileReference),!t.query("SHOULD_UPDATE_FILE_INPUT")))return;const i=t.query("GET_ITEM",e.id);gr(n,[i.file])},ru=({root:t,action:e})=>{t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=In(t,e.id);n&&gr(n,[e.file])},0)},au=({root:t})=>{t.element.disabled=t.query("GET_DISABLED")},lu=({root:t,action:e})=>{const n=In(t,e.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete t.ref.fields[e.id])},cu=({root:t,action:e})=>{const n=In(t,e.id);n&&(e.value===null?n.removeAttribute("value"):n.type!="file"&&(n.value=e.value),Mi(t))},du=ce({DID_SET_DISABLED:au,DID_ADD_ITEM:su,DID_LOAD_ITEM:ou,DID_REMOVE_ITEM:lu,DID_DEFINE_VALUE:cu,DID_PREPARE_OUTPUT:ru,DID_REORDER_ITEMS:Ps,DID_SORT_ITEMS:Ps}),uu=te({tag:"fieldset",name:"data",create:iu,write:du,ignoreRect:!0}),hu=t=>"getRootNode"in t?t.getRootNode():document,fu=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],pu=["css","csv","html","txt"],mu={zip:"zip|compressed",epub:"application/epub+zip"},Er=(t="")=>(t=t.toLowerCase(),fu.includes(t)?"image/"+(t==="jpg"?"jpeg":t==="svg"?"svg+xml":t):pu.includes(t)?"text/"+t:mu[t]||""),Li=t=>new Promise((e,n)=>{const i=Ru(t);if(i.length&&!gu(t))return e(i);Eu(t).then(e)}),gu=t=>t.files?t.files.length>0:!1,Eu=t=>new Promise((e,n)=>{const i=(t.items?Array.from(t.items):[]).filter(s=>bu(s)).map(s=>yu(s));if(!i.length){e(t.files?Array.from(t.files):[]);return}Promise.all(i).then(s=>{const o=[];s.forEach(r=>{o.push.apply(o,r)}),e(o.filter(r=>r).map(r=>(r._relativePath||(r._relativePath=r.webkitRelativePath),r)))}).catch(console.error)}),bu=t=>{if(br(t)){const e=xi(t);if(e)return e.isFile||e.isDirectory}return t.kind==="file"},yu=t=>new Promise((e,n)=>{if(Iu(t)){vu(xi(t)).then(e).catch(n);return}e([t.getAsFile()])}),vu=t=>new Promise((e,n)=>{const i=[];let s=0,o=0;const r=()=>{o===0&&s===0&&e(i)},a=l=>{s++;const c=l.createReader(),d=()=>{c.readEntries(u=>{if(u.length===0){s--,r();return}u.forEach(p=>{p.isDirectory?a(p):(o++,p.file(f=>{const h=Tu(f);p.fullPath&&(h._relativePath=p.fullPath),i.push(h),o--,r()}))}),d()},n)};d()};a(t)}),Tu=t=>{if(t.type.length)return t;const e=t.lastModifiedDate,n=t.name,i=Er(Tn(t.name));return i.length&&(t=t.slice(0,t.size,i),t.name=n,t.lastModifiedDate=e),t},Iu=t=>br(t)&&(xi(t)||{}).isDirectory,br=t=>"webkitGetAsEntry"in t,xi=t=>t.webkitGetAsEntry(),Ru=t=>{let e=[];try{if(e=_u(t),e.length)return e;e=Su(t)}catch{}return e},Su=t=>{let e=t.getData("url");return typeof e=="string"&&e.length?[e]:[]},_u=t=>{let e=t.getData("text/html");if(typeof e=="string"&&e.length){const n=e.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},an=[],tt=t=>({pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}),Ou=(t,e,n)=>{const i=wu(e),s={element:t,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return s.destroy=i.addListener(s),s},wu=t=>{const e=an.find(i=>i.element===t);if(e)return e;const n=Pu(t);return an.push(n),n},Pu=t=>{const e=[],n={dragenter:Au,dragover:Cu,dragleave:Lu,drop:Mu},i={};X(n,(o,r)=>{i[o]=r(t,e),t.addEventListener(o,i[o],!1)});const s={element:t,addListener:o=>(e.push(o),()=>{e.splice(e.indexOf(o),1),e.length===0&&(an.splice(an.indexOf(s),1),X(n,r=>{t.removeEventListener(r,i[r],!1)}))})};return s},Du=(t,e)=>("elementFromPoint"in t||(t=document),t.elementFromPoint(e.x,e.y)),Ni=(t,e)=>{const n=hu(e),i=Du(n,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return i===e||e.contains(i)};let yr=null;const zt=(t,e)=>{try{t.dropEffect=e}catch{}},Au=(t,e)=>n=>{n.preventDefault(),yr=n.target,e.forEach(i=>{const{element:s,onenter:o}=i;Ni(n,s)&&(i.state="enter",o(tt(n)))})},Cu=(t,e)=>n=>{n.preventDefault();const i=n.dataTransfer;Li(i).then(s=>{let o=!1;e.some(r=>{const{filterElement:a,element:l,onenter:c,onexit:d,ondrag:u,allowdrop:p}=r;zt(i,"copy");const f=p(s);if(!f){zt(i,"none");return}if(Ni(n,l)){if(o=!0,r.state===null){r.state="enter",c(tt(n));return}if(r.state="over",a&&!f){zt(i,"none");return}u(tt(n))}else a&&!o&&zt(i,"none"),r.state&&(r.state=null,d(tt(n)))})})},Mu=(t,e)=>n=>{n.preventDefault();const i=n.dataTransfer;Li(i).then(s=>{e.forEach(o=>{const{filterElement:r,element:a,ondrop:l,onexit:c,allowdrop:d}=o;if(o.state=null,!(r&&!Ni(n,a))){if(!d(s))return c(tt(n));l(tt(n),s)}})})},Lu=(t,e)=>n=>{yr===n.target&&e.forEach(i=>{const{onexit:s}=i;i.state=null,s(tt(n))})},xu=(t,e,n)=>{t.classList.add("filepond--hopper");const{catchesDropsOnPage:i,requiresDropOnElement:s,filterItems:o=d=>d}=n,r=Ou(t,i?document.documentElement:t,s);let a="",l="";r.allowdrop=d=>e(o(d)),r.ondrop=(d,u)=>{const p=o(u);if(!e(p)){c.ondragend(d);return}l="drag-drop",c.onload(p,d)},r.ondrag=d=>{c.ondrag(d)},r.onenter=d=>{l="drag-over",c.ondragstart(d)},r.onexit=d=>{l="drag-exit",c.ondragend(d)};const c={updateHopperState:()=>{a!==l&&(t.dataset.hopperState=l,a=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{r.destroy()}};return c};let hi=!1;const mt=[],vr=t=>{const e=document.activeElement;if(e&&/textarea|input/i.test(e.nodeName)){let n=!1,i=e;for(;i!==document.body;){if(i.classList.contains("filepond--root")){n=!0;break}i=i.parentNode}if(!n)return}Li(t.clipboardData).then(n=>{n.length&&mt.forEach(i=>i(n))})},Nu=t=>{mt.includes(t)||(mt.push(t),!hi&&(hi=!0,document.addEventListener("paste",vr)))},Fu=t=>{Oi(mt,mt.indexOf(t)),mt.length===0&&(document.removeEventListener("paste",vr),hi=!1)},Bu=()=>{const t=n=>{e.onload(n)},e={destroy:()=>{Fu(t)},onload:()=>{}};return Nu(t),e},Gu=({root:t,props:e})=>{t.element.id=`filepond--assistant-${e.id}`,J(t.element,"role","status"),J(t.element,"aria-live","polite"),J(t.element,"aria-relevant","additions")};let Ds=null,As=null;const Nn=[],Rn=(t,e)=>{t.element.textContent=e},zu=t=>{t.element.textContent=""},Tr=(t,e,n)=>{const i=t.query("GET_TOTAL_ITEMS");Rn(t,`${n} ${e}, ${i} ${i===1?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(As),As=setTimeout(()=>{zu(t)},1500)},Ir=t=>t.element.parentNode.contains(document.activeElement),ku=({root:t,action:e})=>{if(!Ir(t))return;t.element.textContent="";const n=t.query("GET_ITEM",e.id);Nn.push(n.filename),clearTimeout(Ds),Ds=setTimeout(()=>{Tr(t,Nn.join(", "),t.query("GET_LABEL_FILE_ADDED")),Nn.length=0},750)},Uu=({root:t,action:e})=>{if(!Ir(t))return;const n=e.item;Tr(t,n.filename,t.query("GET_LABEL_FILE_REMOVED"))},Hu=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,s=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Rn(t,`${i} ${s}`)},Cs=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,s=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");Rn(t,`${i} ${s}`)},kt=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename;Rn(t,`${e.status.main} ${i} ${e.status.sub}`)},ju=te({create:Gu,ignoreRect:!0,ignoreRectUpdate:!0,write:ce({DID_LOAD_ITEM:ku,DID_REMOVE_ITEM:Uu,DID_COMPLETE_ITEM_PROCESSING:Hu,DID_ABORT_ITEM_PROCESSING:Cs,DID_REVERT_ITEM_PROCESSING:Cs,DID_THROW_ITEM_REMOVE_ERROR:kt,DID_THROW_ITEM_LOAD_ERROR:kt,DID_THROW_ITEM_INVALID:kt,DID_THROW_ITEM_PROCESSING_ERROR:kt}),tag:"span",name:"assistant"}),Rr=(t,e="-")=>t.replace(new RegExp(`${e}.`,"g"),n=>n.charAt(1).toUpperCase()),Sr=(t,e=16,n=!0)=>{let i=Date.now(),s=null;return(...o)=>{clearTimeout(s);const r=Date.now()-i,a=()=>{i=Date.now(),t(...o)};r<e?n||(s=setTimeout(a,e-r)):a()}},qu=1e6,ln=t=>t.preventDefault(),Vu=({root:t,props:e})=>{const n=t.query("GET_ID");n&&(t.element.id=n);const i=t.query("GET_CLASS_NAME");i&&i.split(" ").filter(l=>l.length).forEach(l=>{t.element.classList.add(l)}),t.ref.label=t.appendChildView(t.createChildView(Yd,{...e,translateY:null,caption:t.query("GET_LABEL_IDLE")})),t.ref.list=t.appendChildView(t.createChildView(Hd,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(cr,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(ju,{...e})),t.ref.data=t.appendChildView(t.createChildView(uu,{...e})),t.ref.measure=Ge("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(l=>!Be(l.value)).map(({name:l,value:c})=>{t.element.dataset[l]=c}),t.ref.widthPrevious=null,t.ref.widthUpdated=Sr(()=>{t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];const s=window.matchMedia("(pointer: fine) and (hover: hover)").matches,o="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&o&&!s&&(t.element.addEventListener("touchmove",ln,{passive:!1}),t.element.addEventListener("gesturestart",ln));const r=t.query("GET_CREDITS");if(r.length===2){const l=document.createElement("a");l.className="filepond--credits",l.setAttribute("aria-hidden","true"),l.href=r[0],l.tabindex=-1,l.target="_blank",l.rel="noopener noreferrer",l.textContent=r[1],t.element.appendChild(l),t.ref.credits=l}},$u=({root:t,props:e,actions:n})=>{if(Ku({root:t,props:e,actions:n}),n.filter(C=>/^DID_SET_STYLE_/.test(C.type)).filter(C=>!Be(C.data.value)).map(({type:C,data:N})=>{const w=Rr(C.substring(8).toLowerCase(),"_");t.element.dataset[w]=N.value,t.invalidateLayout()}),t.rect.element.hidden)return;t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());let i=t.ref.bounds;i||(i=t.ref.bounds=Xu(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);const{hopper:s,label:o,list:r,panel:a}=t.ref;s&&s.updateHopperState();const l=t.query("GET_PANEL_ASPECT_RATIO"),c=t.query("GET_ALLOW_MULTIPLE"),d=t.query("GET_TOTAL_ITEMS"),u=c?t.query("GET_MAX_FILES")||qu:1,p=d===u,f=n.find(C=>C.type==="DID_ADD_ITEM");if(p&&f){const C=f.data.interactionMethod;o.opacity=0,c?o.translateY=-40:C===Te.API?o.translateX=40:C===Te.BROWSE?o.translateY=40:o.translateY=30}else p||(o.opacity=1,o.translateX=0,o.translateY=0);const h=Wu(t),m=Yu(t),E=o.rect.element.height,g=!c||p?0:E,b=p?r.rect.element.marginTop:0,T=d===0?0:r.rect.element.marginBottom,R=g+b+m.visual+T,P=g+b+m.bounds+T;if(r.translateY=Math.max(0,g-r.rect.element.marginTop)-h.top,l){const C=t.rect.element.width,N=C*l;l!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=l,t.ref.updateHistory=[]);const w=t.ref.updateHistory;w.push(C);const x=2;if(w.length>x*2){const M=w.length,F=M-10;let z=0;for(let S=M;S>=F;S--)if(w[S]===w[S-2]&&z++,z>=x)return}a.scalable=!1,a.height=N;const G=N-g-(T-h.bottom)-(p?b:0);m.visual>G?r.overflow=G:r.overflow=null,t.height=N}else if(i.fixedHeight){a.scalable=!1;const C=i.fixedHeight-g-(T-h.bottom)-(p?b:0);m.visual>C?r.overflow=C:r.overflow=null}else if(i.cappedHeight){const C=R>=i.cappedHeight,N=Math.min(i.cappedHeight,R);a.scalable=!0,a.height=C?N:N-h.top-h.bottom;const w=N-g-(T-h.bottom)-(p?b:0);R>i.cappedHeight&&m.visual>w?r.overflow=w:r.overflow=null,t.height=Math.min(i.cappedHeight,P-h.top-h.bottom)}else{const C=d>0?h.top+h.bottom:0;a.scalable=!0,a.height=Math.max(E,R-C),t.height=Math.max(E,P-C)}t.ref.credits&&a.heightCurrent&&(t.ref.credits.style.transform=`translateY(${a.heightCurrent}px)`)},Wu=t=>{const e=t.ref.list.childViews[0].childViews[0];return e?{top:e.rect.element.marginTop,bottom:e.rect.element.marginBottom}:{top:0,bottom:0}},Yu=t=>{let e=0,n=0;const i=t.ref.list,s=i.childViews[0],o=s.childViews.filter(b=>b.rect.element.height),r=t.query("GET_ACTIVE_ITEMS").map(b=>o.find(T=>T.id===b.id)).filter(b=>b);if(r.length===0)return{visual:e,bounds:n};const a=s.rect.element.width,l=Ci(s,r,i.dragCoordinates),c=r[0].rect.element,d=c.marginTop+c.marginBottom,u=c.marginLeft+c.marginRight,p=c.width+u,f=c.height+d,h=typeof l<"u"&&l>=0?1:0,m=r.find(b=>b.markedForRemoval&&b.opacity<.45)?-1:0,E=r.length+h+m,g=Ai(a,p);return g===1?r.forEach(b=>{const T=b.rect.element.height+d;n+=T,e+=T*b.opacity}):(n=Math.ceil(E/g)*f,e=n),{visual:e,bounds:n}},Xu=t=>{const e=t.ref.measureHeight||null;return{cappedHeight:parseInt(t.style.maxHeight,10)||null,fixedHeight:e===0?null:e}},Fi=(t,e)=>{const n=t.query("GET_ALLOW_REPLACE"),i=t.query("GET_ALLOW_MULTIPLE"),s=t.query("GET_TOTAL_ITEMS");let o=t.query("GET_MAX_FILES");const r=e.length;return!i&&r>1?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Z("warning",0,"Max files")}),!0):(o=i?o:1,!i&&n?!1:vt(o)&&s+r>o?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Z("warning",0,"Max files")}),!0):!1)},Zu=(t,e,n)=>{const i=t.childViews[0];return Ci(i,e,{left:n.scopeLeft-i.rect.element.left,top:n.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},Ms=t=>{const e=t.query("GET_ALLOW_DROP"),n=t.query("GET_DISABLED"),i=e&&!n;if(i&&!t.ref.hopper){const s=xu(t.element,o=>{const r=t.query("GET_BEFORE_DROP_FILE")||(()=>!0);return t.query("GET_DROP_VALIDATION")?o.every(l=>st("ALLOW_HOPPER_ITEM",l,{query:t.query}).every(c=>c===!0)&&r(l)):!0},{filterItems:o=>{const r=t.query("GET_IGNORED_FILES");return o.filter(a=>bt(a)?!r.includes(a.name.toLowerCase()):!0)},catchesDropsOnPage:t.query("GET_DROP_ON_PAGE"),requiresDropOnElement:t.query("GET_DROP_ON_ELEMENT")});s.onload=(o,r)=>{const l=t.ref.list.childViews[0].childViews.filter(d=>d.rect.element.height),c=t.query("GET_ACTIVE_ITEMS").map(d=>l.find(u=>u.id===d.id)).filter(d=>d);Re("ADD_ITEMS",o,{dispatch:t.dispatch}).then(d=>{if(Fi(t,d))return!1;t.dispatch("ADD_ITEMS",{items:d,index:Zu(t.ref.list,c,r),interactionMethod:Te.DROP})}),t.dispatch("DID_DROP",{position:r}),t.dispatch("DID_END_DRAG",{position:r})},s.ondragstart=o=>{t.dispatch("DID_START_DRAG",{position:o})},s.ondrag=Sr(o=>{t.dispatch("DID_DRAG",{position:o})}),s.ondragend=o=>{t.dispatch("DID_END_DRAG",{position:o})},t.ref.hopper=s,t.ref.drip=t.appendChildView(t.createChildView(nu))}else!i&&t.ref.hopper&&(t.ref.hopper.destroy(),t.ref.hopper=null,t.removeChildView(t.ref.drip))},Ls=(t,e)=>{const n=t.query("GET_ALLOW_BROWSE"),i=t.query("GET_DISABLED"),s=n&&!i;s&&!t.ref.browser?t.ref.browser=t.appendChildView(t.createChildView($d,{...e,onload:o=>{Re("ADD_ITEMS",o,{dispatch:t.dispatch}).then(r=>{if(Fi(t,r))return!1;t.dispatch("ADD_ITEMS",{items:r,index:-1,interactionMethod:Te.BROWSE})})}}),0):!s&&t.ref.browser&&(t.removeChildView(t.ref.browser),t.ref.browser=null)},xs=t=>{const e=t.query("GET_ALLOW_PASTE"),n=t.query("GET_DISABLED"),i=e&&!n;i&&!t.ref.paster?(t.ref.paster=Bu(),t.ref.paster.onload=s=>{Re("ADD_ITEMS",s,{dispatch:t.dispatch}).then(o=>{if(Fi(t,o))return!1;t.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:Te.PASTE})})}):!i&&t.ref.paster&&(t.ref.paster.destroy(),t.ref.paster=null)},Ku=ce({DID_SET_ALLOW_BROWSE:({root:t,props:e})=>{Ls(t,e)},DID_SET_ALLOW_DROP:({root:t})=>{Ms(t)},DID_SET_ALLOW_PASTE:({root:t})=>{xs(t)},DID_SET_DISABLED:({root:t,props:e})=>{Ms(t),xs(t),Ls(t,e),t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),Qu=te({name:"root",read:({root:t})=>{t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:Vu,write:$u,destroy:({root:t})=>{t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",ln),t.element.removeEventListener("gesturestart",ln)},mixins:{styles:["height"]}}),Ju=(t={})=>{let e=null;const n=rn(),i=ml(ec(n),[yc,ic(n)],[qc,nc(n)]);i.dispatch("SET_OPTIONS",{options:t});const s=()=>{document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",s);let o=null,r=!1,a=!1,l=null,c=null;const d=()=>{r||(r=!0),clearTimeout(o),o=setTimeout(()=>{r=!1,l=null,c=null,a&&(a=!1,i.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",d);const u=Qu(i,{id:_i()});let p=!1,f=!1;const h={_read:()=>{r&&(c=window.innerWidth,l||(l=c),!a&&c!==l&&(i.dispatch("DID_START_RESIZE"),a=!0)),f&&p&&(p=u.element.offsetParent===null),!p&&(u._read(),f=u.rect.element.hidden)},_write:I=>{const _=i.processActionQueue().filter(L=>!/^SET_/.test(L.type));p&&!_.length||(b(_),p=u._write(I,_,a),rc(i.query("GET_ITEMS")),p&&i.processDispatchQueue())}},m=I=>_=>{const L={type:I};if(!_)return L;if(_.hasOwnProperty("error")&&(L.error=_.error?{..._.error}:null),_.status&&(L.status={..._.status}),_.file&&(L.output=_.file),_.source)L.file=_.source;else if(_.item||_.id){const A=_.item?_.item:i.query("GET_ITEM",_.id);L.file=A?ue(A):null}return _.items&&(L.items=_.items.map(ue)),/progress/.test(I)&&(L.progress=_.progress),_.hasOwnProperty("origin")&&_.hasOwnProperty("target")&&(L.origin=_.origin,L.target=_.target),L},E={DID_DESTROY:m("destroy"),DID_INIT:m("init"),DID_THROW_MAX_FILES:m("warning"),DID_INIT_ITEM:m("initfile"),DID_START_ITEM_LOAD:m("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:m("addfileprogress"),DID_LOAD_ITEM:m("addfile"),DID_THROW_ITEM_INVALID:[m("error"),m("addfile")],DID_THROW_ITEM_LOAD_ERROR:[m("error"),m("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[m("error"),m("removefile")],DID_PREPARE_OUTPUT:m("preparefile"),DID_START_ITEM_PROCESSING:m("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:m("processfileprogress"),DID_ABORT_ITEM_PROCESSING:m("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:m("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:m("processfiles"),DID_REVERT_ITEM_PROCESSING:m("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[m("error"),m("processfile")],DID_REMOVE_ITEM:m("removefile"),DID_UPDATE_ITEMS:m("updatefiles"),DID_ACTIVATE_ITEM:m("activatefile"),DID_REORDER_ITEMS:m("reorderfiles")},g=I=>{const _={pond:k,...I};delete _.type,u.element.dispatchEvent(new CustomEvent(`FilePond:${I.type}`,{detail:_,bubbles:!0,cancelable:!0,composed:!0}));const L=[];I.hasOwnProperty("error")&&L.push(I.error),I.hasOwnProperty("file")&&L.push(I.file);const A=["type","error","file"];Object.keys(I).filter(Y=>!A.includes(Y)).forEach(Y=>L.push(I[Y])),k.fire(I.type,...L);const W=i.query(`GET_ON${I.type.toUpperCase()}`);W&&W(...L)},b=I=>{I.length&&I.filter(_=>E[_.type]).forEach(_=>{const L=E[_.type];(Array.isArray(L)?L:[L]).forEach(A=>{_.type==="DID_INIT_ITEM"?g(A(_.data)):setTimeout(()=>{g(A(_.data))},0)})})},T=I=>i.dispatch("SET_OPTIONS",{options:I}),R=I=>i.query("GET_ACTIVE_ITEM",I),P=I=>new Promise((_,L)=>{i.dispatch("REQUEST_ITEM_PREPARE",{query:I,success:A=>{_(A)},failure:A=>{L(A)}})}),C=(I,_={})=>new Promise((L,A)=>{x([{source:I,options:_}],{index:_.index}).then(W=>L(W&&W[0])).catch(A)}),N=I=>I.file&&I.id,w=(I,_)=>(typeof I=="object"&&!N(I)&&!_&&(_=I,I=void 0),i.dispatch("REMOVE_ITEM",{..._,query:I}),i.query("GET_ACTIVE_ITEM",I)===null),x=(...I)=>new Promise((_,L)=>{const A=[],W={};if(En(I[0]))A.push.apply(A,I[0]),Object.assign(W,I[1]||{});else{const Y=I[I.length-1];typeof Y=="object"&&!(Y instanceof Blob)&&Object.assign(W,I.pop()),A.push(...I)}i.dispatch("ADD_ITEMS",{items:A,index:W.index,interactionMethod:Te.API,success:_,failure:L})}),G=()=>i.query("GET_ACTIVE_ITEMS"),M=I=>new Promise((_,L)=>{i.dispatch("REQUEST_ITEM_PROCESSING",{query:I,success:A=>{_(A)},failure:A=>{L(A)}})}),F=(...I)=>{const _=Array.isArray(I[0])?I[0]:I,L=_.length?_:G();return Promise.all(L.map(P))},z=(...I)=>{const _=Array.isArray(I[0])?I[0]:I;if(!_.length){const L=G().filter(A=>!(A.status===B.IDLE&&A.origin===ne.LOCAL)&&A.status!==B.PROCESSING&&A.status!==B.PROCESSING_COMPLETE&&A.status!==B.PROCESSING_REVERT_ERROR);return Promise.all(L.map(M))}return Promise.all(_.map(M))},S=(...I)=>{const _=Array.isArray(I[0])?I[0]:I;let L;typeof _[_.length-1]=="object"?L=_.pop():Array.isArray(I[0])&&(L=I[1]);const A=G();return _.length?_.map(Y=>Xe(Y)?A[Y]?A[Y].id:null:Y).filter(Y=>Y).map(Y=>w(Y,L)):Promise.all(A.map(Y=>w(Y,L)))},k={...vn(),...h,...tc(i,n),setOptions:T,addFile:C,addFiles:x,getFile:R,processFile:M,prepareFile:P,removeFile:w,moveFile:(I,_)=>i.dispatch("MOVE_ITEM",{query:I,index:_}),getFiles:G,processFiles:z,removeFiles:S,prepareFiles:F,sort:I=>i.dispatch("SORT",{compare:I}),browse:()=>{var I=u.element.querySelector("input[type=file]");I&&I.click()},destroy:()=>{k.fire("destroy",u.element),i.dispatch("ABORT_ALL"),u._destroy(),window.removeEventListener("resize",d),document.removeEventListener("visibilitychange",s),i.dispatch("DID_DESTROY")},insertBefore:I=>is(u.element,I),insertAfter:I=>ss(u.element,I),appendTo:I=>I.appendChild(u.element),replaceElement:I=>{is(u.element,I),I.parentNode.removeChild(I),e=I},restoreElement:()=>{e&&(ss(e,u.element),u.element.parentNode.removeChild(u.element),e=null)},isAttachedTo:I=>u.element===I||e===I,element:{get:()=>u.element},status:{get:()=>i.query("GET_STATUS")}};return i.dispatch("DID_INIT"),je(k)},_r=(t={})=>{const e={};return X(rn(),(i,s)=>{e[i]=s[0]}),Ju({...e,...t})},eh=t=>t.charAt(0).toLowerCase()+t.slice(1),th=t=>Rr(t.replace(/^data-/,"")),Or=(t,e)=>{X(e,(n,i)=>{X(t,(s,o)=>{const r=new RegExp(n);if(!r.test(s)||(delete t[s],i===!1))return;if(le(i)){t[i]=o;return}const l=i.group;se(i)&&!t[l]&&(t[l]={}),t[l][eh(s.replace(r,""))]=o}),i.mapping&&Or(t[i.group],i.mapping)})},nh=(t,e={})=>{const n=[];X(t.attributes,s=>{n.push(t.attributes[s])});const i=n.filter(s=>s.name).reduce((s,o)=>{const r=J(t,o.name);return s[th(o.name)]=r===o.name?!0:r,s},{});return Or(i,e),i},ih=(t,e={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};st("SET_ATTRIBUTE_TO_OPTION_MAP",n);const i={...e},s=nh(t.nodeName==="FIELDSET"?t.querySelector("input[type=file]"):t,n);Object.keys(s).forEach(r=>{se(s[r])?(se(i[r])||(i[r]={}),Object.assign(i[r],s[r])):i[r]=s[r]}),i.files=(e.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map(r=>({source:r.value,options:{type:r.dataset.type}})));const o=_r(i);return t.files&&Array.from(t.files).forEach(r=>{o.addFile(r)}),o.replaceElement(t),o},sh=(...t)=>pl(t[0])?ih(...t):_r(...t),oh=["fire","_read","_write"],Ns=t=>{const e={};return Yo(t,e,oh),e},rh=(t,e)=>t.replace(/(?:{([a-zA-Z]+)})/g,(n,i)=>e[i]),ah=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(e),i=new Worker(n);return{transfer:(s,o)=>{},post:(s,o,r)=>{const a=_i();i.onmessage=l=>{l.data.id===a&&o(l.data.message)},i.postMessage({id:a,message:s},r)},terminate:()=>{i.terminate(),URL.revokeObjectURL(n)}}},lh=t=>new Promise((e,n)=>{const i=new Image;i.onload=()=>{e(i)},i.onerror=s=>{n(s)},i.src=t}),wr=(t,e)=>{const n=t.slice(0,t.size,t.type);return n.lastModifiedDate=t.lastModifiedDate,n.name=e,n},ch=t=>wr(t,t.name),Fs=[],dh=t=>{if(Fs.includes(t))return;Fs.push(t);const e=t({addFilter:lc,utils:{Type:v,forin:X,isString:le,isFile:bt,toNaturalFileSize:rr,replaceInString:rh,getExtensionFromFilename:Tn,getFilenameWithoutExtension:ir,guesstimateMimeType:Er,getFileFromBlob:Et,getFilenameFromURL:Lt,createRoute:ce,createWorker:ah,createView:te,createItemAPI:ue,loadImage:lh,copyFile:ch,renameFile:wr,createBlob:er,applyFilterChain:Re,text:K,getNumericAspectRatioFromString:Ko},views:{fileActionButton:or}});cc(e.options)},uh=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",hh=()=>"Promise"in window,fh=()=>"slice"in Blob.prototype,ph=()=>"URL"in window&&"createObjectURL"in window.URL,mh=()=>"visibilityState"in document,gh=()=>"performance"in window,Eh=()=>"supports"in(window.CSS||{}),bh=()=>/MSIE|Trident/.test(window.navigator.userAgent),Bs=(()=>{const t=Ho()&&!uh()&&mh()&&hh()&&fh()&&ph()&&gh()&&(Eh()||bh());return()=>t})(),Ue={apps:[]},yh="filepond",ot=()=>{};let Gs={},qe=ot,Fn=ot,zs=ot,ks=ot,fi=ot,Us=ot,Hs=ot;if(Bs()){kl(()=>{Ue.apps.forEach(n=>n._read())},n=>{Ue.apps.forEach(i=>i._write(n))});const t=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Bs,create:qe,destroy:Fn,parse:zs,find:ks,registerPlugin:fi,setOptions:Hs}})),document.removeEventListener("DOMContentLoaded",t)};document.readyState!=="loading"?setTimeout(()=>t(),0):document.addEventListener("DOMContentLoaded",t);const e=()=>X(rn(),(n,i)=>{Gs[n]=i[1]});Gs={},e(),qe=(...n)=>{const i=sh(...n);return i.on("destroy",Fn),Ue.apps.push(i),Ns(i)},Fn=n=>{const i=Ue.apps.findIndex(s=>s.isAttachedTo(n));return i>=0?(Ue.apps.splice(i,1)[0].restoreElement(),!0):!1},zs=n=>Array.from(n.querySelectorAll(`.${yh}`)).filter(o=>!Ue.apps.find(r=>r.isAttachedTo(o))).map(o=>qe(o)),ks=n=>{const i=Ue.apps.find(s=>s.isAttachedTo(n));return i?Ns(i):null},fi=(...n)=>{n.forEach(dh),e()},Us=()=>{const n={};return X(rn(),(i,s)=>{n[i]=s[0]}),n},Hs=n=>(se(n)&&(Ue.apps.forEach(i=>{i.setOptions(n)}),dc(n)),Us())}fi(FilePondPluginFileValidateType,FilePondPluginImagePreview,FilePondPluginImageCrop,FilePondPluginImageResize,FilePondPluginImageTransform,FilePondPluginFileEncode);qe(document.querySelector(".filepond"),{labelIdle:"Criar uma foto aqui",imagePreviewHeight:100,imageCropAspectRatio:"1:1",imageResizeTargetWidth:100,imageResizeTargetHeight:100,stylePanelLayout:"compact square",styleLoadIndicatorPosition:"center bottom",styleProgressIndicatorPosition:"right bottom",styleButtonRemoveItemPosition:"left bottom",styleButtonProcessItemPosition:"right bottom",allowFileEncode:!0});qe(document.querySelector("#cnh"),{labelIdle:'<i class="bi bi-cloud-arrow-up"></i> Foto CNH',imagePreviewHeight:100,imageCropAspectRatio:"1:1",imageResizeTargetWidth:100,imageResizeTargetHeight:100,stylePanelLayout:"compact square",styleLoadIndicatorPosition:"center bottom",styleProgressIndicatorPosition:"right bottom",styleButtonRemoveItemPosition:"left bottom",styleButtonProcessItemPosition:"right bottom"});qe(document.querySelector("#cnv"),{labelIdle:'<i class="bi bi-cloud-arrow-up"></i> Foto CNV',imagePreviewHeight:100,imageCropAspectRatio:"1:1",imageResizeTargetWidth:100,imageResizeTargetHeight:100,stylePanelLayout:"compact square",styleLoadIndicatorPosition:"center bottom",styleProgressIndicatorPosition:"right bottom",styleButtonRemoveItemPosition:"left bottom",styleButtonProcessItemPosition:"right bottom"});qe(document.querySelector("#documento"),{labelIdle:'<i class="bi bi-cloud-arrow-up"></i> Foto Documento',imagePreviewHeight:100,imageCropAspectRatio:"1:1",imageResizeTargetWidth:100,imageResizeTargetHeight:100,stylePanelLayout:"compact square",styleLoadIndicatorPosition:"center bottom",styleProgressIndicatorPosition:"right bottom",styleButtonRemoveItemPosition:"left bottom",styleButtonProcessItemPosition:"right bottom"});qe(document.querySelector("#imagem"),{labelIdle:'<i class="bi bi-cloud-arrow-up"></i> Foto do veiculo',imagePreviewHeight:100,imageCropAspectRatio:"1:1",imageResizeTargetWidth:100,imageResizeTargetHeight:100,stylePanelLayout:"compact square",styleLoadIndicatorPosition:"center bottom",styleProgressIndicatorPosition:"right bottom",styleButtonRemoveItemPosition:"left bottom",styleButtonProcessItemPosition:"right bottom"});document.querySelector("#formRegister")&&document.querySelector("#formRegister").addEventListener("submit",function(t){t.preventDefault(),vh(t)});document.querySelector("#formRegisterEdit")&&document.querySelector("#formRegisterEdit").addEventListener("submit",function(t){t.preventDefault(),Pr(t)});document.querySelector("#formDadosBancarios")&&document.querySelector("#formDadosBancarios").addEventListener("submit",function(t){t.preventDefault(),Pr(t)});function vh(t){t.preventDefault();const e=t.target,n=new FormData(e),i=e.method;axios({method:i,url:e.action,data:n}).then(s=>{Th(s.data),Ih(s.data),Toastify({text:"Cadastro realizado com sucesso!",className:"info",close:!0,gravity:"bottom",position:"right",style:{background:"#FF9921"}}).showToast()})}function Pr(t){t.preventDefault();const e=t.target,n=new FormData(e),i=e.method;axios({method:i,url:e.action,data:n}).then(s=>{console.log(s.data),window.location.href=s.data.route})}function Th(t){axios({method:"get",url:t+"/form"}).then(e=>{document.querySelector("#formRegister").innerHTML=e.data})}function Ih(t){axios({method:"get",url:t+"/list"}).then(e=>{document.querySelector("#tableList").innerHTML=e.data})}const O=(t,e=1e4)=>(t=parseFloat(t+"")||0,Math.round((t+Number.EPSILON)*e)/e),pi=function(t){if(!(t&&t instanceof Element&&t.offsetParent))return!1;const e=t.scrollHeight>t.clientHeight,n=window.getComputedStyle(t).overflowY,i=n.indexOf("hidden")!==-1,s=n.indexOf("visible")!==-1;return e&&!i&&!s},cn=function(t,e=void 0){return!(!t||t===document.body||e&&t===e)&&(pi(t)?t:cn(t.parentElement,e))},De=function(t){var e=new DOMParser().parseFromString(t,"text/html").body;if(e.childElementCount>1){for(var n=document.createElement("div");e.firstChild;)n.appendChild(e.firstChild);return n}return e.firstChild},Bi=t=>`${t||""}`.split(" ").filter(e=>!!e),Ae=(t,e,n)=>{t&&Bi(e).forEach(i=>{t.classList.toggle(i,n||!1)})};class at{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}}const lt={passive:!1};class Rh{constructor(e,{start:n=()=>!0,move:i=()=>{},end:s=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=n,this.moveCallback=i,this.endCallback=s;for(const o of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[o]=this[o].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,lt),this.element.addEventListener("touchstart",this.onTouchStart,lt),this.element.addEventListener("touchmove",this.onMove,lt),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||e.button!==0)return;const n=new at(e);this.currentPointers.some(i=>i.id===n.id)||this.triggerPointerStart(n,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(const n of Array.from(e.changedTouches||[]))this.triggerPointerStart(new at(n),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){const n=this.currentPointers.slice(),i="changedTouches"in e?Array.from(e.changedTouches||[]).map(o=>new at(o)):[new at(e)],s=[];for(const o of i){const r=this.currentPointers.findIndex(a=>a.id===o.id);r<0||(s.push(o),this.currentPointers[r]=o)}s.length&&this.moveCallback(e,this.currentPointers.slice(),n)}onPointerEnd(e){e.buttons>0&&e.button!==0||(this.triggerPointerEnd(e,new at(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(const n of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new at(n))}triggerPointerStart(e,n){return!!this.startCallback(n,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,n){const i=this.currentPointers.findIndex(s=>s.id===n.id);i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(e,n,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,lt),this.element.removeEventListener("touchstart",this.onTouchStart,lt),this.element.removeEventListener("touchmove",this.onMove,lt),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function js(t,e){return e?Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2)):0}function qs(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const mi=t=>typeof t=="object"&&t!==null&&t.constructor===Object&&Object.prototype.toString.call(t)==="[object Object]",fe=(t,...e)=>{const n=e.length;for(let i=0;i<n;i++){const s=e[i]||{};Object.entries(s).forEach(([o,r])=>{const a=Array.isArray(r)?[]:{};t[o]||Object.assign(t,{[o]:a}),mi(r)?Object.assign(t[o],fe(a,r)):Array.isArray(r)?Object.assign(t,{[o]:[...r]}):Object.assign(t,{[o]:r})})}return t},Bn=function(t,e){return t.split(".").reduce((n,i)=>typeof n=="object"?n[i]:void 0,e)};class dn{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(const n of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))n.startsWith("on")&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}setOptions(e){this.options=e?fe({},this.constructor.defaults,e):{};for(const[n,i]of Object.entries(this.option("on")||{}))this.on(n,i)}option(e,...n){let i=Bn(e,this.options);return i&&typeof i=="function"&&(i=i.call(this,this,...n)),i}optionFor(e,n,i,...s){let o=Bn(n,e);var r;typeof(r=o)!="string"||isNaN(r)||isNaN(parseFloat(r))||(o=parseFloat(o)),o==="true"&&(o=!0),o==="false"&&(o=!1),o&&typeof o=="function"&&(o=o.call(this,this,e,...s));let a=Bn(n,this.options);return a&&typeof a=="function"?o=a.call(this,this,e,...s,o):o===void 0&&(o=a),o===void 0?i:o}cn(e){const n=this.options.classes;return n&&n[e]||""}localize(e,n=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(i,s,o)=>{let r="";return o?r=this.option(`${s[0]+s.toLowerCase().substring(1)}.l10n.${o}`):s&&(r=this.option(`l10n.${s}`)),r||(r=i),r});for(let i=0;i<n.length;i++)e=e.split(n[i][0]).join(n[i][1]);return e=e.replace(/\{\{(.*?)\}\}/g,(i,s)=>s)}on(e,n){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),this.events||(this.events=new Map),i.forEach(s=>{let o=this.events.get(s);o||(this.events.set(s,[]),o=[]),o.includes(n)||o.push(n),this.events.set(s,o)})}off(e,n){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),i.forEach(s=>{const o=this.events.get(s);if(Array.isArray(o)){const r=o.indexOf(n);r>-1&&o.splice(r,1)}})}emit(e,...n){[...this.events.get(e)||[]].forEach(i=>i(this,...n)),e!=="*"&&this.emit("*",e,...n)}}Object.defineProperty(dn,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(dn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class Gi extends dn{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){const n=new Map;for(const[i,s]of Object.entries(e)){const o=this.option(i),r=this.plugins[i];r||o===!1?r&&o===!1&&(r.detach(),delete this.plugins[i]):n.set(i,new s(this,o||{}))}for(const[i,s]of n)this.plugins[i]=s,s.attach()}detachPlugins(e){e=e||Object.keys(this.plugins);for(const n of e){const i=this.plugins[n];i&&i.detach(),delete this.plugins[n]}return this.emit("detachPlugins"),this}}var V;(function(t){t[t.Init=0]="Init",t[t.Error=1]="Error",t[t.Ready=2]="Ready",t[t.Panning=3]="Panning",t[t.Mousemove=4]="Mousemove",t[t.Destroy=5]="Destroy"})(V||(V={}));const Le=["a","b","c","d","e","f"],Dr={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},Sh={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:Dr},Vs='<circle cx="25" cy="25" r="20"></circle>',zi='<div class="f-spinner"><svg viewBox="0 0 50 50">'+Vs+Vs+"</svg></div>",he=t=>t&&t!==null&&t instanceof Element&&"nodeType"in t,q=(t,e)=>{t&&Bi(e).forEach(n=>{t.classList.remove(n)})},D=(t,e)=>{t&&Bi(e).forEach(n=>{t.classList.add(n)})},Ut={a:1,b:0,c:0,d:1,e:0,f:0},_h=1e5,Ht=1e4,Ee="mousemove",$s="drag",Ws="content",be="auto";let Gn=null,zn=null;class it extends Gi{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return zn===null&&(zn=window.matchMedia("(hover: none)").matches),zn}get isMobile(){return Gn===null&&(Gn=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),Gn}get panMode(){return this.options.panMode!==Ee||this.isTouchDevice?$s:Ee}get panOnlyZoomed(){const e=this.options.panOnlyZoomed;return e===be?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:e,b:n}=this.current;return Math.sqrt(e*e+n*n)||1}get targetScale(){const{a:e,b:n}=this.target;return Math.sqrt(e*e+n*n)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:e,contentRect:n}=this,i=Math.max(e.height/n.fitHeight,e.width/n.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const e of Le){const n=e=="e"||e==="f"?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>n)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,n={},i={}){var s;if(super(n),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:V.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Ut)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Ut)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},it.Plugins),i)),this.emit("attachPlugins"),this.emit("init");const o=this.content;if(o.addEventListener("load",this.onLoad),o.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));const r=De(zi);!e.contains(o)||o.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(r):this.spinner=((s=o.parentElement)===null||s===void 0?void 0:s.insertBefore(r,o))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){const{container:e}=this,n=this.cn(Ws);let i=this.option(Ws)||e.querySelector(`.${n}`);if(i||(i=e.querySelector("img,picture")||e.firstElementChild,i&&D(i,n)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){const{spinner:e,container:n,state:i}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&n.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===V.Init?this.enable():this.updateMetrics()}onError(){this.state!==V.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=V.Error,this.emit("error"))}getNextScale(e){const{fullScale:n,targetScale:i,coverScale:s,maxScale:o,minScale:r}=this;let a=r;switch(e){case"toggleMax":a=i-r<.5*(o-r)?o:r;break;case"toggleCover":a=i-r<.5*(s-r)?s:r;break;case"toggleZoom":a=i-r<.5*(n-r)?n:r;break;case"iterateZoom":let l=[1,n,o].sort((d,u)=>d-u),c=l.findIndex(d=>d>i+1e-5);a=l[c]||1}return a}attachObserver(){var e;const n=()=>{const{container:i,containerRect:s}=this;return Math.abs(s.width-i.getBoundingClientRect().width)>.1||Math.abs(s.height-i.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(n()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{n()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(e=this.resizeObserver)===null||e===void 0||e.observe(this.container)}detachObserver(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}attachEvents(){const{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new Rh(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(Ee,this.onMouseMove)}detachEvents(){var e;const{container:n}=this;n.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),n.removeEventListener("wheel",this.onWheel,{passive:!1}),(e=this.pointerTracker)===null||e===void 0||e.stop(),this.pointerTracker=null,document.removeEventListener(Ee,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const e=this.friction,n=this.option("maxVelocity");for(const i of Le)e?(this.velocity[i]*=1-e,n&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],n),-1*n)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(const e of Le)e==="e"&&this.isBouncingX||e==="f"&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,n=0){const{current:i}=this,s=i.e+e,o=i.f+n,r=this.getBounds(),{x:a,y:l}=r,c=a.min,d=a.max,u=l.min,p=l.max;let f=0,h=0;return c!==1/0&&s<c?f=c-s:d!==1/0&&s>d&&(f=d-s),u!==1/0&&o<u?h=u-o:p!==1/0&&o>p&&(h=p-o),Math.abs(f)<1e-4&&(f=0),Math.abs(h)<1e-4&&(h=0),Object.assign(Object.assign({},r),{xDiff:f,yDiff:h,inBounds:!f&&!h})}clampTargetBounds(){const{target:e}=this,{x:n,y:i}=this.getBounds();n.min!==1/0&&(e.e=Math.max(e.e,n.min)),n.max!==1/0&&(e.e=Math.min(e.e,n.max)),i.min!==1/0&&(e.f=Math.max(e.f,i.min)),i.max!==1/0&&(e.f=Math.min(e.f,i.max))}calculateContentDim(e=this.current){const{content:n,contentRect:i}=this,{fitWidth:s,fitHeight:o,fullWidth:r,fullHeight:a}=i;let l=r,c=a;if(this.option("zoom")||this.angle!==0){const d=!(n instanceof HTMLImageElement)&&(window.getComputedStyle(n).maxWidth==="none"||window.getComputedStyle(n).maxHeight==="none"),u=d?r:s,p=d?a:o,f=this.getMatrix(e),h=new DOMPoint(0,0).matrixTransform(f),m=new DOMPoint(0+u,0).matrixTransform(f),E=new DOMPoint(0+u,0+p).matrixTransform(f),g=new DOMPoint(0,0+p).matrixTransform(f),b=Math.abs(E.x-h.x),T=Math.abs(E.y-h.y),R=Math.abs(g.x-m.x),P=Math.abs(g.y-m.y);l=Math.max(b,R),c=Math.max(T,P)}return{contentWidth:l,contentHeight:c}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===Ee||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:e}=this,{x:n,y:i,xDiff:s,yDiff:o}=this.checkBounds(),r=this.option("maxVelocity");let a=this.velocity.e,l=this.velocity.f;s!==0?(this.isBouncingX=!0,s*a<=0?a+=.14*s:(a=.14*s,n.min!==1/0&&(this.target.e=Math.max(e.e,n.min)),n.max!==1/0&&(this.target.e=Math.min(e.e,n.max))),r&&(a=Math.max(Math.min(a,r),-1*r))):this.isBouncingX=!1,o!==0?(this.isBouncingY=!0,o*l<=0?l+=.14*o:(l=.14*o,i.min!==1/0&&(this.target.f=Math.max(e.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(e.f,i.max))),r&&(l=Math.max(Math.min(l,r),-1*r))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=l)}enable(){const{content:e}=this,n=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(const i of Le)this.current[i]=this.target[i]=n[i];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=V.Ready,this.emit("ready")}onClick(e){var n;e.type==="click"&&e.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((n=this.pointerTracker)===null||n===void 0||n.clear(),this.trackingPoints=[],this.startDecelAnim());const i=e.target;if(!i||e.defaultPrevented)return;if(i.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{const f=window.getSelection();return f&&f.type==="Range"})()&&!i.closest("button"))return;const s=i.closest("[data-panzoom-action]"),o=i.closest("[data-panzoom-change]"),r=s||o,a=r&&he(r)?r.dataset:null;if(a){const f=a.panzoomChange,h=a.panzoomAction;if((f||h)&&e.preventDefault(),f){let m={};try{m=JSON.parse(f)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(m)}if(h)return void(this[h]&&this[h]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();if(i.closest("[data-fancybox]"))return;const l=this.content.getBoundingClientRect(),c=this.dragStart;if(c.time&&!this.canZoomOut()&&(Math.abs(l.x-c.x)>2||Math.abs(l.y-c.y)>2))return;this.dragStart.time=0;const d=f=>{this.option("zoom",e)&&f&&typeof f=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(f)&&typeof this[f]=="function"&&(e.preventDefault(),this[f]({event:e}))},u=this.option("click",e),p=this.option("dblClick",e);p?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",e),!e.defaultPrevented&&u&&d(u)):(this.emit("dblClick",e),e.defaultPrevented||d(p)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",e),!e.defaultPrevented&&u&&d(u))}addTrackingPoint(e){const n=this.trackingPoints.filter(i=>i.time>Date.now()-100);n.push(e),this.trackingPoints=n}onPointerDown(e,n,i){var s;if(this.option("touch",e)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const o=this.content.getBoundingClientRect();if(this.dragStart={x:o.x,y:o.y,top:o.top,left:o.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===Ee&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;const r=e.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(r.nodeName)||r.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(s=window.getSelection())===null||s===void 0||s.removeAllRanges()}if(e.type==="mousedown")["A","BUTTON"].includes(r.nodeName)||e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(n),this.emit("touchStart",e)),!0}onPointerMove(e,n,i){if(this.option("touch",e)===!1||!this.isDragging||n.length<2&&this.panOnlyZoomed&&O(this.targetScale)<=O(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))return;this.addTrackingPoint(n[0]);const{content:s}=this,o=qs(i[0],i[1]),r=qs(n[0],n[1]);let a=0,l=0;if(n.length>1){const T=s.getBoundingClientRect();a=o.clientX-T.left-.5*T.width,l=o.clientY-T.top-.5*T.height}const c=js(i[0],i[1]),d=js(n[0],n[1]);let u=c?d/c:1,p=r.clientX-o.clientX,f=r.clientY-o.clientY;this.dragOffset.x+=p,this.dragOffset.y+=f,this.dragOffset.time=Date.now()-this.dragStart.time;let h=O(this.targetScale)===O(this.minScale)&&this.option("lockAxis");if(h&&!this.lockedAxis)if(h==="xy"||h==="y"||e.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();const T=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=T>45&&T<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,p=0,f=0}else this.lockedAxis=h;if(cn(e.target,this.content)&&(h="x",this.dragOffset.y=0),h&&h!=="xy"&&this.lockedAxis!==h&&O(this.targetScale)===O(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));const m=this.checkBounds(p,f);this.option("rubberband")?(this.isInfinite!=="x"&&(m.xDiff>0&&p<0||m.xDiff<0&&p>0)&&(p*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*m.xDiff))),this.isInfinite!=="y"&&(m.yDiff>0&&f<0||m.yDiff<0&&f>0)&&(f*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*m.yDiff)))):(m.xDiff&&(p=0),m.yDiff&&(f=0));const E=this.targetScale,g=this.minScale,b=this.maxScale;E<.5*g&&(u=Math.max(u,g)),E>1.5*b&&(u=Math.min(u,b)),this.lockedAxis==="y"&&O(E)===O(g)&&(p=0),this.lockedAxis==="x"&&O(E)===O(g)&&(f=0),this.applyChange({originX:a,originY:l,panX:p,panY:f,scale:u,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,n,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(n),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),cn(e.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==V.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;const n=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const T of Le)this.velocity[T]=0;this.target.e=this.current.e,this.target.f=this.current.f,q(this.container,"is-scaling"),q(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:i}=this,s=i[0],o=i[i.length-1];let r=0,a=0,l=0;o&&s&&(r=o.clientX-s.clientX,a=o.clientY-s.clientY,l=o.time-s.time);const c=((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1;c!==1&&(r*=c,a*=c);let d=0,u=0,p=0,f=0,h=this.option("decelFriction");const m=this.targetScale;if(l>0){p=Math.abs(r)>3?r/(l/30):0,f=Math.abs(a)>3?a/(l/30):0;const T=this.option("maxVelocity");T&&(p=Math.max(Math.min(p,T),-1*T),f=Math.max(Math.min(f,T),-1*T))}p&&(d=p/(1/(1-h)-1)),f&&(u=f/(1/(1-h)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&O(m)===this.minScale)&&(d=p=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&O(m)===this.minScale)&&(u=f=0);const E=this.dragOffset.x,g=this.dragOffset.y,b=this.option("dragMinThreshold")||0;Math.abs(E)<b&&Math.abs(g)<b&&(d=u=0,p=f=0),(this.option("zoom")&&(m<this.minScale-1e-5||m>this.maxScale+1e-5)||n&&!d&&!u)&&(h=.35),this.applyChange({panX:d,panY:u,friction:h}),this.emit("decel",p,f,E,g)}onWheel(e){var n=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(o,r){return Math.abs(r)>Math.abs(o)?r:o});const i=Math.max(-1,Math.min(1,n));if(this.emit("wheel",e,i),this.panMode===Ee||e.defaultPrevented)return;const s=this.option("wheel");s==="pan"?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):s==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){e.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:e,target:n,content:i,contentRect:s}=this,o=Object.assign({},Ut);for(const E of Le){const g=E=="e"||E==="f"?Ht:_h;o[E]=O(e[E],g),Math.abs(n[E]-e[E])<(E=="e"||E==="f"?.51:.001)&&(e[E]=n[E])}let{a:r,b:a,c:l,d:c,e:d,f:u}=o,p=`matrix(${r}, ${a}, ${l}, ${c}, ${d}, ${u})`,f=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;if(this.option("transformParent")&&(f=f.parentElement||f),f.style.transform===p)return;f.style.transform=p;const{contentWidth:h,contentHeight:m}=this.calculateContentDim();s.width=h,s.height=m,this.emit("afterTransform")}updateMetrics(e=!1){var n;if(!this||this.state===V.Destroy||this.isContentLoading)return;const i=Math.max(1,((n=window.visualViewport)===null||n===void 0?void 0:n.scale)||1),{container:s,content:o}=this,r=o instanceof HTMLImageElement,a=s.getBoundingClientRect(),l=getComputedStyle(this.container);let c=a.width*i,d=a.height*i;const u=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),p=c-(parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),f=d-u;this.containerRect={width:c,height:d,innerWidth:p,innerHeight:f};const h=parseFloat(o.dataset.width||"")||(z=>{let S=0;return S=z instanceof HTMLImageElement?z.naturalWidth:z instanceof SVGElement?z.width.baseVal.value:Math.max(z.offsetWidth,z.scrollWidth),S||0})(o),m=parseFloat(o.dataset.height||"")||(z=>{let S=0;return S=z instanceof HTMLImageElement?z.naturalHeight:z instanceof SVGElement?z.height.baseVal.value:Math.max(z.offsetHeight,z.scrollHeight),S||0})(o);let E=this.option("width",h)||be,g=this.option("height",m)||be;const b=E===be,T=g===be;typeof E!="number"&&(E=h),typeof g!="number"&&(g=m),b&&(E=h*(g/m)),T&&(g=m/(h/E));let R=o.parentElement instanceof HTMLPictureElement?o.parentElement:o;this.option("transformParent")&&(R=R.parentElement||R);const P=R.getAttribute("style")||"";R.style.setProperty("transform","none","important"),r&&(R.style.width="",R.style.height=""),R.offsetHeight;const C=o.getBoundingClientRect();let N=C.width*i,w=C.height*i,x=N,G=w;N=Math.min(N,E),w=Math.min(w,g),r?{width:N,height:w}=((z,S,k,I)=>{const _=k/z,L=I/S,A=Math.min(_,L);return{width:z*=A,height:S*=A}})(E,g,N,w):(N=Math.min(N,E),w=Math.min(w,g));let M=.5*(G-w),F=.5*(x-N);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:C.top-a.top+M,bottom:a.bottom-C.bottom+M,left:C.left-a.left+F,right:a.right-C.right+F,fitWidth:N,fitHeight:w,width:N,height:w,fullWidth:E,fullHeight:g}),R.style.cssText=P,r&&(R.style.width=`${N}px`,R.style.height=`${w}px`),this.setTransform(),e!==!0&&this.emit("refresh"),this.ignoreBounds||(O(this.targetScale)<O(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===V.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:e,contentHeight:n}=this.calculateContentDim(this.target),{targetScale:i,lockedAxis:s}=this,{fitWidth:o,fitHeight:r}=this.contentRect;let a=0,l=0,c=0,d=0;const u=this.option("infinite");if(u===!0||s&&u===s)a=-1/0,c=1/0,l=-1/0,d=1/0;else{let{containerRect:p,contentRect:f}=this,h=O(o*i,Ht),m=O(r*i,Ht),{innerWidth:E,innerHeight:g}=p;if(p.width===h&&(E=p.width),p.width===m&&(g=p.height),e>E){c=.5*(e-E),a=-1*c;let b=.5*(f.right-f.left);a+=b,c+=b}if(o>E&&e<E&&(a-=.5*(o-E),c-=.5*(o-E)),n>g){d=.5*(n-g),l=-1*d;let b=.5*(f.bottom-f.top);l+=b,d+=b}r>g&&n<g&&(a-=.5*(r-g),c-=.5*(r-g))}return{x:{min:a,max:c},y:{min:l,max:d}}}getBounds(){const e=this.option("bounds");return e!==be?e:this.calculateBounds()}updateControls(){const e=this,n=e.container,{panMode:i,contentRect:s,targetScale:o,minScale:r}=e;let a=r,l=e.option("click")||!1;l&&(a=e.getNextScale(l));let c=e.canZoomIn(),d=e.canZoomOut(),u=i===$s&&!!this.option("touch"),p=d&&u;if(u&&(O(o)<O(r)&&!this.panOnlyZoomed&&(p=!0),(O(s.width,1)>O(s.fitWidth,1)||O(s.height,1)>O(s.fitHeight,1))&&(p=!0)),O(s.width*o,1)<O(s.fitWidth,1)&&(p=!1),i===Ee&&(p=!1),Ae(n,this.cn("isDraggable"),p),!this.option("zoom"))return;let f=c&&O(a)>O(o),h=!f&&!p&&d&&O(a)<O(o);Ae(n,this.cn("canZoomIn"),f),Ae(n,this.cn("canZoomOut"),h);for(const m of n.querySelectorAll("[data-panzoom-action]")){let E=!1,g=!1;switch(m.dataset.panzoomAction){case"zoomIn":c?E=!0:g=!0;break;case"zoomOut":d?E=!0:g=!0;break;case"toggleZoom":case"iterateZoom":c||d?E=!0:g=!0;const b=m.querySelector("g");b&&(b.style.display=c?"":"none")}E?(m.removeAttribute("disabled"),m.removeAttribute("tabindex")):g&&(m.setAttribute("disabled",""),m.setAttribute("tabindex","-1"))}}panTo({x:e=this.target.e,y:n=this.target.f,scale:i=this.targetScale,friction:s=this.option("friction"),angle:o=0,originX:r=0,originY:a=0,flipX:l=!1,flipY:c=!1,ignoreBounds:d=!1}){this.state!==V.Destroy&&this.applyChange({panX:e-this.target.e,panY:n-this.target.f,scale:i/this.targetScale,angle:o,originX:r,originY:a,friction:s,flipX:l,flipY:c,ignoreBounds:d})}applyChange({panX:e=0,panY:n=0,scale:i=1,angle:s=0,originX:o=-this.current.e,originY:r=-this.current.f,friction:a=this.option("friction"),flipX:l=!1,flipY:c=!1,ignoreBounds:d=!1,bounce:u=this.option("bounce")}){const p=this.state;if(p===V.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=a||0,this.ignoreBounds=d;const{current:f}=this,h=f.e,m=f.f,E=this.getMatrix(this.target);let g=new DOMMatrix().translate(h,m).translate(o,r).translate(e,n);if(this.option("zoom")){if(!d){const b=this.targetScale,T=this.minScale,R=this.maxScale;b*i<T&&(i=T/b),b*i>R&&(i=R/b)}g=g.scale(i)}g=g.translate(-o,-r).translate(-h,-m).multiply(E),s&&(g=g.rotate(s)),l&&(g=g.scale(-1,1)),c&&(g=g.scale(1,-1));for(const b of Le)b!=="e"&&b!=="f"&&(g[b]>this.minScale+1e-5||g[b]<this.minScale-1e-5)?this.target[b]=g[b]:this.target[b]=O(g[b],Ht);(this.targetScale<this.scale||Math.abs(i-1)>.1||this.panMode===Ee||u===!1)&&!d&&this.clampTargetBounds(),p===V.Init?this.animate():this.isResting||(this.state=V.Panning,this.requestTick())}stop(e=!1){if(this.state===V.Init||this.state===V.Destroy)return;const n=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const i of Le)this.velocity[i]=0,e==="current"?this.current[i]=this.target[i]:e==="target"&&(this.target[i]=this.current[i]);this.setTransform(),q(this.container,"is-scaling"),q(this.container,"is-animating"),this.isTicking=!1,this.state=V.Ready,n&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),D(this.container,"is-animating"),this.isScaling&&D(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(e,n=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==Ee||!e||O(this.targetScale)<=O(this.minScale))return;this.emit("mouseMove",e);const{container:i,containerRect:s,contentRect:o}=this,r=s.width,a=s.height,l=i.getBoundingClientRect(),c=(e.clientX||0)-l.left,d=(e.clientY||0)-l.top;let{contentWidth:u,contentHeight:p}=this.calculateContentDim(this.target);const f=this.option("mouseMoveFactor");f>1&&(u!==r&&(u*=f),p!==a&&(p*=f));let h=.5*(u-r)-c/r*100/100*(u-r);h+=.5*(o.right-o.left);let m=.5*(p-a)-d/a*100/100*(p-a);m+=.5*(o.bottom-o.top),this.applyChange({panX:h-this.target.e,panY:m-this.target.f,friction:n})}zoomWithWheel(e){if(this.state===V.Destroy||this.state===V.Init)return;const n=Date.now();if(n-this.pwt<45)return void e.preventDefault();this.pwt=n;var i=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(c,d){return Math.abs(d)>Math.abs(c)?d:c});const s=Math.max(-1,Math.min(1,i)),{targetScale:o,maxScale:r,minScale:a}=this;let l=o*(100+45*s)/100;O(l)<O(a)&&O(o)<=O(a)?(this.cwd+=Math.abs(s),l=a):O(l)>O(r)&&O(o)>=O(r)?(this.cwd+=Math.abs(s),l=r):(this.cwd=0,l=Math.max(Math.min(l,r),a)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),O(l)!==O(o)&&this.zoomTo(l,{event:e}))}canZoomIn(){return this.option("zoom")&&(O(this.contentRect.width,1)<O(this.contentRect.fitWidth,1)||O(this.targetScale)<O(this.maxScale))}canZoomOut(){return this.option("zoom")&&O(this.targetScale)>O(this.minScale)}zoomIn(e=1.25,n){this.zoomTo(this.targetScale*e,n)}zoomOut(e=.8,n){this.zoomTo(this.targetScale*e,n)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:n=be,originX:i=be,originY:s=be,event:o}={}){if(this.isContentLoading||this.state===V.Destroy)return;const{targetScale:r,fullScale:a,maxScale:l,coverScale:c}=this;if(this.stop(),this.panMode===Ee&&(o=this.pmme||o),o||i===be||s===be){const u=this.content.getBoundingClientRect(),p=this.container.getBoundingClientRect(),f=o?o.clientX:p.left+.5*p.width,h=o?o.clientY:p.top+.5*p.height;i=f-u.left-.5*u.width,s=h-u.top-.5*u.height}let d=1;typeof e=="number"?d=e:e==="full"?d=a:e==="cover"?d=c:e==="max"?d=l:e==="fit"?d=1:e==="next"&&(d=this.getNextScale("iterateZoom")),d=d/r||1,n=n===be?d>1?.15:.25:n,this.applyChange({scale:d,originX:i,originY:s,friction:n}),o&&this.panMode===Ee&&this.panWithMouse(o,n)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:e,contentRect:n,target:i}=this;this.applyChange({panX:.5*e.width-(n.left+.5*n.fitWidth)-i.e,panY:.5*e.height-(n.top+.5*n.fitHeight)-i.f,scale:e.width/n.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:e,contentRect:n,target:i}=this;this.applyChange({panX:.5*e.width-(n.left+.5*n.fitWidth)-i.e,panY:.5*e.innerHeight-(n.top+.5*n.fitHeight)-i.f,scale:e.height/n.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:e}=this,n=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");e.classList.toggle(n);const s=e.classList.contains(n);s?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(s?"enterFS":"exitFS")}getMatrix(e=this.current){const{a:n,b:i,c:s,d:o,e:r,f:a}=e;return new DOMMatrix([n,i,s,o,r,a])}reset(e){if(this.state!==V.Init&&this.state!==V.Destroy){this.stop("current");for(const n of Le)this.target[n]=Ut[n];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=e===void 0?this.option("friction"):e,this.state=V.Panning,this.requestTick())}}destroy(){this.stop(),this.state=V.Destroy,this.detachEvents(),this.detachObserver();const{container:e,content:n}=this,i=this.option("classes")||{};for(const s of Object.values(i))e.classList.remove(s+"");n&&(n.removeEventListener("load",this.onLoad),n.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(it,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Sh}),Object.defineProperty(it,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const Ys=function(t,e){let n=!0;return(...i)=>{n&&(n=!1,t(...i),setTimeout(()=>{n=!0},e))}},Xs=(t,e)=>{let n=[];return t.childNodes.forEach(i=>{i.nodeType!==Node.ELEMENT_NODE||e&&!i.matches(e)||n.push(i)}),n},Oh={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};var Q;(function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Destroy=2]="Destroy"})(Q||(Q={}));const kn=t=>{if(typeof t=="string"||t instanceof HTMLElement)t={html:t};else{const e=t.thumb;e!==void 0&&(typeof e=="string"&&(t.thumbSrc=e),e instanceof HTMLImageElement&&(t.thumbEl=e,t.thumbElSrc=e.src,t.thumbSrc=e.src),delete t.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},t)},wh=(t={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},t);class Oe extends dn{constructor(e,n){super(n),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}}const Ph={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2};class Ar extends Oe{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;if(!e){e=document.createElement("ul"),D(e,this.cn("list")),e.setAttribute("role","tablist");const n=this.instance.container;n.appendChild(e),D(n,this.cn("hasDots")),this.list=e}return e}refresh(){var e;const n=this.instance.pages.length,i=Math.min(2,this.option("minCount")),s=Math.max(2e3,this.option("maxCount")),o=this.option("dynamicFrom");if(n<i||n>s)return void this.cleanup();const r=typeof o=="number"&&n>5&&n>=o,a=!this.list||this.isDynamic!==r||this.list.children.length!==n;a&&this.cleanup();const l=this.build();if(Ae(l,this.cn("isDynamic"),!!r),a)for(let u=0;u<n;u++)l.append(this.createItem(u));let c,d=0;for(const u of[...l.children]){const p=d===this.instance.page;p&&(c=u),Ae(u,this.cn("isCurrent"),p),(e=u.children[0])===null||e===void 0||e.setAttribute("aria-selected",p?"true":"false");for(const f of["isBeforePrev","isPrev","isNext","isAfterNext"])q(u,this.cn(f));d++}if(c=c||l.firstChild,r&&c){const u=c.previousElementSibling,p=u&&u.previousElementSibling;D(u,this.cn("isPrev")),D(p,this.cn("isBeforePrev"));const f=c.nextElementSibling,h=f&&f.nextElementSibling;D(f,this.cn("isNext")),D(h,this.cn("isAfterNext"))}this.isDynamic=r}createItem(e=0){var n;const i=document.createElement("li");i.setAttribute("role","presentation");const s=De(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return i.appendChild(s),(n=i.children[0])===null||n===void 0||n.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,q(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(Ar,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ph});const jt="disabled",qt="next",Zs="prev";class Cr extends Oe{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const e=this.instance,n=e.pages.length,i=e.page;if(n<2)return void this.cleanup();this.build();let s=this.prev,o=this.next;s&&o&&(s.removeAttribute(jt),o.removeAttribute(jt),e.isInfinite||(i<=0&&s.setAttribute(jt,""),i>=n-1&&o.setAttribute(jt,"")))}addBtn(e){var n;const i=this.instance,s=document.createElement("button");s.setAttribute("tabindex","0"),s.setAttribute("title",i.localize(`{{${e.toUpperCase()}}}`)),D(s,this.cn("button")+" "+this.cn(e===qt?"isNext":"isPrev"));const o=i.isRTL?e===qt?Zs:qt:e;var r;return s.innerHTML=i.localize(this.option(`${o}Tpl`)),s.dataset[`carousel${r=e,r?r.match("^[a-z]")?r.charAt(0).toUpperCase()+r.substring(1):r:""}`]="true",(n=this.container)===null||n===void 0||n.appendChild(s),s}build(){const e=this.instance.container,n=this.cn("container");let{container:i,prev:s,next:o}=this;i||(i=e.querySelector("."+n),this.isDom=!!i),i||(i=document.createElement("div"),D(i,n),e.appendChild(i)),this.container=i,o||(o=i.querySelector("[data-carousel-next]")),o||(o=this.addBtn(qt)),this.next=o,s||(s=i.querySelector("[data-carousel-prev]")),s||(s=this.addBtn(Zs)),this.prev=s}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(Cr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class Mr extends Oe{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){const{nav:e,target:n}=this;e&&n&&(e.options.initialSlide=n.options.initialPage,e.state===Q.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),n.state===Q.Ready?this.onTargetReady(n):n.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,n,i){this.onNavTouch(e,e.panzoom,i)}onNavTouch(e,n,i){var s,o;if(Math.abs(n.dragOffset.x)>3||Math.abs(n.dragOffset.y)>3)return;const r=i.target,{nav:a,target:l}=this;if(!a||!l||!r)return;const c=r.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!c)return;const d=parseInt(c.dataset.index||"",10)||0,u=l.getPageForSlide(d),p=a.getPageForSlide(d);a.slideTo(p),l.slideTo(u,{friction:((o=(s=this.nav)===null||s===void 0?void 0:s.plugins)===null||o===void 0?void 0:o.Sync.option("friction"))||0}),this.markSelectedSlide(d)}onNavCreateSlide(e,n){n.index===this.selectedIndex&&this.markSelectedSlide(n.index)}onTargetChange(){var e,n;const{target:i,nav:s}=this;if(!i||!s||s.state!==Q.Ready||i.state!==Q.Ready)return;const o=(n=(e=i.pages[i.page])===null||e===void 0?void 0:e.slides[0])===null||n===void 0?void 0:n.index,r=s.getPageForSlide(o);this.markSelectedSlide(o),s.slideTo(r,s.prevPage===null&&i.prevPage===null?{friction:0}:void 0)}markSelectedSlide(e){const n=this.nav;n&&n.state===Q.Ready&&(this.selectedIndex=e,[...n.slides].map(i=>{i.el&&i.el.classList[i.index===e?"add":"remove"]("is-nav-selected")}))}attach(){const e=this;let n=e.options.target,i=e.options.nav;n?e.addAsNavFor(n):i&&e.addAsTargetFor(i)}detach(){const e=this,n=e.nav,i=e.target;n&&(n.off("ready",e.onNavReady),n.off("createSlide",e.onNavCreateSlide),n.off("Panzoom.click",e.onNavClick),n.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,i&&(i.off("ready",e.onTargetReady),i.off("refresh",e.onTargetChange),i.off("change",e.onTargetChange)),e.target=null}}Object.defineProperty(Mr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const Dh={Navigation:Cr,Dots:Ar,Sync:Mr},Vt="animationend",Ks="isSelected",$t="slide";class nt extends Gi{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===Q.Ready}get isInfinite(){let e=!1;const{contentDim:n,viewportDim:i,pages:s,slides:o}=this,r=o[0];return s.length>=2&&r&&n+r.dim>=i&&(e=this.option("infinite")),e}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(e,n={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Q.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof e=="string"&&(e=document.querySelector(e)),!e||!he(e))throw new Error("No Element found");this.container=e,this.slideNext=Ys(this.slideNext.bind(this),150),this.slidePrev=Ys(this.slidePrev.bind(this),150),this.userOptions=n,this.userPlugins=i,queueMicrotask(()=>{this.processOptions()})}processOptions(){var e,n;const i=fe({},nt.defaults,this.userOptions);let s="";const o=i.breakpoints;if(o&&mi(o))for(const[r,a]of Object.entries(o))window.matchMedia(r).matches&&mi(a)&&(s+=r,fe(i,a));s===this.bp&&this.state!==Q.Init||(this.bp=s,this.state===Q.Ready&&(i.initialSlide=((n=(e=this.pages[this.page])===null||e===void 0?void 0:e.slides[0])===null||n===void 0?void 0:n.index)||0),this.state!==Q.Init&&this.destroy(),super.setOptions(i),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=Q.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},nt.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=Q.Ready,this.emit("ready")}initLayout(){const{container:e}=this,n=this.option("classes");D(e,this.cn("container")),Ae(e,n.isLTR,!this.isRTL),Ae(e,n.isRTL,this.isRTL),Ae(e,n.isVertical,!this.isHorizontal),Ae(e,n.isHorizontal,this.isHorizontal);let i=this.option("viewport")||e.querySelector(`.${n.viewport}`);i||(i=document.createElement("div"),D(i,n.viewport),i.append(...Xs(e,`.${n.slide}`)),e.prepend(i)),i.addEventListener("scroll",this.onScroll);let s=this.option("track")||e.querySelector(`.${n.track}`);s||(s=document.createElement("div"),D(s,n.track),s.append(...Array.from(i.childNodes))),s.setAttribute("aria-live","polite"),i.contains(s)||i.prepend(s),this.viewport=i,this.track=s,this.emit("initLayout")}initSlides(){const{track:e}=this;if(!e)return;const n=[...this.slides],i=[];[...Xs(e,`.${this.cn($t)}`)].forEach(s=>{if(he(s)){const o=kn({el:s,isDom:!0,index:this.slides.length});i.push(o)}});for(let s of[...this.option("slides",[])||[],...n])i.push(kn(s));this.slides=i;for(let s=0;s<this.slides.length;s++)this.slides[s].index=s;for(const s of i)this.emit("beforeInitSlide",s,s.index),this.emit("initSlide",s,s.index);this.emit("initSlides")}setInitialPage(){const e=this.option("initialSlide");this.page=typeof e=="number"?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:e,pages:n,isHorizontal:i}=this;if(!e||!n.length)return;let s=this.page;n[s]||(this.page=s=0);const o=(n[s].pos||0)*(this.isRTL&&i?1:-1),r=i?`${o}px`:"0",a=i?"0":`${o}px`;e.style.transform=`translate3d(${r}, ${a}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const e=this.option("Panzoom")||{};this.panzoom=new it(this.viewport,fe({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:n=>!(this.pages.length<2&&!n.options.infinite),bounds:()=>this.getBounds(),maxVelocity:n=>Math.abs(n.target[this.axis]-n.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(n,i,...s)=>{this.emit(`Panzoom.${i}`,n,...s)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[];const{contentDim:n,viewportDim:i}=this;let s=this.option("slidesPerPage");s=(s==="auto"||n<=i)&&this.option("fill")!==!1?1/0:parseFloat(s+"");let o=0,r=0,a=0;for(const l of this.slides)(!e.length||r+l.dim-i>.05||a>=s)&&(e.push(wh()),o=e.length-1,r=0,a=0),e[o].slides.push(l),r+=l.dim+l.gap,a++;return e}processPages(){const e=this.pages,{contentDim:n,viewportDim:i,isInfinite:s}=this,o=this.option("center"),r=this.option("fill"),a=r&&o&&n>i&&!s;if(e.forEach((d,u)=>{var p;d.index=u,d.pos=((p=d.slides[0])===null||p===void 0?void 0:p.pos)||0,d.dim=0;for(const[f,h]of d.slides.entries())d.dim+=h.dim,f<d.slides.length-1&&(d.dim+=h.gap);a&&d.pos+.5*d.dim<.5*i?d.pos=0:a&&d.pos+.5*d.dim>=n-.5*i?d.pos=n-i:o&&(d.pos+=-.5*(i-d.dim))}),e.forEach(d=>{r&&!s&&n>i&&(d.pos=Math.max(d.pos,0),d.pos=Math.min(d.pos,n-i)),d.pos=O(d.pos,1e3),d.dim=O(d.dim,1e3),Math.abs(d.pos)<=.1&&(d.pos=0)}),s)return e;const l=[];let c;return e.forEach(d=>{const u=Object.assign({},d);c&&u.pos===c.pos?(c.dim+=u.dim,c.slides=[...c.slides,...u.slides]):(u.index=l.length,c=u,l.push(u))}),l}getPageFromIndex(e=0){const n=this.pages.length;let i;return e=parseInt((e||0).toString())||0,i=this.isInfinite?(e%n+n)%n:Math.max(Math.min(e,n-1),0),i}getSlideMetrics(e){var n,i;const s=this.isHorizontal?"width":"height";let o=0,r=0,a=e.el;const l=!(!a||a.parentNode);if(a?o=parseFloat(a.dataset[s]||"")||0:(a=document.createElement("div"),a.style.visibility="hidden",(this.track||document.body).prepend(a)),D(a,this.cn($t)+" "+e.class+" "+e.customClass),o)a.style[s]=`${o}px`,a.style[s==="width"?"height":"width"]="";else{l&&(this.track||document.body).prepend(a),o=a.getBoundingClientRect()[s]*Math.max(1,((n=window.visualViewport)===null||n===void 0?void 0:n.scale)||1);let d=a[this.isHorizontal?"offsetWidth":"offsetHeight"];d-1>o&&(o=d)}const c=getComputedStyle(a);return c.boxSizing==="content-box"&&(this.isHorizontal?(o+=parseFloat(c.paddingLeft)||0,o+=parseFloat(c.paddingRight)||0):(o+=parseFloat(c.paddingTop)||0,o+=parseFloat(c.paddingBottom)||0)),r=parseFloat(c[this.isHorizontal?"marginRight":"marginBottom"])||0,l?(i=a.parentElement)===null||i===void 0||i.removeChild(a):e.el||a.remove(),{dim:O(o,1e3),gap:O(r,1e3)}}getBounds(){const{isInfinite:e,isRTL:n,isHorizontal:i,pages:s}=this;let o={min:0,max:0};if(e)o={min:-1/0,max:1/0};else if(s.length){const r=s[0].pos,a=s[s.length-1].pos;o=n&&i?{min:r,max:a}:{min:-1*a,max:-1*r}}return{x:i?o:{min:0,max:0},y:i?{min:0,max:0}:o}}repositionSlides(){let e,{isHorizontal:n,isRTL:i,isInfinite:s,viewport:o,viewportDim:r,contentDim:a,page:l,pages:c,slides:d,panzoom:u}=this,p=0,f=0,h=0,m=0;u?m=-1*u.current[this.axis]:c[l]&&(m=c[l].pos||0),e=n?i?"right":"left":"top",i&&n&&(m*=-1);for(const T of d){const R=T.el;R?(e==="top"?(R.style.right="",R.style.left=""):R.style.top="",T.index!==p?R.style[e]=f===0?"":`${O(f,1e3)}px`:R.style[e]="",h+=T.dim+T.gap,p++):f+=T.dim+T.gap}if(s&&h&&o){let T=getComputedStyle(o),R="padding",P=n?"Right":"Bottom",C=parseFloat(T[R+(n?"Left":"Top")]);m-=C,r+=C,r+=parseFloat(T[R+P]);for(const N of d)N.el&&(O(N.pos)<O(r)&&O(N.pos+N.dim+N.gap)<O(m)&&O(m)>O(a-r)&&(N.el.style[e]=`${O(f+h,1e3)}px`),O(N.pos+N.gap)>=O(a-r)&&O(N.pos)>O(m+r)&&O(m)<O(r)&&(N.el.style[e]=`-${O(h,1e3)}px`))}let E,g,b=[...this.inTransition];if(b.length>1&&(E=c[b[0]],g=c[b[1]]),E&&g){let T=0;for(const R of d)R.el?this.inTransition.has(R.index)&&E.slides.indexOf(R)<0&&(R.el.style[e]=`${O(T+(E.pos-g.pos),1e3)}px`):T+=R.dim+R.gap}}createSlideEl(e){const{track:n,slides:i}=this;if(!n||!e||e.el&&e.el.parentNode)return;const s=e.el||document.createElement("div");D(s,this.cn($t)),D(s,e.class),D(s,e.customClass);const o=e.html;o&&(o instanceof HTMLElement?s.appendChild(o):s.innerHTML=e.html+"");const r=[];i.forEach((d,u)=>{d.el&&r.push(u)});const a=e.index;let l=null;r.length&&(l=i[r.reduce((d,u)=>Math.abs(u-a)<Math.abs(d-a)?u:d)]);const c=l&&l.el&&l.el.parentNode?l.index<e.index?l.el.nextSibling:l.el:null;n.insertBefore(s,n.contains(c)?c:null),e.el=s,this.emit("createSlide",e)}removeSlideEl(e,n=!1){const i=e==null?void 0:e.el;if(!i||!i.parentNode)return;const s=this.cn(Ks);if(i.classList.contains(s)&&(q(i,s),this.emit("unselectSlide",e)),e.isDom&&!n)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",e);const o=new CustomEvent(Vt);i.dispatchEvent(o),e.el&&(e.el.remove(),e.el=null)}transitionTo(e=0,n=this.option("transition")){var i,s,o,r;if(!n)return!1;const a=this.page,{pages:l,panzoom:c}=this;e=parseInt((e||0).toString())||0;const d=this.getPageFromIndex(e);if(!c||!l[d]||l.length<2||Math.abs((((s=(i=l[a])===null||i===void 0?void 0:i.slides[0])===null||s===void 0?void 0:s.dim)||0)-this.viewportDim)>1)return!1;let u=e>a?1:-1;this.isInfinite&&(a===0&&e===l.length-1&&(u=-1),a===l.length-1&&e===0&&(u=1));const p=l[d].pos*(this.isRTL?1:-1);if(a===d&&Math.abs(p-c.target[this.axis])<1)return!1;this.clearTransitions();const f=c.isResting;D(this.container,this.cn("inTransition"));const h=((o=l[a])===null||o===void 0?void 0:o.slides[0])||null,m=((r=l[d])===null||r===void 0?void 0:r.slides[0])||null;this.inTransition.add(m.index),this.createSlideEl(m);let E=h.el,g=m.el;f||n===$t||(n="fadeFast",E=null);const b=this.isRTL?"next":"prev",T=this.isRTL?"prev":"next";return E&&(this.inTransition.add(h.index),h.transition=n,E.addEventListener(Vt,this.onAnimationEnd),E.classList.add(`f-${n}Out`,`to-${u>0?T:b}`)),g&&(m.transition=n,g.addEventListener(Vt,this.onAnimationEnd),g.classList.add(`f-${n}In`,`from-${u>0?b:T}`)),c.current[this.axis]=p,c.target[this.axis]=p,c.requestTick(),this.onChange(d),!0}manageSlideVisiblity(){const e=new Set,n=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const s of this.slides)i.has(s)?e.add(s):n.add(s);for(const s of this.inTransition)e.add(this.slides[s]);for(const s of e)this.createSlideEl(s),this.lazyLoadSlide(s);for(const s of n)e.has(s)||this.removeSlideEl(s);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const e="aria-hidden";let n=this.cn(Ks);if(n)for(const i of this.slides){const s=i.el;s&&(s.dataset.index=`${i.index}`,s.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?s.removeAttribute(e):s.setAttribute(e,"true"):this.pages[this.page].slides.includes(i)?(s.classList.contains(n)||(D(s,n),this.emit("selectSlide",i)),s.removeAttribute(e)):(s.classList.contains(n)&&(q(s,n),this.emit("unselectSlide",i)),s.setAttribute(e,"true")))}}flipInfiniteTrack(){const{axis:e,isHorizontal:n,isInfinite:i,isRTL:s,viewportDim:o,contentDim:r}=this,a=this.panzoom;if(!a||!i)return;let l=a.current[e],c=a.target[e]-l,d=0,u=.5*o;s&&n?(l<-u&&(d=-1,l+=r),l>r-u&&(d=1,l-=r)):(l>u&&(d=1,l-=r),l<-r+u&&(d=-1,l+=r)),d&&(a.current[e]=l,a.target[e]=l+c)}lazyLoadImg(e,n){const i=this,s="f-fadeIn",o="is-preloading";let r=!1,a=null;const l=()=>{r||(r=!0,a&&(a.remove(),a=null),q(n,o),n.complete&&(D(n,s),setTimeout(()=>{q(n,s)},350)),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",e))};D(n,o),n.src=n.dataset.lazySrcset||n.dataset.lazySrc||"",delete n.dataset.lazySrc,delete n.dataset.lazySrcset,n.addEventListener("error",()=>{l()}),n.addEventListener("load",()=>{l()}),setTimeout(()=>{const c=n.parentNode;c&&e.el&&(n.complete?l():r||(a=De(zi),c.insertBefore(a,n)))},300)}lazyLoadSlide(e){const n=e&&e.el;if(!n)return;const i=new Set;let s=Array.from(n.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));n.dataset.lazySrc&&s.push(n),s.map(o=>{o instanceof HTMLImageElement?i.add(o):o instanceof HTMLElement&&o.dataset.lazySrc&&(o.style.backgroundImage=`url('${o.dataset.lazySrc}')`,delete o.dataset.lazySrc)});for(const o of i)this.lazyLoadImg(e,o)}onAnimationEnd(e){var n;const i=e.target,s=i?parseInt(i.dataset.index||"",10)||0:-1,o=this.slides[s],r=e.animationName;if(!i||!o||!r)return;const a=!!this.inTransition.has(s)&&o.transition;a&&r.substring(0,a.length+2)===`f-${a}`&&this.inTransition.delete(s),this.inTransition.size||this.clearTransitions(),s===this.page&&(!((n=this.panzoom)===null||n===void 0)&&n.isResting)&&this.emit("settle")}onDecel(e,n=0,i=0,s=0,o=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:r,isHorizontal:a,axis:l,pages:c}=this,d=c.length,u=Math.abs(Math.atan2(i,n)/(Math.PI/180));let p=0;if(p=u>45&&u<135?a?0:i:a?n:0,!d)return;let f=this.page,h=r&&a?1:-1;const m=e.current[l]*h;let{pageIndex:E}=this.getPageFromPosition(m);Math.abs(p)>5?(c[f].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(f=E),f=r&&a?p<0?f-1:f+1:p<0?f+1:f-1):f=s===0&&o===0?f:E,this.slideTo(f,{transition:!1,friction:e.option("decelFriction")})}onClick(e){const n=e.target,i=n&&he(n)?n.dataset:null;let s,o;i&&(i.carouselPage!==void 0?(o="slideTo",s=i.carouselPage):i.carouselNext!==void 0?o="slideNext":i.carouselPrev!==void 0&&(o="slidePrev")),o?(e.preventDefault(),e.stopPropagation(),n&&!n.hasAttribute("disabled")&&this[o](s)):this.emit("click",e)}onSlideTo(e){const n=e.detail||0;this.slideTo(this.getPageForSlide(n),{friction:0})}onChange(e,n=0){const i=this.page;this.prevPage=i,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==i&&(this.markSelectedSlides(),this.emit("change",e,i,n))}onRefresh(){let e=this.contentDim,n=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===n||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;(e=this.viewport)===null||e===void 0||e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,n=null){this.destroy(),this.state=Q.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=n||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:n=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===Q.Destroy)return;e=parseInt((e||0).toString())||0;const s=this.getPageFromIndex(e),{axis:o,isHorizontal:r,isRTL:a,pages:l,panzoom:c}=this,d=l.length,u=a&&r?1:-1;if(!c||!d)return;if(this.page!==s){const f=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",f,e),f.defaultPrevented)return}if(this.transitionTo(e,i))return;let p=l[s].pos;if(this.isInfinite){const f=this.contentDim,h=c.target[o]*u;d===2?p+=f*Math.floor(parseFloat(e+"")/2):p=[p,p-f,p+f].reduce(function(m,E){return Math.abs(E-h)<Math.abs(m-h)?E:m})}p*=u,Math.abs(c.target[o]-p)<1||(c.panTo({x:r?p:0,y:r?0:p,friction:n}),this.onChange(s))}slideToClosest(e){if(this.panzoom){const{pageIndex:n}=this.getPageFromPosition();this.slideTo(n,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),q(this.container,this.cn("inTransition"));const e=["to-prev","to-next","from-prev","from-next"];for(const n of this.slides){const i=n.el;if(i){i.removeEventListener(Vt,this.onAnimationEnd),i.classList.remove(...e);const s=n.transition;s&&i.classList.remove(`f-${s}Out`,`f-${s}In`)}}this.manageSlideVisiblity()}addSlide(e,n){var i,s,o,r;const a=this.panzoom,l=((i=this.pages[this.page])===null||i===void 0?void 0:i.pos)||0,c=((s=this.pages[this.page])===null||s===void 0?void 0:s.dim)||0,d=this.contentDim<this.viewportDim;let u=Array.isArray(n)?n:[n];const p=[];for(const f of u)p.push(kn(f));this.slides.splice(e,0,...p);for(let f=0;f<this.slides.length;f++)this.slides[f].index=f;for(const f of p)this.emit("beforeInitSlide",f,f.index);if(this.page>=e&&(this.page+=p.length),this.updateMetrics(),a){const f=((o=this.pages[this.page])===null||o===void 0?void 0:o.pos)||0,h=((r=this.pages[this.page])===null||r===void 0?void 0:r.dim)||0,m=this.pages.length||1,E=this.isRTL?c-h:h-c,g=this.isRTL?l-f:f-l;d&&m===1?(e<=this.page&&(a.current[this.axis]-=E,a.target[this.axis]-=E),a.panTo({[this.isHorizontal?"x":"y"]:-1*f})):g&&e<=this.page&&(a.target[this.axis]-=g,a.current[this.axis]-=g,a.requestTick())}for(const f of p)this.emit("initSlide",f,f.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){const n=this.slides.length;e=(e%n+n)%n;const i=this.slides[e];if(i){this.removeSlideEl(i,!0),this.slides.splice(e,1);for(let s=0;s<this.slides.length;s++)this.slides[s].index=s;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){const{panzoom:e,viewport:n,track:i,slides:s,isHorizontal:o,isInfinite:r}=this;if(!i)return;const a=o?"width":"height",l=o?"offsetWidth":"offsetHeight";if(n){let u=Math.max(n[l],O(n.getBoundingClientRect()[a],1e3)),p=getComputedStyle(n),f="padding",h=o?"Right":"Bottom";u-=parseFloat(p[f+(o?"Left":"Top")])+parseFloat(p[f+h]),this.viewportDim=u}let c,d=0;for(const[u,p]of s.entries()){let f=0,h=0;!p.el&&c?(f=c.dim,h=c.gap):({dim:f,gap:h}=this.getSlideMetrics(p),c=p),f=O(f,1e3),h=O(h,1e3),p.dim=f,p.gap=h,p.pos=d,d+=f,(r||u<s.length-1)&&(d+=h)}d=O(d,1e3),this.contentDim=d,e&&(e.contentRect[a]=d,e.contentRect[o?"fullWidth":"fullHeight"]=d),this.pages=this.createPages(),this.pages=this.processPages(),this.state===Q.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,n=!1,i=!1){e===void 0&&(e=this.page);const s=this,o=s.panzoom,r=s.contentDim,a=s.pages[e]||0;if(!a||!o)return e>this.page?-1:1;let l=-1*o.current.e,c=O((l-a.pos)/(1*a.dim),1e3),d=c,u=c;this.isInfinite&&i!==!0&&(d=O((l-a.pos+r)/(1*a.dim),1e3),u=O((l-a.pos-r)/(1*a.dim),1e3));let p=[c,d,u].reduce(function(f,h){return Math.abs(h)<Math.abs(f)?h:f});return n?p:p>1?1:p<-1?-1:p}setViewportHeight(){const{page:e,pages:n,viewport:i,isHorizontal:s}=this;if(!i||!n[e])return;let o=0;s&&this.track&&(this.track.style.height="auto",n[e].slides.forEach(r=>{r.el&&(o=Math.max(o,r.el.offsetHeight))})),i.style.height=o?`${o}px`:""}getPageForSlide(e){for(const n of this.pages)for(const i of n.slides)if(i.index===e)return n.index;return-1}getVisibleSlides(e=0){var n;const i=new Set;let{panzoom:s,contentDim:o,viewportDim:r,pages:a,page:l}=this;if(r){o=o+((n=this.slides[this.slides.length-1])===null||n===void 0?void 0:n.gap)||0;let c=0;c=s&&s.state!==V.Init&&s.state!==V.Destroy?-1*s.current[this.axis]:a[l]&&a[l].pos||0,this.isInfinite&&(c-=Math.floor(c/o)*o),this.isRTL&&this.isHorizontal&&(c*=-1);const d=c-r*e,u=c+r*(e+1),p=this.isInfinite?[-1,0,1]:[0];for(const f of this.slides)for(const h of p){const m=f.pos+h*o,E=m+f.dim+f.gap;m<u&&E>d&&i.add(f)}}return i}getPageFromPosition(e){const{viewportDim:n,contentDim:i,slides:s,pages:o,panzoom:r}=this,a=o.length,l=s.length,c=s[0],d=s[l-1],u=this.option("center");let p=0,f=0,h=0,m=e===void 0?-1*((r==null?void 0:r.target[this.axis])||0):e;u&&(m+=.5*n),this.isInfinite?(m<c.pos-.5*d.gap&&(m-=i,h=-1),m>d.pos+d.dim+.5*d.gap&&(m-=i,h=1)):m=Math.max(c.pos||0,Math.min(m,d.pos));let E=d,g=s.find(b=>{const T=b.pos-.5*E.gap,R=b.pos+b.dim+.5*b.gap;return E=b,m>=T&&m<R});return g||(g=d),f=this.getPageForSlide(g.index),p=f+h*a,{page:p,pageIndex:f}}setPageFromPosition(){const{pageIndex:e}=this.getPageFromPosition();this.onChange(e)}destroy(){if([Q.Destroy].includes(this.state))return;this.state=Q.Destroy;const{container:e,viewport:n,track:i,slides:s,panzoom:o}=this,r=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),o&&(o.destroy(),this.panzoom=null),s&&s.forEach(l=>{this.removeSlideEl(l)}),this.detachPlugins(),n&&(n.removeEventListener("scroll",this.onScroll),n.offsetParent&&i&&i.offsetParent&&n.replaceWith(...i.childNodes));for(const[l,c]of Object.entries(r))l!=="container"&&c&&e.classList.remove(c);this.track=null,this.viewport=null,this.page=0,this.slides=[];const a=this.events.get("ready");this.events=new Map,a&&this.events.set("ready",a)}}Object.defineProperty(nt,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:it}),Object.defineProperty(nt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Oh}),Object.defineProperty(nt,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:Dh});const Lr=function(t){if(!he(t))return 0;const e=window.scrollY,n=window.innerHeight,i=e+n,s=t.getBoundingClientRect(),o=s.y+e,r=s.height,a=o+r;if(e>a||i<o)return 0;if(e<o&&i>a||o<e&&a>i)return 100;let l=r;o<e&&(l-=e-o),a>i&&(l-=a-i);const c=l/n*100;return Math.round(c)},Dt=!(typeof window>"u"||!window.document||!window.document.createElement);let Un;const Hn=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),Qs=t=>{if(t&&Dt){Un===void 0&&document.createElement("div").focus({get preventScroll(){return Un=!0,!1}});try{if(Un)t.focus({preventScroll:!0});else{const e=window.scrollY||document.body.scrollTop,n=window.scrollX||document.body.scrollLeft;t.focus(),document.body.scrollTo({top:e,left:n,behavior:"auto"})}}catch{}}},xr=()=>{const t=document;let e,n="",i="",s="";return t.fullscreenEnabled?(n="requestFullscreen",i="exitFullscreen",s="fullscreenElement"):t.webkitFullscreenEnabled&&(n="webkitRequestFullscreen",i="webkitExitFullscreen",s="webkitFullscreenElement"),n&&(e={request:function(o=t.documentElement){return n==="webkitRequestFullscreen"?o[n](Element.ALLOW_KEYBOARD_INPUT):o[n]()},exit:function(){return t[s]&&t[i]()},isFullscreen:function(){return t[s]}}),e},gi={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},Dr),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},trapFocus:!0,wheel:"zoom"};var ie,re;(function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Closing=2]="Closing",t[t.CustomClosing=3]="CustomClosing",t[t.Destroy=4]="Destroy"})(ie||(ie={})),function(t){t[t.Loading=0]="Loading",t[t.Opening=1]="Opening",t[t.Ready=2]="Ready",t[t.Closing=3]="Closing"}(re||(re={}));let Js="",wt=!1,Wt=!1,Ye=null;const Nr=()=>{let t="",e="";const n=j.getInstance();if(n){const i=n.carousel,s=n.getSlide();if(i&&s){let o=s.slug||void 0,r=s.triggerEl||void 0;e=o||n.option("slug")||"",!e&&r&&r.dataset&&(e=r.dataset.fancybox||""),e&&e!=="true"&&(t="#"+e+(!o&&i.slides.length>1?"-"+(s.index+1):""))}}return{hash:t,slug:e,index:1}},un=()=>{const t=new URL(document.URL).hash,e=t.slice(1).split("-"),n=e[e.length-1],i=n&&/^\+?\d+$/.test(n)&&parseInt(e.pop()||"1",10)||1;return{hash:t,slug:e.join("-"),index:i}},Fr=()=>{const{slug:t,index:e}=un();if(!t)return;let n=document.querySelector(`[data-slug="${t}"]`);if(n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),j.getInstance())return;const i=document.querySelectorAll(`[data-fancybox="${t}"]`);i.length&&(n=i[e-1],n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},Br=()=>{if(j.defaults.Hash===!1)return;const t=j.getInstance();if((t==null?void 0:t.options.Hash)===!1)return;const{slug:e,index:n}=un(),{slug:i}=Nr();t&&(e===i?t.jumpTo(n-1):(wt=!0,t.close())),Fr()},Gr=()=>{Ye&&clearTimeout(Ye),queueMicrotask(()=>{Br()})},eo=()=>{window.addEventListener("hashchange",Gr,!1),setTimeout(()=>{Br()},500)};Dt&&(/complete|interactive|loaded/.test(document.readyState)?eo():document.addEventListener("DOMContentLoaded",eo));const Yt="is-zooming-in";class zr extends Oe{onCreateSlide(e,n,i){const s=this.instance.optionFor(i,"src")||"";i.el&&i.type==="image"&&typeof s=="string"&&this.setImage(i,s)}onRemoveSlide(e,n,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(e,n,i,s){q(this.instance.container,Yt);for(const o of n.slides){const r=o.panzoom;r&&o.index!==i&&r.reset(.35)}}onClose(){var e;const n=this.instance,i=n.container,s=n.getSlide();if(!i||!i.parentElement||!s)return;const{el:o,contentEl:r,panzoom:a,thumbElSrc:l}=s;if(!o||!l||!r||!a||a.isContentLoading||a.state===V.Init||a.state===V.Destroy)return;a.updateMetrics();let c=this.getZoomInfo(s);if(!c)return;this.instance.state=ie.CustomClosing,i.classList.remove(Yt),i.classList.add("is-zooming-out"),r.style.backgroundImage=`url('${l}')`;const d=i.getBoundingClientRect();(((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1)===1&&Object.assign(i.style,{position:"absolute",top:`${i.offsetTop+window.scrollY}px`,left:`${i.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${d.width}px`,height:`${d.height}px`,overflow:"hidden"});const{x:u,y:p,scale:f,opacity:h}=c;if(h){const m=((E,g,b,T)=>{const R=g-E,P=T-b;return C=>b+((C-E)/R*P||0)})(a.scale,f,1,0);a.on("afterTransform",()=>{r.style.opacity=m(a.scale)+""})}a.on("endAnimation",()=>{n.destroy()}),a.target.a=f,a.target.b=0,a.target.c=0,a.target.d=f,a.panTo({x:u,y:p,scale:f,friction:h?.2:.33,ignoreBounds:!0}),a.isResting&&n.destroy()}setImage(e,n){const i=this.instance;e.src=n,this.process(e,n).then(s=>{const{contentEl:o,imageEl:r,thumbElSrc:a,el:l}=e;if(i.isClosing()||!o||!r)return;o.offsetHeight;const c=!!i.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")&&l){l.addEventListener("contextmenu",p=>{p.preventDefault()});const u=document.createElement("div");D(u,"fancybox-protected"),o.appendChild(u)}if(a&&c){const u=s.contentRect,p=Math.max(u.fullWidth,u.fullHeight);let f=null;!c.opacity&&p>1200&&(f=document.createElement("img"),D(f,"fancybox-ghost"),f.src=a,o.appendChild(f));const h=()=>{f&&(D(f,"f-fadeFastOut"),setTimeout(()=>{f&&(f.remove(),f=null)},200))};(d=a,new Promise((m,E)=>{const g=new Image;g.onload=m,g.onerror=E,g.src=d})).then(()=>{i.hideLoading(e),e.state=re.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then(()=>{h(),this.instance.done(e)},()=>{}),f&&setTimeout(()=>{h()},p>2500?800:200)},()=>{i.hideLoading(e),i.revealContent(e)})}else{const u=this.optionFor(e,"initialSize"),p=this.optionFor(e,"zoom"),f={event:i.prevMouseMoveEvent||i.options.event,friction:p?.12:0};let h=i.optionFor(e,"showClass")||void 0,m=!0;i.isOpeningSlide(e)&&(u==="full"?s.zoomToFull(f):u==="cover"?s.zoomToCover(f):u==="max"?s.zoomToMax(f):m=!1,s.stop("current")),m&&h&&(h=s.isDragging?"f-fadeIn":""),i.hideLoading(e),i.revealContent(e,h)}var d},()=>{i.setError(e,"{{IMAGE_ERROR}}")})}process(e,n){return new Promise((i,s)=>{var o;const r=this.instance,a=e.el;r.clearContent(e),r.showLoading(e);let l=this.optionFor(e,"content");if(typeof l=="string"&&(l=De(l)),!l||!he(l)){if(l=document.createElement("img"),l instanceof HTMLImageElement){let c="",d=e.caption;c=typeof d=="string"&&d?d.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${e.index+1} of ${((o=r.carousel)===null||o===void 0?void 0:o.pages.length)||1}`,l.src=n||"",l.alt=c,l.draggable=!1,e.srcset&&l.setAttribute("srcset",e.srcset),this.instance.isOpeningSlide(e)&&(l.fetchPriority="high")}e.sizes&&l.setAttribute("sizes",e.sizes)}D(l,"fancybox-image"),e.imageEl=l,r.setContent(e,l,!1),e.panzoom=new it(a,fe({transformParent:!0},this.option("Panzoom")||{},{content:l,width:(c,d)=>r.optionFor(e,"width","auto",d)||"auto",height:(c,d)=>r.optionFor(e,"height","auto",d)||"auto",wheel:()=>{const c=r.option("wheel");return(c==="zoom"||c=="pan")&&c},click:(c,d)=>{var u,p;if(r.isCompact||r.isClosing()||e.index!==((u=r.getSlide())===null||u===void 0?void 0:u.index))return!1;if(d){const h=d.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(h.nodeName))return!1}let f=!d||d.target&&((p=e.contentEl)===null||p===void 0?void 0:p.contains(d.target));return r.option(f?"contentClick":"backdropClick")||!1},dblClick:()=>r.isCompact?"toggleZoom":r.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:c=>{i(c)},error:()=>{s()},destroy:()=>{s()}}}))})}zoomIn(e){return new Promise((n,i)=>{const s=this.instance,o=s.container,{panzoom:r,contentEl:a,el:l}=e;r&&r.updateMetrics();const c=this.getZoomInfo(e);if(!(c&&l&&a&&r&&o))return void i();const{x:d,y:u,scale:p,opacity:f}=c,h=()=>{e.state!==re.Closing&&(f&&(a.style.opacity=Math.max(Math.min(1,1-(1-r.scale)/(1-p)),0)+""),r.scale>=1&&r.scale>r.targetScale-.1&&n(r))},m=b=>{(b.scale<.99||b.scale>1.01)&&!b.isDragging||(q(o,Yt),a.style.opacity="",b.off("endAnimation",m),b.off("touchStart",m),b.off("afterTransform",h),n(b))};r.on("endAnimation",m),r.on("touchStart",m),r.on("afterTransform",h),r.on(["error","destroy"],()=>{i()}),r.panTo({x:d,y:u,scale:p,friction:0,ignoreBounds:!0}),r.stop("current");const E={event:r.panMode==="mousemove"?s.prevMouseMoveEvent||s.options.event:void 0},g=this.optionFor(e,"initialSize");D(o,Yt),s.hideLoading(e),g==="full"?r.zoomToFull(E):g==="cover"?r.zoomToCover(E):g==="max"?r.zoomToMax(E):r.reset(.172)})}getZoomInfo(e){const{el:n,imageEl:i,thumbEl:s,panzoom:o}=e,r=this.instance,a=r.container;if(!n||!i||!s||!o||Lr(s)<3||!this.optionFor(e,"zoom")||!a||r.state===ie.Destroy||getComputedStyle(a).getPropertyValue("--f-images-zoom")==="0")return!1;const l=window.visualViewport||null;if((l?l.scale:1)!==1)return!1;let{top:c,left:d,width:u,height:p}=s.getBoundingClientRect(),{top:f,left:h,fitWidth:m,fitHeight:E}=o.contentRect;if(!(u&&p&&m&&E))return!1;const g=o.container.getBoundingClientRect();h+=g.left,f+=g.top;const b=-1*(h+.5*m-(d+.5*u)),T=-1*(f+.5*E-(c+.5*p)),R=u/m;let P=this.option("zoomOpacity")||!1;return P==="auto"&&(P=Math.abs(u/p-m/E)>.1),{x:b,y:T,scale:R,opacity:P}}attach(){const e=this,n=e.instance;n.on("Carousel.change",e.onChange),n.on("Carousel.createSlide",e.onCreateSlide),n.on("Carousel.removeSlide",e.onRemoveSlide),n.on("close",e.onClose)}detach(){const e=this,n=e.instance;n.off("Carousel.change",e.onChange),n.off("Carousel.createSlide",e.onCreateSlide),n.off("Carousel.removeSlide",e.onRemoveSlide),n.off("close",e.onClose)}}Object.defineProperty(zr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;const jn="html",to="image",qn="map",xe="youtube",Ve="vimeo",_t="html5video",no=(t,e={})=>{const n=new URL(t),i=new URLSearchParams(n.search),s=new URLSearchParams;for(const[a,l]of[...i,...Object.entries(e)]){let c=l+"";if(a==="t"){let d=c.match(/((\d*)m)?(\d*)s?/);d&&s.set("start",60*parseInt(d[2]||"0")+parseInt(d[3]||"0")+"")}else s.set(a,c)}let o=s+"",r=t.match(/#t=((.*)?\d+s)/);return r&&(o+=`#t=${r[1]}`),o},Ah={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},Ch=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class kr extends Oe{onBeforeInitSlide(e,n,i){this.processType(i)}onCreateSlide(e,n,i){this.setContent(i)}onClearContent(e,n){n.xhr&&(n.xhr.abort(),n.xhr=null);const i=n.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",n.iframeEl=null);const s=n.contentEl,o=n.placeholderEl;if(n.type==="inline"&&s&&o)s.classList.remove("fancybox__content"),getComputedStyle(s).getPropertyValue("display")!=="none"&&(s.style.display="none"),setTimeout(()=>{o&&(s&&o.parentNode&&o.parentNode.insertBefore(s,o),o.remove())},0),n.contentEl=void 0,n.placeholderEl=void 0;else for(;n.el&&n.el.firstChild;)n.el.removeChild(n.el.firstChild)}onSelectSlide(e,n,i){i.state===re.Ready&&this.playVideo()}onUnselectSlide(e,n,i){var s,o;if(i.type===_t){try{(o=(s=i.el)===null||s===void 0?void 0:s.querySelector("video"))===null||o===void 0||o.pause()}catch{}return}let r;i.type===Ve?r={method:"pause",value:"true"}:i.type===xe&&(r={event:"command",func:"pauseVideo"}),r&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(r),"*"),i.poller&&clearTimeout(i.poller)}onDone(e,n){e.isCurrentSlide(n)&&!e.isClosing()&&this.playVideo()}onRefresh(e,n){n.slides.forEach(i=>{i.el&&(this.resizeIframe(i),this.setAspectRatio(i))})}onMessage(e){try{let n=JSON.parse(e.data);if(e.origin==="https://player.vimeo.com"){if(n.event==="ready")for(let i of Array.from(document.getElementsByClassName("fancybox__iframe")))i instanceof HTMLIFrameElement&&i.contentWindow===e.source&&(i.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&n.event==="onReady"){const i=document.getElementById(n.id);i&&(i.dataset.ready="true")}}catch{}}loadAjaxContent(e){const n=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);const i=this.instance,s=new XMLHttpRequest;i.showLoading(e),s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&i.state===ie.Ready&&(i.hideLoading(e),s.status===200?i.setContent(e,s.responseText):i.setError(e,s.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const o=e.ajax||null;s.open(o?"POST":"GET",n+""),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(o),e.xhr=s}setInlineContent(e){let n=null;if(he(e.src))n=e.src;else if(typeof e.src=="string"){const i=e.src.split("#",2).pop();n=i?document.getElementById(i):null}if(n){if(e.type==="clone"||n.closest(".fancybox__slide")){n=n.cloneNode(!0);const i=n.dataset.animationName;i&&(n.classList.remove(i),delete n.dataset.animationName);let s=n.getAttribute("id");s=s?`${s}--clone`:`clone-${this.instance.id}-${e.index}`,n.setAttribute("id",s)}else if(n.parentNode){const i=document.createElement("div");i.classList.add("fancybox-placeholder"),n.parentNode.insertBefore(i,n),e.placeholderEl=i}this.instance.setContent(e,n)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){const{src:n,el:i}=e;if(!n||typeof n!="string"||!i)return;i.classList.add("is-loading");const s=this.instance,o=document.createElement("iframe");o.className="fancybox__iframe",o.setAttribute("id",`fancybox__iframe_${s.id}_${e.index}`);for(const[a,l]of Object.entries(this.optionFor(e,"iframeAttr")||{}))o.setAttribute(a,l);o.onerror=()=>{s.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=o;const r=this.optionFor(e,"preload");if(e.type!=="iframe"||r===!1)return o.setAttribute("src",e.src+""),s.setContent(e,o,!1),this.resizeIframe(e),void s.revealContent(e);s.showLoading(e),o.onload=()=>{if(!o.src.length)return;const a=o.dataset.ready!=="true";o.dataset.ready="true",this.resizeIframe(e),a?s.revealContent(e):s.hideLoading(e)},o.setAttribute("src",n),s.setContent(e,o,!1)}resizeIframe(e){const{type:n,iframeEl:i}=e;if(n===xe||n===Ve)return;const s=i==null?void 0:i.parentElement;if(!i||!s)return;let o=e.autoSize;o===void 0&&(o=this.optionFor(e,"autoSize"));let r=e.width||0,a=e.height||0;r&&a&&(o=!1);const l=s&&s.style;if(e.preload!==!1&&o!==!1&&l)try{const c=window.getComputedStyle(s),d=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),u=parseFloat(c.paddingTop)+parseFloat(c.paddingBottom),p=i.contentWindow;if(p){const f=p.document,h=f.getElementsByTagName(jn)[0],m=f.body;l.width="",m.style.overflow="hidden",r=r||h.scrollWidth+d,l.width=`${r}px`,m.style.overflow="",l.flex="0 0 auto",l.height=`${m.scrollHeight}px`,a=h.scrollHeight+u}}catch{}if(r||a){const c={flex:"0 1 auto",width:"",height:""};r&&r!=="auto"&&(c.width=`${r}px`),a&&a!=="auto"&&(c.height=`${a}px`),Object.assign(l,c)}}playVideo(){const e=this.instance.getSlide();if(!e)return;const{el:n}=e;if(!n||!n.offsetParent||!this.optionFor(e,"videoAutoplay"))return;if(e.type===_t)try{const s=n.querySelector("video");if(s){const o=s.play();o!==void 0&&o.then(()=>{}).catch(r=>{s.muted=!0,s.play()})}}catch{}if(e.type!==xe&&e.type!==Ve)return;const i=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let s;if(e.iframeEl.dataset.ready==="true")return s=e.type===xe?{event:"command",func:"playVideo"}:{method:"play",value:"true"},s&&e.iframeEl.contentWindow.postMessage(JSON.stringify(s),"*"),void(e.poller=void 0);e.type===xe&&(s={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(s),"*"))}e.poller=setTimeout(i,250)};i()}processType(e){if(e.html)return e.type=jn,e.src=e.html,void(e.html="");const n=this.instance.optionFor(e,"src","");if(!n||typeof n!="string")return;let i=e.type,s=null;if(s=n.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const o=this.optionFor(e,xe),{nocookie:r}=o,a=function(u,p){var f={};for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&p.indexOf(h)<0&&(f[h]=u[h]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var m=0;for(h=Object.getOwnPropertySymbols(u);m<h.length;m++)p.indexOf(h[m])<0&&Object.prototype.propertyIsEnumerable.call(u,h[m])&&(f[h[m]]=u[h[m]])}return f}(o,["nocookie"]),l=`www.youtube${r?"-nocookie":""}.com`,c=no(n,a),d=encodeURIComponent(s[2]);e.videoId=d,e.src=`https://${l}/embed/${d}?${c}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${d}/mqdefault.jpg`,i=xe}else if(s=n.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const o=no(n,this.optionFor(e,Ve)),r=encodeURIComponent(s[1]),a=s[4]||"";e.videoId=r,e.src=`https://player.vimeo.com/video/${r}?${a?`h=${a}${o?"&":""}`:""}${o}`,i=Ve}if(!i&&e.triggerEl){const o=e.triggerEl.dataset.type;Ch.includes(o)&&(i=o)}i||typeof n=="string"&&(n.charAt(0)==="#"?i="inline":(s=n.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i=_t,e.videoFormat=e.videoFormat||"video/"+(s[1]==="ogv"?"ogg":s[1])):n.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i=to:n.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),(s=n.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${s[1]}/?ll=${(s[2]?s[2]+"&z="+Math.floor(parseFloat(s[3]))+(s[4]?s[4].replace(/^\//,"&"):""):s[4]+"").replace(/\?/,"&")}&output=${s[4]&&s[4].indexOf("layer=c")>0?"svembed":"embed"}`,i=qn):(s=n.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${s[1]}/maps?q=${s[2].replace("query=","q=").replace("api=1","")}&output=embed`,i=qn),i=i||this.instance.option("defaultType"),e.type=i,i===to&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){const n=this.instance.optionFor(e,"src")||"";if(e&&e.type&&n){switch(e.type){case jn:this.instance.setContent(e,n);break;case _t:const i=this.option("videoTpl");i&&this.instance.setContent(e,i.replace(/\{\{src\}\}/gi,n+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case qn:case xe:case Ve:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){const n=e.contentEl;if(!(e.el&&n&&e.type&&[xe,Ve,_t].includes(e.type)))return;let i,s=e.width||"auto",o=e.height||"auto";if(s==="auto"||o==="auto"){i=this.optionFor(e,"videoRatio");const c=(i+"").match(/(\d+)\s*\/\s?(\d+)/);i=c&&c.length>2?parseFloat(c[1])/parseFloat(c[2]):parseFloat(i+"")}else s&&o&&(i=s/o);if(!i)return;n.style.aspectRatio="",n.style.width="",n.style.height="",n.offsetHeight;const r=n.getBoundingClientRect(),a=r.width||1,l=r.height||1;n.style.aspectRatio=i+"",i<a/l?(o=o==="auto"?l:Math.min(l,o),n.style.width="auto",n.style.height=`${o}px`):(s=s==="auto"?a:Math.min(a,s),n.style.width=`${s}px`,n.style.height="auto")}attach(){const e=this,n=e.instance;n.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),n.on("Carousel.createSlide",e.onCreateSlide),n.on("Carousel.selectSlide",e.onSelectSlide),n.on("Carousel.unselectSlide",e.onUnselectSlide),n.on("Carousel.Panzoom.refresh",e.onRefresh),n.on("done",e.onDone),n.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){const e=this,n=e.instance;n.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),n.off("Carousel.createSlide",e.onCreateSlide),n.off("Carousel.selectSlide",e.onSelectSlide),n.off("Carousel.unselectSlide",e.onUnselectSlide),n.off("Carousel.Panzoom.refresh",e.onRefresh),n.off("done",e.onDone),n.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}}Object.defineProperty(kr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ah});const Xt="play",Zt="pause",Ot="ready";class Ur extends Oe{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ot}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==Ot}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,!((e=this.instance.panzoom)===null||e===void 0)&&e.isResting&&this.resume()}onTimerEnd(){const e=this.instance;this.state==="play"&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();const n=this.instance,i=((e=n.pages[n.page])===null||e===void 0?void 0:e.slides)||[];let s=this.option("progressParentEl");if(s||(s=(i.length===1?i[0].el:null)||n.viewport),!s)return null;const o=document.createElement("div");return D(o,"f-progress"),s.prepend(o),this.progressBar=o,o.offsetHeight,o}set(){const e=this,n=e.instance;if(n.pages.length<2||e.timer)return;const i=e.option("timeout");e.state=Xt,D(n.container,"has-autoplay");let s=e.createProgressBar();s&&(s.style.transitionDuration=`${i}ms`,s.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},i),e.emit("set")}clear(){const e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){const e=this;if(e.set(),e.state!==Ot){if(e.option("pauseOnHover")){const n=e.instance.container;n.addEventListener("mouseenter",e.onMouseEnter,!1),n.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){const e=this,n=e.state,i=e.instance.container;e.clear(),e.state=Ot,i.removeEventListener("mouseenter",e.onMouseEnter,!1),i.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),q(i,"has-autoplay"),n!==Ot&&e.emit("stop")}pause(){const e=this;e.state===Xt&&(e.state=Zt,e.clear(),e.emit(Zt))}resume(){const e=this,n=e.instance;if(n.isInfinite||n.page!==n.pages.length-1)if(e.state!==Xt){if(e.state===Zt&&!e.inHover){const i=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",i),i.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===Xt||this.state===Zt?this.stop():this.start()}attach(){const e=this,n=e.instance;n.on("ready",e.onReady),n.on("Panzoom.startAnimation",e.onChange),n.on("Panzoom.endAnimation",e.onSettle),n.on("Panzoom.touchMove",e.onChange)}detach(){const e=this,n=e.instance;n.off("ready",e.onReady),n.off("Panzoom.startAnimation",e.onChange),n.off("Panzoom.endAnimation",e.onSettle),n.off("Panzoom.touchMove",e.onChange),e.stop()}}Object.defineProperty(Ur,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class Hr extends Oe{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){const n=e.carousel;if(!n)return;const i=e.container;i&&(n.options.Autoplay=fe({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:s=>{var o;i.classList.add("has-slideshow"),((o=e.getSlide())===null||o===void 0?void 0:o.state)!==re.Ready&&s.pause()},stop:()=>{i.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(s,o)=>{var r,a,l;!o||!o.cancelable||((r=e.getSlide())===null||r===void 0?void 0:r.state)===re.Ready&&(!((l=(a=e.carousel)===null||a===void 0?void 0:a.panzoom)===null||l===void 0)&&l.isResting)||o.preventDefault()}}}),n.attachPlugins({Autoplay:Ur}),this.ref=n.plugins.Autoplay)}onReady(e){const n=e.carousel,i=this.ref;i&&n&&this.option("playOnStart")&&(n.isInfinite||n.page<n.pages.length-1)&&i.start()}onDone(e,n){const i=this.ref,s=e.carousel;if(!i||!s)return;const o=n.panzoom;o&&o.on("startAnimation",()=>{e.isCurrentSlide(n)&&i.stop()}),e.isCurrentSlide(n)&&i.resume()}onKeydown(e,n){var i;const s=this.ref;s&&n===this.option("key")&&((i=document.activeElement)===null||i===void 0?void 0:i.nodeName)!=="BUTTON"&&s.toggle()}attach(){const e=this,n=e.instance;n.on("Carousel.init",e.onPrepare),n.on("Carousel.ready",e.onReady),n.on("done",e.onDone),n.on("keydown",e.onKeydown)}detach(){const e=this,n=e.instance;n.off("Carousel.init",e.onPrepare),n.off("Carousel.ready",e.onReady),n.off("done",e.onDone),n.off("keydown",e.onKeydown)}}Object.defineProperty(Hr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:t=>{var e;return((e=t.instance.container)===null||e===void 0?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||t.instance.container},timeout:3e3}});const jr={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var Ne;(function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Hidden=2]="Hidden"})(Ne||(Ne={}));const io="isResting",Kt="thumbWidth",ct="thumbHeight",we="thumbClipWidth";let qr=class extends Oe{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ne.Init})}get isModern(){return this.type==="modern"}onInitSlide(t,e){const n=e.el?e.el.dataset:void 0;n&&(e.thumbSrc=n.thumbSrc||e.thumbSrc||"",e[we]=parseFloat(n[we]||"")||e[we]||0,e[ct]=parseFloat(n.thumbHeight||"")||e[ct]||0),this.addSlide(e)}onInitSlides(){this.build()}onChange(){var t;if(!this.isModern)return;const e=this.container,n=this.instance,i=n.panzoom,s=this.carousel,o=s?s.panzoom:null,r=n.page;if(i&&s&&o){if(i.isDragging){q(e,this.cn(io));let a=((t=s.pages[r])===null||t===void 0?void 0:t.pos)||0;a+=n.getProgress(r)*(this[we]+this.thumbGap);let l=o.getBounds();-1*a>l.x.min&&-1*a<l.x.max&&o.panTo({x:-1*a,friction:.12})}else Ae(e,this.cn(io),i.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(const t of this.instance.slides||[])this.resizeModernSlide(t);this.shiftModern()}isDisabled(){const t=this.option("minCount")||0;if(t){const n=this.instance;let i=0;for(const s of n.slides||[])s.thumbSrc&&i++;if(i<t)return!0}const e=this.option("type");return["modern","classic"].indexOf(e)<0}getThumb(t){const e=this.option("thumbTpl")||"";return{html:this.instance.localize(e,[["%i",t.index],["%d",t.index+1],["%s",t.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(t){const e=this.carousel;e&&e.addSlide(t.index,this.getThumb(t))}getSlides(){const t=[];for(const e of this.instance.slides||[])t.push(this.getThumb(e));return t}resizeModernSlide(t){this.isModern&&(t[Kt]=t[we]&&t[ct]?Math.round(this[ct]*(t[we]/t[ct])):this[Kt])}updateProps(){const t=this.container;if(!t)return;const e=n=>parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-"+n))||0;this.thumbGap=e("gap"),this.thumbExtraGap=e("extra-gap"),this[Kt]=e("width")||40,this[we]=e("clip-width")||40,this[ct]=e("height")||40}build(){const t=this;if(t.state!==Ne.Init)return;if(t.isDisabled())return void t.emit("disabled");const e=t.instance,n=e.container,i=t.getSlides(),s=t.option("type");t.type=s;const o=t.option("parentEl"),r=t.cn("container"),a=t.cn("track");let l=o==null?void 0:o.querySelector("."+r);l||(l=document.createElement("div"),D(l,r),o?o.appendChild(l):n.after(l)),D(l,`is-${s}`),D(n,t.cn("hasThumbs")),t.container=l,t.updateProps();let c=l.querySelector("."+a);c||(c=document.createElement("div"),D(c,t.cn("track")),l.appendChild(c)),t.track=c;const d=fe({},{track:c,infinite:!1,center:!0,fill:s==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},t.option("Carousel")||{},{Sync:{target:e},slides:i}),u=new e.constructor(l,d);u.on("createSlide",(p,f)=>{t.setProps(f.index),t.emit("createSlide",f,f.el)}),u.on("ready",()=>{t.shiftModern(),t.emit("ready")}),u.on("refresh",()=>{t.shiftModern()}),u.on("Panzoom.click",(p,f,h)=>{t.onClick(h)}),t.carousel=u,t.state=Ne.Ready}onClick(t){t.preventDefault(),t.stopPropagation();const e=this.instance,{pages:n,page:i}=e,s=m=>{if(m){const E=m.closest("[data-carousel-index]");if(E)return[parseInt(E.dataset.carouselIndex||"",10)||0,E]}return[-1,void 0]},o=(m,E)=>{const g=document.elementFromPoint(m,E);return g?s(g):[-1,void 0]};let[r,a]=s(t.target);if(r>-1)return;const l=this[we],c=t.clientX,d=t.clientY;let[u,p]=o(c-l,d),[f,h]=o(c+l,d);p&&h?(r=Math.abs(c-p.getBoundingClientRect().right)<Math.abs(c-h.getBoundingClientRect().left)?u:f,r===i&&(r=r===u?f:u)):p?r=u:h&&(r=f),r>-1&&n[r]&&e.slideTo(r)}getShift(t){var e;const n=this,{instance:i}=n,s=n.carousel;if(!i||!s)return 0;const o=n[Kt],r=n[we],a=n.thumbGap,l=n.thumbExtraGap;if(!(!((e=s.slides[t])===null||e===void 0)&&e.el))return 0;const c=.5*(o-r),d=i.pages.length-1;let u=i.getProgress(0),p=i.getProgress(d),f=i.getProgress(t,!1,!0),h=0,m=c+l+a;const E=u<0&&u>-1,g=p>0&&p<1;return t===0?(h=m*Math.abs(u),g&&u===1&&(h-=m*Math.abs(p))):t===d?(h=m*Math.abs(p)*-1,E&&p===-1&&(h+=m*Math.abs(u))):E||g?(h=-1*m,h+=m*Math.abs(u),h+=m*(1-Math.abs(p))):h=m*f,h}setProps(t){var e;const n=this;if(!n.isModern)return;const{instance:i}=n,s=n.carousel;if(i&&s){const o=(e=s.slides[t])===null||e===void 0?void 0:e.el;if(o&&o.childNodes.length){let r=O(1-Math.abs(i.getProgress(t))),a=O(n.getShift(t));o.style.setProperty("--progress",r?r+"":""),o.style.setProperty("--shift",a+"")}}}shiftModern(){const t=this;if(!t.isModern)return;const{instance:e,track:n}=t,i=e.panzoom,s=t.carousel;if(!(e&&n&&i&&s)||i.state===V.Init||i.state===V.Destroy)return;for(const r of e.slides)t.setProps(r.index);let o=(t[we]+t.thumbGap)*(s.slides.length||0);n.style.setProperty("--width",o+"")}cleanup(){const t=this;t.carousel&&t.carousel.destroy(),t.carousel=null,t.container&&t.container.remove(),t.container=null,t.track&&t.track.remove(),t.track=null,t.state=Ne.Init,q(t.instance.container,t.cn("hasThumbs"))}attach(){const t=this,e=t.instance;e.on("initSlide",t.onInitSlide),e.state===Q.Init?e.on("initSlides",t.onInitSlides):t.onInitSlides(),e.on(["change","Panzoom.afterTransform"],t.onChange),e.on("Panzoom.refresh",t.onRefresh)}detach(){const t=this,e=t.instance;e.off("initSlide",t.onInitSlide),e.off("initSlides",t.onInitSlides),e.off(["change","Panzoom.afterTransform"],t.onChange),e.off("Panzoom.refresh",t.onRefresh),t.cleanup()}};Object.defineProperty(qr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:jr});const Mh=Object.assign(Object.assign({},jr),{key:"t",showOnStart:!0,parentEl:null}),so="is-masked",oo="aria-hidden";class Vr extends Oe{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,n){n.stopPropagation()}onCreateSlide(e,n){var i,s,o;const r=((o=(s=(i=this.instance)===null||i===void 0?void 0:i.carousel)===null||s===void 0?void 0:s.slides[n.index])===null||o===void 0?void 0:o.type)||"",a=n.el;if(a&&r){let l=`for-${r}`;["video","youtube","vimeo","html5video"].includes(r)&&(l+=" for-video"),D(a,l)}}onInit(){var e;const n=this,i=n.instance,s=i.carousel;if(n.ref||!s)return;const o=n.option("parentEl")||i.footer||i.container;if(!o)return;const r=fe({},n.options,{parentEl:o,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:a=>{const l=a.container;l&&this.hidden&&(n.refresh(),l.style.transition="none",n.hide(),l.offsetHeight,queueMicrotask(()=>{l.style.transition="",n.show()}))}}});r.Carousel=r.Carousel||{},r.Carousel.on=fe(((e=n.options.Carousel)===null||e===void 0?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),s.options.Thumbs=r,s.attachPlugins({Thumbs:qr}),n.ref=s.plugins.Thumbs,n.option("showOnStart")||(n.ref.state=Ne.Hidden,n.hidden=!0)}onResize(){var e;const n=(e=this.ref)===null||e===void 0?void 0:e.container;n&&(n.style.maxHeight="")}onKeydown(e,n){const i=this.option("key");i&&i===n&&this.toggle()}toggle(){const e=this.ref;if(e&&!e.isDisabled())return e.state===Ne.Hidden?(e.state=Ne.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){const e=this.ref;if(!e||e.isDisabled())return;const n=e.container;n&&(this.refresh(),n.offsetHeight,n.removeAttribute(oo),n.classList.remove(so),this.hidden=!1)}hide(){const e=this.ref,n=e&&e.container;n&&(this.refresh(),n.offsetHeight,n.classList.add(so),n.setAttribute(oo,"true")),this.hidden=!0}refresh(){const e=this.ref;if(!e||!e.state)return;const n=e.container,i=(n==null?void 0:n.firstChild)||null;n&&i&&i.childNodes.length&&(n.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){const e=this,n=e.instance;n.state===ie.Init?n.on("Carousel.init",e.onInit):e.onInit(),n.on("resize",e.onResize),n.on("keydown",e.onKeydown)}detach(){var e;const n=this,i=n.instance;i.off("Carousel.init",n.onInit),i.off("resize",n.onResize),i.off("keydown",n.onKeydown),(e=i.carousel)===null||e===void 0||e.detachPlugins(["Thumbs"]),n.ref=null}}Object.defineProperty(Vr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Mh});const Vn={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var Qe;(function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Disabled=2]="Disabled"})(Qe||(Qe={}));const Lh={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},xh={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ro="has-toolbar",$n="fancybox__toolbar";class $r extends Oe{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Qe.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var n;if(!e.carousel)return;let i=this.option("display"),s=this.option("absolute"),o=this.option("enabled");if(o==="auto"){const c=this.instance.carousel;let d=0;if(c)for(const u of c.slides)(u.panzoom||u.type==="image")&&d++;d||(o=!1)}o||(i=void 0);let r=0;const a={left:[],middle:[],right:[]};if(i)for(const c of["left","middle","right"])for(const d of i[c]){const u=this.createEl(d);u&&((n=a[c])===null||n===void 0||n.push(u),r++)}let l=null;if(r&&(l=this.createContainer()),l){for(const[c,d]of Object.entries(a)){const u=document.createElement("div");D(u,$n+"__column is-"+c);for(const p of d)u.appendChild(p);s!=="auto"||c!=="middle"||d.length||(s=!0),l.appendChild(u)}s===!0&&D(l,"is-absolute"),this.state=Qe.Ready,this.onRefresh()}else this.state=Qe.Disabled}onClick(e){var n,i;const s=this.instance,o=s.getSlide(),r=o==null?void 0:o.panzoom,a=e.target,l=a&&he(a)?a.dataset:null;if(!l)return;if(l.fancyboxToggleThumbs!==void 0)return e.preventDefault(),e.stopPropagation(),void((n=s.plugins.Thumbs)===null||n===void 0||n.toggle());if(l.fancyboxToggleFullscreen!==void 0)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(l.fancyboxToggleSlideshow!==void 0){e.preventDefault(),e.stopPropagation();const u=(i=s.carousel)===null||i===void 0?void 0:i.plugins.Autoplay;let p=u.isActive;return r&&r.panMode==="mousemove"&&!p&&r.reset(),void(p?u.stop():u.start())}const c=l.panzoomAction,d=l.panzoomChange;if((d||c)&&(e.preventDefault(),e.stopPropagation()),d){let u={};try{u=JSON.parse(d)}catch{}r&&r.applyChange(u)}else c&&r&&r[c]&&r[c]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const e=this.container;if(!e)return;const n=this.instance.getSlide();if(!n||n.state!==re.Ready)return;const i=n&&!n.error&&n.panzoom;for(const r of e.querySelectorAll("[data-panzoom-action]"))i?(r.removeAttribute("disabled"),r.removeAttribute("tabindex")):(r.setAttribute("disabled",""),r.setAttribute("tabindex","-1"));let s=i&&i.canZoomIn(),o=i&&i.canZoomOut();for(const r of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))s?(r.removeAttribute("disabled"),r.removeAttribute("tabindex")):(r.setAttribute("disabled",""),r.setAttribute("tabindex","-1"));for(const r of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))o?(r.removeAttribute("disabled"),r.removeAttribute("tabindex")):(r.setAttribute("disabled",""),r.setAttribute("tabindex","-1"));for(const r of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){o||s?(r.removeAttribute("disabled"),r.removeAttribute("tabindex")):(r.setAttribute("disabled",""),r.setAttribute("tabindex","-1"));const a=r.querySelector("g");a&&(a.style.display=s?"":"none")}}onDone(e,n){var i;(i=n.panzoom)===null||i===void 0||i.on("afterTransform",()=>{this.instance.isCurrentSlide(n)&&this.onRefresh()}),this.instance.isCurrentSlide(n)&&this.onRefresh()}createContainer(){const e=this.instance.container;if(!e)return null;const n=this.option("parentEl")||e;let i=n.querySelector("."+$n);return i||(i=document.createElement("div"),D(i,$n),n.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&D(e,ro),this.container=i,i}createEl(e){const n=this.instance,i=n.carousel;if(!i||e==="toggleFS"||e==="fullscreen"&&!xr())return null;let s=null;const o=i.slides.length||0;let r=0,a=0;for(const c of i.slides)(c.panzoom||c.type==="image")&&r++,(c.type==="image"||c.downloadSrc)&&a++;if(o<2&&["infobar","prev","next"].includes(e))return s;if(Vn[e]!==void 0&&!r||e==="download"&&!a)return null;if(e==="thumbs"){const c=n.plugins.Thumbs;if(!c||!c.isEnabled)return null}if(e==="slideshow"&&(!i.plugins.Autoplay||o<2))return null;if(Vn[e]!==void 0){const c=Vn[e];s=document.createElement("button"),s.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),D(s,"f-button"),c.action&&(s.dataset.panzoomAction=c.action),c.change&&(s.dataset.panzoomChange=JSON.stringify(c.change)),s.appendChild(De(this.instance.localize(c.icon)))}else{const c=(this.option("items")||[])[e];c&&(s=De(this.instance.localize(c.tpl)),typeof c.click=="function"&&s.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),typeof c.click=="function"&&c.click.call(this,this,d)}))}const l=s==null?void 0:s.querySelector("svg");if(l)for(const[c,d]of Object.entries(xh))l.getAttribute(c)||l.setAttribute(c,String(d));return s}removeContainer(){const e=this.container;e&&e.remove(),this.container=null,this.state=Qe.Disabled;const n=this.instance.container;n&&q(n,ro)}attach(){const e=this,n=e.instance;n.on("Carousel.initSlides",e.onReady),n.on("done",e.onDone),n.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){const e=this,n=e.instance;n.off("Carousel.initSlides",e.onReady),n.off("done",e.onDone),n.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}}Object.defineProperty($r,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Lh});const Nh={Hash:class extends Oe{onReady(){wt=!1}onChange(t){Ye&&clearTimeout(Ye);const{hash:e}=Nr(),{hash:n}=un(),i=t.isOpeningSlide(t.getSlide());i&&(Js=n===e?"":n),e&&e!==n&&(Ye=setTimeout(()=>{try{if(t.state===ie.Ready){let s="replaceState";i&&!Wt&&(s="pushState",Wt=!0),window.history[s]({},document.title,window.location.pathname+window.location.search+e)}}catch{}},300))}onClose(t){if(Ye&&clearTimeout(Ye),!wt&&Wt)return Wt=!1,wt=!1,void window.history.back();if(!wt)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(Js||""))}catch{}}attach(){const t=this.instance;t.on("ready",this.onReady),t.on(["Carousel.ready","Carousel.change"],this.onChange),t.on("close",this.onClose)}detach(){const t=this.instance;t.off("ready",this.onReady),t.off(["Carousel.ready","Carousel.change"],this.onChange),t.off("close",this.onClose)}static parseURL(){return un()}static startFromUrl(){Fr()}static destroy(){window.removeEventListener("hashchange",Gr,!1)}},Html:kr,Images:zr,Slideshow:Hr,Thumbs:Vr,Toolbar:$r},ao="with-fancybox",Wn="hide-scrollbar",lo="--fancybox-scrollbar-compensate",co="--fancybox-body-margin",Yn="aria-hidden",Xn="is-using-tab",Zn="is-animated",uo="is-compact",ho="is-loading",Kn="is-opening",Qt="has-caption",dt="disabled",$e="tabindex",fo="download",Qn="href",ut="src",He=t=>typeof t=="string",po=function(){var t=window.getSelection();return!!t&&t.type==="Range"};let ye,ve=null,We=null,mo=0,go=0,Eo=0,bo=0;const ht=new Map;let Fh=0;class j extends Gi{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],n={},i={}){super(n),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ie.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ye||(ye=xr()),this.id=n.id||++Fh,ht.set(this.id,this),this.userSlides=e,this.userPlugins=i,queueMicrotask(()=>{this.init()})}init(){if(this.state===ie.Destroy)return;this.state=ie.Init,this.attachPlugins(Object.assign(Object.assign({},j.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!Dt)return;const n=document,i=n.body,s=n.documentElement;if(i.classList.contains(Wn))return;let o=window.innerWidth-s.getBoundingClientRect().width;const r=parseFloat(window.getComputedStyle(i).marginRight);o<0&&(o=0),s.style.setProperty(lo,`${o}px`),r&&i.style.setProperty(co,`${r}px`),i.classList.add(Wn)})(),this.initLayout(),this.scale();const e=()=>{this.initCarousel(this.userSlides),this.state=ie.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(Yn,"false")},16)};this.option("Fullscreen.autoStart")&&ye&&!ye.isFullscreen()?ye.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}initLayout(){var e,n;const i=this.option("parentEl")||document.body,s=De(this.localize(this.option("tpl.main")||""));if(s){if(s.setAttribute("id",`fancybox-${this.id}`),s.setAttribute("aria-label",this.localize("{{MODAL}}")),s.classList.toggle(uo,this.isCompact),D(s,this.option("mainClass")||""),D(s,Kn),this.container=s,this.footer=s.querySelector(".fancybox__footer"),i.appendChild(s),D(document.documentElement,ao),ve&&We||(ve=document.createElement("span"),D(ve,"fancybox-focus-guard"),ve.setAttribute($e,"0"),ve.setAttribute(Yn,"true"),ve.setAttribute("aria-label","Focus guard"),We=ve.cloneNode(),(e=s.parentElement)===null||e===void 0||e.insertBefore(ve,s),(n=s.parentElement)===null||n===void 0||n.append(We)),s.addEventListener("mousedown",o=>{mo=o.pageX,go=o.pageY,q(s,Xn)}),this.option("closeExisting"))for(const o of ht.values())o.id!==this.id&&o.close();else this.option("animated")&&(D(s,Zn),setTimeout(()=>{this.isClosing()||q(s,Zn)},350));this.emit("initLayout")}}initCarousel(e){const n=this.container;if(!n)return;const i=n.querySelector(".fancybox__carousel");if(!i)return;const s=this.carousel=new nt(i,fe({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));s.on("*",(o,r,...a)=>{this.emit(`Carousel.${r}`,o,...a)}),s.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(o,r,a)=>{this.clearContent(a),a.state=void 0}),s.on("Panzoom.touchStart",()=>{var o,r;this.isCompact||this.endIdle(),!((o=document.activeElement)===null||o===void 0)&&o.closest(".f-thumbs")&&((r=this.container)===null||r===void 0||r.focus())}),s.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(s.on("Panzoom.afterTransform",(o,r)=>{const a=this.getSlide();if(a&&pi(a.el))return;const l=this.container;if(l){const c=Math.abs(r.current.f),d=c<1?"":Math.max(.5,Math.min(1,1-c/r.contentRect.fitHeight*1.5));l.style.setProperty("--fancybox-ts",d?"0s":""),l.style.setProperty("--fancybox-opacity",d+"")}}),s.on("Panzoom.touchEnd",(o,r,a)=>{var l;const c=this.getSlide();if(c&&pi(c.el)||r.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((l=document.activeElement)===null||l===void 0?void 0:l.nodeName)!==-1)return;const d=Math.abs(r.dragOffset.y);r.lockedAxis==="y"&&(d>=200||d>=50&&r.dragOffset.time<300)&&(a&&a.cancelable&&a.preventDefault(),this.close(a,"f-throwOut"+(r.current.f<0?"Up":"Down")))})),s.on("change",o=>{var r;let a=(r=this.getSlide())===null||r===void 0?void 0:r.triggerEl;if(a){const l=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:o.page});a.dispatchEvent(l)}}),s.on(["refresh","change"],o=>{const r=this.container;if(!r)return;for(const c of r.querySelectorAll("[data-fancybox-current-index]"))c.innerHTML=o.page+1;for(const c of r.querySelectorAll("[data-fancybox-count]"))c.innerHTML=o.pages.length;if(!o.isInfinite){for(const c of r.querySelectorAll("[data-fancybox-next]"))o.page<o.pages.length-1?(c.removeAttribute(dt),c.removeAttribute($e)):(c.setAttribute(dt,""),c.setAttribute($e,"-1"));for(const c of r.querySelectorAll("[data-fancybox-prev]"))o.page>0?(c.removeAttribute(dt),c.removeAttribute($e)):(c.setAttribute(dt,""),c.setAttribute($e,"-1"))}const a=this.getSlide();if(!a)return;let l=a.downloadSrc||"";l||a.type!=="image"||a.error||!He(a[ut])||(l=a[ut]);for(const c of r.querySelectorAll("[data-fancybox-download]")){const d=a.downloadFilename;l?(c.removeAttribute(dt),c.removeAttribute($e),c.setAttribute(Qn,l),c.setAttribute(fo,d||l),c.setAttribute("target","_blank")):(c.setAttribute(dt,""),c.setAttribute($e,"-1"),c.removeAttribute(Qn),c.removeAttribute(fo))}}),this.emit("initCarousel")}attachEvents(){const e=this,n=e.container;if(!n)return;n.addEventListener("click",e.onClick,{passive:!1,capture:!1}),n.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);const i=window.visualViewport;i&&(i.addEventListener("scroll",e.onResize),i.addEventListener("resize",e.onResize))}detachEvents(){const e=this,n=e.container;if(!n)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),n.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),n.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);const i=window.visualViewport;i&&(i.removeEventListener("resize",e.onResize),i.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){const e=this.container;if(!e)return;const n=window.visualViewport,i=Math.max(1,(n==null?void 0:n.scale)||1);let s="",o="",r="";if(n&&i>1){let a=`${n.offsetLeft}px`,l=`${n.offsetTop}px`;s=n.width*i+"px",o=n.height*i+"px",r=`translate3d(${a}, ${l}, 0) scale(${1/i})`}e.style.transform=r,e.style.width=s,e.style.height=o}onClick(e){var n;const{container:i,isCompact:s}=this;if(!i||this.isClosing())return;!s&&this.option("idle")&&this.resetIdle();const o=e.composedPath()[0];if(o.closest(".fancybox-spinner")||o.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(o.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(o.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(e.type==="click"&&e.detail===0||Math.abs(e.pageX-mo)>30||Math.abs(e.pageY-go)>30)return;const r=document.activeElement;if(po()&&r&&i.contains(r))return;if(s&&((n=this.getSlide())===null||n===void 0?void 0:n.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",e),e.defaultPrevented)return;let a=!1;if(o.closest(".fancybox__content")){if(r){if(r.closest("[contenteditable]"))return;o.matches(Hn)||r.blur()}if(po())return;a=this.option("contentClick")}else o.closest(".fancybox__carousel")&&!o.matches(Hn)&&(a=this.option("backdropClick"));a==="close"?(e.preventDefault(),this.close(e)):a==="next"?(e.preventDefault(),this.next()):a==="prev"&&(e.preventDefault(),this.prev())}onWheel(e){const n=e.target;let i=this.option("wheel",e);n.closest(".fancybox__thumbs")&&(i="slide");const s=i==="slide",o=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(l,c){return Math.abs(c)>Math.abs(l)?c:l}),r=Math.max(-1,Math.min(1,o)),a=Date.now();this.pwt&&a-this.pwt<300?s&&e.preventDefault():(this.pwt=a,this.emit("wheel",e,r),e.defaultPrevented||(i==="close"?(e.preventDefault(),this.close(e)):i==="slide"&&(cn(n)||(e.preventDefault(),this[r>0?"prev":"next"]()))))}onScroll(){window.scrollTo(Eo,bo)}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const n=e.key,i=this.option("keyboard");if(!i)return;const s=e.composedPath()[0],o=document.activeElement&&document.activeElement.classList,r=o&&o.contains("f-button")||s.dataset.carouselPage||s.dataset.carouselIndex;if(n!=="Escape"&&!r&&he(s)&&(s.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(s.nodeName)!==-1)||(e.key==="Tab"?D(this.container,Xn):q(this.container,Xn),e.ctrlKey||e.altKey||e.shiftKey))return;this.emit("keydown",n,e);const a=i[n];a&&typeof this[a]=="function"&&(e.preventDefault(),this[a]())}onResize(){const e=this.container;if(!e)return;const n=this.isCompact;e.classList.toggle(uo,n),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(e){const n=this.optionFor(e,"closeButton")||!1;if(n==="auto"){const s=this.plugins.Toolbar;if(s&&s.state===Qe.Ready)return}if(!n||!e.contentEl||e.closeBtnEl)return;const i=this.option("tpl.closeButton");if(i){const s=De(this.localize(i));e.closeBtnEl=e.contentEl.appendChild(s),e.el&&D(e.el,"has-close-btn")}}manageCaption(e=void 0){var n,i;const s="fancybox__caption",o=this.container;if(!o)return;q(o,Qt);const r=this.isCompact||this.option("commonCaption"),a=!r;if(this.caption&&this.stop(this.caption),a&&this.caption&&(this.caption.remove(),this.caption=null),r&&!this.caption)for(const u of((n=this.carousel)===null||n===void 0?void 0:n.slides)||[])u.captionEl&&(u.captionEl.remove(),u.captionEl=void 0,q(u.el,Qt),(i=u.el)===null||i===void 0||i.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||r&&!this.isCurrentSlide(e))return;const l=e.el;let c=this.optionFor(e,"caption","");if(!c)return void(r&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let d=null;if(a){if(d=e.captionEl||null,l&&!d){const u=s+`_${this.id}_${e.index}`;d=document.createElement("div"),D(d,s),d.setAttribute("id",u),e.captionEl=l.appendChild(d),D(l,Qt),l.setAttribute("aria-labelledby",u)}}else d=this.caption,d||(d=o.querySelector("."+s)),!d&&(d=document.createElement("div"),d.dataset.fancyboxCaption="",D(d,s),(this.footer||o).prepend(d)),D(o,Qt),this.caption=d;d&&(d.innerHTML="",He(c)||typeof c=="number"?d.innerHTML=c+"":c instanceof HTMLElement&&d.appendChild(c))}checkFocus(e){this.focus(e)}focus(e){var n;if(this.ignoreFocusChange)return;const i=document.activeElement||null,s=(e==null?void 0:e.target)||null,o=this.container,r=(n=this.carousel)===null||n===void 0?void 0:n.viewport;if(!o||!r||!e&&i&&o.contains(i))return;const a=this.getSlide(),l=a&&a.state===re.Ready?a.el:null;if(!l||l.contains(i)||o===i)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;const c=Array.from(o.querySelectorAll(Hn));let d=[],u=null;for(let f of c){const h=!f.offsetParent||!!f.closest('[aria-hidden="true"]'),m=l&&l.contains(f),E=!r.contains(f);if(f===o||(m||E)&&!h){d.push(f);const g=f.dataset.origTabindex;g!==void 0&&g&&(f.tabIndex=parseFloat(g)),f.removeAttribute("data-orig-tabindex"),!f.hasAttribute("autoFocus")&&u||(u=f)}else{const g=f.dataset.origTabindex===void 0?f.getAttribute("tabindex")||"":f.dataset.origTabindex;g&&(f.dataset.origTabindex=g),f.tabIndex=-1}}let p=null;e?(!s||d.indexOf(s)<0)&&(p=u||o,d.length&&(i===We?p=d[0]:this.lastFocus!==o&&i!==ve||(p=d[d.length-1]))):p=a&&a.type==="image"?o:u||o,p&&Qs(p),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){const e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return((e=j.getInstance())===null||e===void 0?void 0:e.id)==this.id}animate(e=null,n="",i){if(!e||!n)return void(i&&i());this.stop(e);const s=o=>{o.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",s),delete e.dataset.animationName,i&&i(),q(e,n))};e.dataset.animationName=n,e.addEventListener("animationend",s),D(e,n)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,n="",i=!0){if(this.isClosing())return;const s=e.el;if(!s)return;let o=null;if(he(n)?o=n:(o=De(n+""),he(o)||(o=document.createElement("div"),o.innerHTML=n+"")),["img","picture","iframe","video","audio"].includes(o.nodeName.toLowerCase())){const r=document.createElement("div");r.appendChild(o),o=r}he(o)&&e.filter&&!e.error&&(o=o.querySelector(e.filter)),o&&he(o)?(D(o,"fancybox__content"),e.id&&o.setAttribute("id",e.id),s.classList.add(`has-${e.error?"error":e.type||"unknown"}`),s.prepend(o),o.style.display==="none"&&(o.style.display=""),getComputedStyle(o).getPropertyValue("display")==="none"&&(o.style.display=e.display||this.option("defaultDisplay")||"flex"),e.contentEl=o,i&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,n){const i=e.el,s=e.contentEl;i&&s&&(this.emit("reveal",e),this.hideLoading(e),e.state=re.Opening,(n=this.isOpeningSlide(e)?n===void 0?this.optionFor(e,"showClass"):n:"f-fadeIn")?this.animate(s,n,()=>{this.done(e)}):this.done(e))}done(e){this.isClosing()||(e.state=re.Ready,this.emit("done",e),D(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(()=>{var n;(n=e.panzoom)===null||n===void 0||n.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(e)&&(q(this.container,Kn),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(e){const n=this.getSlide();return!(!e||!n)&&n.index===e.index}isOpeningSlide(e){var n,i;return((n=this.carousel)===null||n===void 0?void 0:n.prevPage)===null&&e&&e.index===((i=this.getSlide())===null||i===void 0?void 0:i.index)}showLoading(e){e.state=re.Loading;const n=e.el;n&&(D(n,ho),this.emit("loading",e),e.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===re.Loading){let i=De(zi);D(i,"fancybox-spinner"),e.spinnerEl=i,n.prepend(i),this.animate(i,"f-fadeIn")}},250))}hideLoading(e){const n=e.el;if(!n)return;const i=e.spinnerEl;this.isClosing()?i==null||i.remove():(q(n,ho),i&&this.animate(i,"f-fadeOut",()=>{i.remove()}),e.state===re.Loading&&(this.emit("loaded",e),e.state=re.Ready))}setError(e,n){if(this.isClosing())return;const i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,e),i.defaultPrevented)return;e.error=n,this.hideLoading(e),this.clearContent(e);const s=document.createElement("div");s.classList.add("fancybox-error"),s.innerHTML=this.localize(n||"<p>{{ERROR}}</p>"),this.setContent(e,s)}clearContent(e){if(e.state===void 0)return;this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0);const n=e.el;n&&(q(n,"has-error"),q(n,"has-unknown"),q(n,`has-${e.type||"unknown"}`)),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0}getSlide(){var e;const n=this.carousel;return((e=n==null?void 0:n.pages[n==null?void 0:n.page])===null||e===void 0?void 0:e.slides[0])||void 0}close(e,n){if(this.isClosing())return;const i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,e),i.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());const s=()=>{this.proceedClose(e,n)};this.startedFs&&ye&&ye.isFullscreen()?Promise.resolve(ye.exit()).then(()=>s()):s()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){const n=()=>{this.clearIdle(),this.idle=!0,D(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)n();else{const i=this.option("idle");i&&(this.idleTimer=setTimeout(n,i))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,q(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){ye&&(ye.isFullscreen()?ye.exit():ye.request().then(()=>{this.startedFs=!0}))}isClosing(){return[ie.Closing,ie.CustomClosing,ie.Destroy].includes(this.state)}proceedClose(e,n){var i,s;this.state=ie.Closing,this.clearIdle(),this.detachEvents();const o=this.container,r=this.carousel,a=this.getSlide(),l=a&&this.option("placeFocusBack")?a.triggerEl||this.option("triggerEl"):null;if(l&&(Lr(l)?Qs(l):l.focus()),o&&(q(o,Kn),D(o,"is-closing"),o.setAttribute(Yn,"true"),this.option("animated")&&D(o,Zn),o.style.pointerEvents="none"),r){r.clearTransitions(),(i=r.panzoom)===null||i===void 0||i.destroy(),(s=r.plugins.Navigation)===null||s===void 0||s.detach();for(const c of r.slides){c.state=re.Closing,this.hideLoading(c);const d=c.contentEl;d&&this.stop(d);const u=c==null?void 0:c.panzoom;u&&(u.stop(),u.detachEvents(),u.detachObserver()),this.isCurrentSlide(c)||r.emit("removeSlide",c)}}Eo=window.scrollX,bo=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",e),this.state!==ie.CustomClosing?(n===void 0&&a&&(n=this.optionFor(a,"hideClass")),n&&a?(this.animate(a.contentEl,n,()=>{r&&r.emit("removeSlide",a)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var e;if(this.state===ie.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=ie.Destroy,(e=this.carousel)===null||e===void 0||e.destroy();const n=this.container;n&&n.remove(),ht.delete(this.id);const i=j.getInstance();i?i.focus():(ve&&(ve.remove(),ve=null),We&&(We.remove(),We=null),q(document.documentElement,ao),(()=>{if(!Dt)return;const s=document,o=s.body;o.classList.remove(Wn),o.style.setProperty(co,""),s.documentElement.style.setProperty(lo,"")})(),this.emit("destroy"))}static bind(e,n,i){if(!Dt)return;let s,o="",r={};if(e===void 0?s=document.body:He(e)?(s=document.body,o=e,typeof n=="object"&&(r=n||{})):(s=e,He(n)&&(o=n),typeof i=="object"&&(r=i||{})),!s||!he(s))return;o=o||"[data-fancybox]";const a=j.openers.get(s)||new Map;a.set(o,r),j.openers.set(s,a),a.size===1&&s.addEventListener("click",j.fromEvent)}static unbind(e,n){let i,s="";if(He(e)?(i=document.body,s=e):(i=e,He(n)&&(s=n)),!i)return;const o=j.openers.get(i);o&&s&&o.delete(s),s&&o||(j.openers.delete(i),i.removeEventListener("click",j.fromEvent))}static destroy(){let e;for(;e=j.getInstance();)e.destroy();for(const n of j.openers.keys())n.removeEventListener("click",j.fromEvent);j.openers=new Map}static fromEvent(e){if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let n=e.composedPath()[0];const i=n.closest("[data-fancybox-trigger]");if(i){const h=i.dataset.fancyboxTrigger||"",m=document.querySelectorAll(`[data-fancybox="${h}"]`),E=parseInt(i.dataset.fancyboxIndex||"",10)||0;n=m[E]||n}if(!(n&&n instanceof Element))return;let s,o,r,a;if([...j.openers].reverse().find(([h,m])=>!(!h.contains(n)||![...m].reverse().find(([E,g])=>{let b=n.closest(E);return!!b&&(s=h,o=E,r=b,a=g,!0)}))),!s||!o||!r)return;a=a||{},e.preventDefault(),n=r;let l=[],c=fe({},gi,a);c.event=e,c.triggerEl=n,c.delegate=i;const d=c.groupAll,u=c.groupAttr,p=u&&n?n.getAttribute(`${u}`):"";if((!n||p||d)&&(l=[].slice.call(s.querySelectorAll(o))),n&&!d&&(l=p?l.filter(h=>h.getAttribute(`${u}`)===p):[n]),!l.length)return;const f=j.getInstance();return f&&f.options.triggerEl&&l.indexOf(f.options.triggerEl)>-1?void 0:(n&&(c.startIndex=l.indexOf(n)),j.fromNodes(l,c))}static fromSelector(e,n,i){let s=null,o="",r={};if(He(e)?(s=document.body,o=e,typeof n=="object"&&(r=n||{})):e instanceof HTMLElement&&He(n)&&(s=e,o=n,typeof i=="object"&&(r=i||{})),!s||!o)return!1;const a=j.openers.get(s);return!!a&&(r=fe({},a.get(o)||{},r),!!r&&j.fromNodes(Array.from(s.querySelectorAll(o)),r))}static fromNodes(e,n){n=fe({},gi,n||{});const i=[];for(const s of e){const o=s.dataset||{},r=o[ut]||s.getAttribute(Qn)||s.getAttribute("currentSrc")||s.getAttribute(ut)||void 0;let a;const l=n.delegate;let c;l&&i.length===n.startIndex&&(a=l instanceof HTMLImageElement?l:l.querySelector("img:not([aria-hidden])")),a||(a=s instanceof HTMLImageElement?s:s.querySelector("img:not([aria-hidden])")),a&&(c=a.currentSrc||a[ut]||void 0,!c&&a.dataset&&(c=a.dataset.lazySrc||a.dataset[ut]||void 0));const d={src:r,triggerEl:s,thumbEl:a,thumbElSrc:c,thumbSrc:c};for(const u in o){let p=o[u]+"";p=p!=="false"&&(p==="true"||p),d[u]=p}i.push(d)}return new j(i,n)}static getInstance(e){return e?ht.get(e):Array.from(ht.values()).reverse().find(n=>!n.isClosing()&&n)||null}static getSlide(){var e;return((e=j.getInstance())===null||e===void 0?void 0:e.getSlide())||null}static show(e=[],n={}){return new j(e,n)}static next(){const e=j.getInstance();e&&e.next()}static prev(){const e=j.getInstance();e&&e.prev()}static close(e=!0,...n){if(e)for(const i of ht.values())i.close(...n);else{const i=j.getInstance();i&&i.close(...n)}}}Object.defineProperty(j,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(j,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:gi}),Object.defineProperty(j,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:Nh}),Object.defineProperty(j,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});
