import"./addLines-CFHC9e3H.js";import"./listagens-Cf_HiCAz.js";function Ro(t,e){return function(){return t.apply(e,arguments)}}const{toString:ta}=Object.prototype,{getPrototypeOf:Ti}=Object,pn=(t=>e=>{const n=ta.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Pe=t=>(t=t.toLowerCase(),e=>pn(e)===t),mn=t=>e=>typeof e===t,{isArray:vt}=Array,Lt=mn("undefined");function na(t){return t!==null&&!Lt(t)&&t.constructor!==null&&!Lt(t.constructor)&&Re(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const So=Pe("ArrayBuffer");function ia(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&So(t.buffer),e}const sa=mn("string"),Re=mn("function"),_o=mn("number"),gn=t=>t!==null&&typeof t=="object",oa=t=>t===!0||t===!1,tn=t=>{if(pn(t)!=="object")return!1;const e=Ti(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ra=Pe("Date"),aa=Pe("File"),la=Pe("Blob"),ca=Pe("FileList"),da=t=>gn(t)&&Re(t.pipe),ua=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Re(t.append)&&((e=pn(t))==="formdata"||e==="object"&&Re(t.toString)&&t.toString()==="[object FormData]"))},ha=Pe("URLSearchParams"),[fa,pa,ma,ga]=["ReadableStream","Request","Response","Headers"].map(Pe),Ea=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Mt(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,s;if(typeof t!="object"&&(t=[t]),vt(t))for(i=0,s=t.length;i<s;i++)e.call(null,t[i],i,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),r=o.length;let a;for(i=0;i<r;i++)a=o[i],e.call(null,t[a],a,t)}}function Oo(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,s;for(;i-- >0;)if(s=n[i],e===s.toLowerCase())return s;return null}const wo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Po=t=>!Lt(t)&&t!==wo;function ti(){const{caseless:t}=Po(this)&&this||{},e={},n=(i,s)=>{const o=t&&Oo(e,s)||s;tn(e[o])&&tn(i)?e[o]=ti(e[o],i):tn(i)?e[o]=ti({},i):vt(i)?e[o]=i.slice():e[o]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Mt(arguments[i],n);return e}const ba=(t,e,n,{allOwnKeys:i}={})=>(Mt(e,(s,o)=>{n&&Re(s)?t[o]=Ro(s,n):t[o]=s},{allOwnKeys:i}),t),ya=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),va=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Ta=(t,e,n,i)=>{let s,o,r;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)r=s[o],(!i||i(r,t,e))&&!a[r]&&(e[r]=t[r],a[r]=!0);t=n!==!1&&Ti(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Ia=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},Ra=t=>{if(!t)return null;if(vt(t))return t;let e=t.length;if(!_o(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Sa=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ti(Uint8Array)),_a=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=i.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},Oa=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},wa=Pe("HTMLFormElement"),Pa=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),Hi=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Da=Pe("RegExp"),Do=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Mt(n,(s,o)=>{let r;(r=e(s,o,t))!==!1&&(i[o]=r||s)}),Object.defineProperties(t,i)},Aa=t=>{Do(t,(e,n)=>{if(Re(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Re(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Ca=(t,e)=>{const n={},i=s=>{s.forEach(o=>{n[o]=!0})};return vt(t)?i(t):i(String(t).split(e)),n},La=()=>{},Ma=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,wn="abcdefghijklmnopqrstuvwxyz",qi="0123456789",Ao={DIGIT:qi,ALPHA:wn,ALPHA_DIGIT:wn+wn.toUpperCase()+qi},xa=(t=16,e=Ao.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function Na(t){return!!(t&&Re(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Fa=t=>{const e=new Array(10),n=(i,s)=>{if(gn(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const o=vt(i)?[]:{};return Mt(i,(r,a)=>{const l=n(r,s+1);!Lt(l)&&(o[a]=l)}),e[s]=void 0,o}}return i};return n(t,0)},Ba=Pe("AsyncFunction"),Ga=t=>t&&(gn(t)||Re(t))&&Re(t.then)&&Re(t.catch),y={isArray:vt,isArrayBuffer:So,isBuffer:na,isFormData:ua,isArrayBufferView:ia,isString:sa,isNumber:_o,isBoolean:oa,isObject:gn,isPlainObject:tn,isReadableStream:fa,isRequest:pa,isResponse:ma,isHeaders:ga,isUndefined:Lt,isDate:ra,isFile:aa,isBlob:la,isRegExp:Da,isFunction:Re,isStream:da,isURLSearchParams:ha,isTypedArray:Sa,isFileList:ca,forEach:Mt,merge:ti,extend:ba,trim:Ea,stripBOM:ya,inherits:va,toFlatObject:Ta,kindOf:pn,kindOfTest:Pe,endsWith:Ia,toArray:Ra,forEachEntry:_a,matchAll:Oa,isHTMLForm:wa,hasOwnProperty:Hi,hasOwnProp:Hi,reduceDescriptors:Do,freezeMethods:Aa,toObjectSet:Ca,toCamelCase:Pa,noop:La,toFiniteNumber:Ma,findKey:Oo,global:wo,isContextDefined:Po,ALPHABET:Ao,generateString:xa,isSpecCompliantForm:Na,toJSONObject:Fa,isAsyncFn:Ba,isThenable:Ga};function G(t,e,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s)}y.inherits(G,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:y.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Co=G.prototype,Lo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Lo[t]={value:t}});Object.defineProperties(G,Lo);Object.defineProperty(Co,"isAxiosError",{value:!0});G.from=(t,e,n,i,s,o)=>{const r=Object.create(Co);return y.toFlatObject(t,r,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),G.call(r,t.message,e,n,i,s),r.cause=t,r.name=t.name,o&&Object.assign(r,o),r};const za=null;function ni(t){return y.isPlainObject(t)||y.isArray(t)}function Mo(t){return y.endsWith(t,"[]")?t.slice(0,-2):t}function ji(t,e,n){return t?t.concat(e).map(function(s,o){return s=Mo(s),!n&&o?"["+s+"]":s}).join(n?".":""):e}function ka(t){return y.isArray(t)&&!t.some(ni)}const Ua=y.toFlatObject(y,{},null,function(e){return/^is[A-Z]/.test(e)});function En(t,e,n){if(!y.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=y.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,E){return!y.isUndefined(E[m])});const i=n.metaTokens,s=n.visitor||c,o=n.dots,r=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&y.isSpecCompliantForm(e);if(!y.isFunction(s))throw new TypeError("visitor must be a function");function d(f){if(f===null)return"";if(y.isDate(f))return f.toISOString();if(!l&&y.isBlob(f))throw new G("Blob is not supported. Use a Buffer instead.");return y.isArrayBuffer(f)||y.isTypedArray(f)?l&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function c(f,m,E){let g=f;if(f&&!E&&typeof f=="object"){if(y.endsWith(m,"{}"))m=i?m:m.slice(0,-2),f=JSON.stringify(f);else if(y.isArray(f)&&ka(f)||(y.isFileList(f)||y.endsWith(m,"[]"))&&(g=y.toArray(f)))return m=Mo(m),g.forEach(function(v,R){!(y.isUndefined(v)||v===null)&&e.append(r===!0?ji([m],R,o):r===null?m:m+"[]",d(v))}),!1}return ni(f)?!0:(e.append(ji(E,m,o),d(f)),!1)}const u=[],p=Object.assign(Ua,{defaultVisitor:c,convertValue:d,isVisitable:ni});function h(f,m){if(!y.isUndefined(f)){if(u.indexOf(f)!==-1)throw Error("Circular reference detected in "+m.join("."));u.push(f),y.forEach(f,function(g,b){(!(y.isUndefined(g)||g===null)&&s.call(e,g,y.isString(b)?b.trim():b,m,p))===!0&&h(g,m?m.concat(b):[b])}),u.pop()}}if(!y.isObject(t))throw new TypeError("data must be an object");return h(t),e}function Vi(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Ii(t,e){this._pairs=[],t&&En(t,this,e)}const xo=Ii.prototype;xo.append=function(e,n){this._pairs.push([e,n])};xo.toString=function(e){const n=e?function(i){return e.call(this,i,Vi)}:Vi;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Ha(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function No(t,e,n){if(!e)return t;const i=n&&n.encode||Ha,s=n&&n.serialize;let o;if(s?o=s(e,n):o=y.isURLSearchParams(e)?e.toString():new Ii(e,n).toString(i),o){const r=t.indexOf("#");r!==-1&&(t=t.slice(0,r)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class $i{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){y.forEach(this.handlers,function(i){i!==null&&e(i)})}}const Fo={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qa=typeof URLSearchParams<"u"?URLSearchParams:Ii,ja=typeof FormData<"u"?FormData:null,Va=typeof Blob<"u"?Blob:null,$a={isBrowser:!0,classes:{URLSearchParams:qa,FormData:ja,Blob:Va},protocols:["http","https","file","blob","url","data"]},Ri=typeof window<"u"&&typeof document<"u",Wa=(t=>Ri&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Ya=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Xa=Ri&&window.location.href||"http://localhost",Za=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ri,hasStandardBrowserEnv:Wa,hasStandardBrowserWebWorkerEnv:Ya,origin:Xa},Symbol.toStringTag,{value:"Module"})),we={...Za,...$a};function Ka(t,e){return En(t,new we.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,o){return we.isNode&&y.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function Qa(t){return y.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Ja(t){const e={},n=Object.keys(t);let i;const s=n.length;let o;for(i=0;i<s;i++)o=n[i],e[o]=t[o];return e}function Bo(t){function e(n,i,s,o){let r=n[o++];if(r==="__proto__")return!0;const a=Number.isFinite(+r),l=o>=n.length;return r=!r&&y.isArray(s)?s.length:r,l?(y.hasOwnProp(s,r)?s[r]=[s[r],i]:s[r]=i,!a):((!s[r]||!y.isObject(s[r]))&&(s[r]=[]),e(n,i,s[r],o)&&y.isArray(s[r])&&(s[r]=Ja(s[r])),!a)}if(y.isFormData(t)&&y.isFunction(t.entries)){const n={};return y.forEachEntry(t,(i,s)=>{e(Qa(i),s,n,0)}),n}return null}function el(t,e,n){if(y.isString(t))try{return(e||JSON.parse)(t),y.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const xt={transitional:Fo,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,o=y.isObject(e);if(o&&y.isHTMLForm(e)&&(e=new FormData(e)),y.isFormData(e))return s?JSON.stringify(Bo(e)):e;if(y.isArrayBuffer(e)||y.isBuffer(e)||y.isStream(e)||y.isFile(e)||y.isBlob(e)||y.isReadableStream(e))return e;if(y.isArrayBufferView(e))return e.buffer;if(y.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Ka(e,this.formSerializer).toString();if((a=y.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return En(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),el(e)):e}],transformResponse:[function(e){const n=this.transitional||xt.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(y.isResponse(e)||y.isReadableStream(e))return e;if(e&&y.isString(e)&&(i&&!this.responseType||s)){const r=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(r)throw a.name==="SyntaxError"?G.from(a,G.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:we.classes.FormData,Blob:we.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};y.forEach(["delete","get","head","post","put","patch"],t=>{xt.headers[t]={}});const tl=y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nl=t=>{const e={};let n,i,s;return t&&t.split(`
`).forEach(function(r){s=r.indexOf(":"),n=r.substring(0,s).trim().toLowerCase(),i=r.substring(s+1).trim(),!(!n||e[n]&&tl[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},Wi=Symbol("internals");function Rt(t){return t&&String(t).trim().toLowerCase()}function nn(t){return t===!1||t==null?t:y.isArray(t)?t.map(nn):String(t)}function il(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const sl=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Pn(t,e,n,i,s){if(y.isFunction(i))return i.call(this,e,n);if(s&&(e=n),!!y.isString(e)){if(y.isString(i))return e.indexOf(i)!==-1;if(y.isRegExp(i))return i.test(e)}}function ol(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function rl(t,e){const n=y.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(s,o,r){return this[i].call(this,e,s,o,r)},configurable:!0})})}class pe{constructor(e){e&&this.set(e)}set(e,n,i){const s=this;function o(a,l,d){const c=Rt(l);if(!c)throw new Error("header name must be a non-empty string");const u=y.findKey(s,c);(!u||s[u]===void 0||d===!0||d===void 0&&s[u]!==!1)&&(s[u||l]=nn(a))}const r=(a,l)=>y.forEach(a,(d,c)=>o(d,c,l));if(y.isPlainObject(e)||e instanceof this.constructor)r(e,n);else if(y.isString(e)&&(e=e.trim())&&!sl(e))r(nl(e),n);else if(y.isHeaders(e))for(const[a,l]of e.entries())o(l,a,i);else e!=null&&o(n,e,i);return this}get(e,n){if(e=Rt(e),e){const i=y.findKey(this,e);if(i){const s=this[i];if(!n)return s;if(n===!0)return il(s);if(y.isFunction(n))return n.call(this,s,i);if(y.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Rt(e),e){const i=y.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Pn(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let s=!1;function o(r){if(r=Rt(r),r){const a=y.findKey(i,r);a&&(!n||Pn(i,i[a],a,n))&&(delete i[a],s=!0)}}return y.isArray(e)?e.forEach(o):o(e),s}clear(e){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const o=n[i];(!e||Pn(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const n=this,i={};return y.forEach(this,(s,o)=>{const r=y.findKey(i,o);if(r){n[r]=nn(s),delete n[o];return}const a=e?ol(o):String(o).trim();a!==o&&delete n[o],n[a]=nn(s),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return y.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=e&&y.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[Wi]=this[Wi]={accessors:{}}).accessors,s=this.prototype;function o(r){const a=Rt(r);i[a]||(rl(s,r),i[a]=!0)}return y.isArray(e)?e.forEach(o):o(e),this}}pe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);y.reduceDescriptors(pe.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});y.freezeMethods(pe);function Dn(t,e){const n=this||xt,i=e||n,s=pe.from(i.headers);let o=i.data;return y.forEach(t,function(a){o=a.call(n,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function Go(t){return!!(t&&t.__CANCEL__)}function Tt(t,e,n){G.call(this,t??"canceled",G.ERR_CANCELED,e,n),this.name="CanceledError"}y.inherits(Tt,G,{__CANCEL__:!0});function zo(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new G("Request failed with status code "+n.status,[G.ERR_BAD_REQUEST,G.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function al(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function ll(t,e){t=t||10;const n=new Array(t),i=new Array(t);let s=0,o=0,r;return e=e!==void 0?e:1e3,function(l){const d=Date.now(),c=i[o];r||(r=d),n[s]=l,i[s]=d;let u=o,p=0;for(;u!==s;)p+=n[u++],u=u%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),d-r<e)return;const h=c&&d-c;return h?Math.round(p*1e3/h):void 0}}function cl(t,e){let n=0;const i=1e3/e;let s=null;return function(){const r=this===!0,a=Date.now();if(r||a-n>i)return s&&(clearTimeout(s),s=null),n=a,t.apply(null,arguments);s||(s=setTimeout(()=>(s=null,n=Date.now(),t.apply(null,arguments)),i-(a-n)))}}const on=(t,e,n=3)=>{let i=0;const s=ll(50,250);return cl(o=>{const r=o.loaded,a=o.lengthComputable?o.total:void 0,l=r-i,d=s(l),c=r<=a;i=r;const u={loaded:r,total:a,progress:a?r/a:void 0,bytes:l,rate:d||void 0,estimated:d&&a&&c?(a-r)/d:void 0,event:o,lengthComputable:a!=null};u[e?"download":"upload"]=!0,t(u)},n)},dl=we.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function s(o){let r=o;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(r){const a=y.isString(r)?s(r):r;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}(),ul=we.hasStandardBrowserEnv?{write(t,e,n,i,s,o){const r=[t+"="+encodeURIComponent(e)];y.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),y.isString(i)&&r.push("path="+i),y.isString(s)&&r.push("domain="+s),o===!0&&r.push("secure"),document.cookie=r.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function hl(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function fl(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ko(t,e){return t&&!hl(e)?fl(t,e):e}const Yi=t=>t instanceof pe?{...t}:t;function ot(t,e){e=e||{};const n={};function i(d,c,u){return y.isPlainObject(d)&&y.isPlainObject(c)?y.merge.call({caseless:u},d,c):y.isPlainObject(c)?y.merge({},c):y.isArray(c)?c.slice():c}function s(d,c,u){if(y.isUndefined(c)){if(!y.isUndefined(d))return i(void 0,d,u)}else return i(d,c,u)}function o(d,c){if(!y.isUndefined(c))return i(void 0,c)}function r(d,c){if(y.isUndefined(c)){if(!y.isUndefined(d))return i(void 0,d)}else return i(void 0,c)}function a(d,c,u){if(u in e)return i(d,c);if(u in t)return i(void 0,d)}const l={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(d,c)=>s(Yi(d),Yi(c),!0)};return y.forEach(Object.keys(Object.assign({},t,e)),function(c){const u=l[c]||s,p=u(t[c],e[c],c);y.isUndefined(p)&&u!==a||(n[c]=p)}),n}const Uo=t=>{const e=ot({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:r,auth:a}=e;e.headers=r=pe.from(r),e.url=No(ko(e.baseURL,e.url),t.params,t.paramsSerializer),a&&r.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(y.isFormData(n)){if(we.hasStandardBrowserEnv||we.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((l=r.getContentType())!==!1){const[d,...c]=l?l.split(";").map(u=>u.trim()).filter(Boolean):[];r.setContentType([d||"multipart/form-data",...c].join("; "))}}if(we.hasStandardBrowserEnv&&(i&&y.isFunction(i)&&(i=i(e)),i||i!==!1&&dl(e.url))){const d=s&&o&&ul.read(o);d&&r.set(s,d)}return e},pl=typeof XMLHttpRequest<"u",ml=pl&&function(t){return new Promise(function(n,i){const s=Uo(t);let o=s.data;const r=pe.from(s.headers).normalize();let{responseType:a}=s,l;function d(){s.cancelToken&&s.cancelToken.unsubscribe(l),s.signal&&s.signal.removeEventListener("abort",l)}let c=new XMLHttpRequest;c.open(s.method.toUpperCase(),s.url,!0),c.timeout=s.timeout;function u(){if(!c)return;const h=pe.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),m={data:!a||a==="text"||a==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:h,config:t,request:c};zo(function(g){n(g),d()},function(g){i(g),d()},m),c=null}"onloadend"in c?c.onloadend=u:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(u)},c.onabort=function(){c&&(i(new G("Request aborted",G.ECONNABORTED,s,c)),c=null)},c.onerror=function(){i(new G("Network Error",G.ERR_NETWORK,s,c)),c=null},c.ontimeout=function(){let f=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const m=s.transitional||Fo;s.timeoutErrorMessage&&(f=s.timeoutErrorMessage),i(new G(f,m.clarifyTimeoutError?G.ETIMEDOUT:G.ECONNABORTED,s,c)),c=null},o===void 0&&r.setContentType(null),"setRequestHeader"in c&&y.forEach(r.toJSON(),function(f,m){c.setRequestHeader(m,f)}),y.isUndefined(s.withCredentials)||(c.withCredentials=!!s.withCredentials),a&&a!=="json"&&(c.responseType=s.responseType),typeof s.onDownloadProgress=="function"&&c.addEventListener("progress",on(s.onDownloadProgress,!0)),typeof s.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",on(s.onUploadProgress)),(s.cancelToken||s.signal)&&(l=h=>{c&&(i(!h||h.type?new Tt(null,t,c):h),c.abort(),c=null)},s.cancelToken&&s.cancelToken.subscribe(l),s.signal&&(s.signal.aborted?l():s.signal.addEventListener("abort",l)));const p=al(s.url);if(p&&we.protocols.indexOf(p)===-1){i(new G("Unsupported protocol "+p+":",G.ERR_BAD_REQUEST,t));return}c.send(o||null)})},gl=(t,e)=>{let n=new AbortController,i;const s=function(l){if(!i){i=!0,r();const d=l instanceof Error?l:this.reason;n.abort(d instanceof G?d:new Tt(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{s(new G(`timeout ${e} of ms exceeded`,G.ETIMEDOUT))},e);const r=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",s):l.unsubscribe(s))}),t=null)};t.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",s));const{signal:a}=n;return a.unsubscribe=r,[a,()=>{o&&clearTimeout(o),o=null}]},El=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let i=0,s;for(;i<n;)s=i+e,yield t.slice(i,s),i=s},bl=async function*(t,e,n){for await(const i of t)yield*El(ArrayBuffer.isView(i)?i:await n(String(i)),e)},Xi=(t,e,n,i,s)=>{const o=bl(t,e,s);let r=0;return new ReadableStream({type:"bytes",async pull(a){const{done:l,value:d}=await o.next();if(l){a.close(),i();return}let c=d.byteLength;n&&n(r+=c),a.enqueue(new Uint8Array(d))},cancel(a){return i(a),o.return()}},{highWaterMark:2})},Zi=(t,e)=>{const n=t!=null;return i=>setTimeout(()=>e({lengthComputable:n,total:t,loaded:i}))},bn=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ho=bn&&typeof ReadableStream=="function",ii=bn&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),yl=Ho&&(()=>{let t=!1;const e=new Request(we.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})(),Ki=64*1024,si=Ho&&!!(()=>{try{return y.isReadableStream(new Response("").body)}catch{}})(),rn={stream:si&&(t=>t.body)};bn&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!rn[e]&&(rn[e]=y.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new G(`Response type '${e}' is not supported`,G.ERR_NOT_SUPPORT,i)})})})(new Response);const vl=async t=>{if(t==null)return 0;if(y.isBlob(t))return t.size;if(y.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(y.isArrayBufferView(t))return t.byteLength;if(y.isURLSearchParams(t)&&(t=t+""),y.isString(t))return(await ii(t)).byteLength},Tl=async(t,e)=>{const n=y.toFiniteNumber(t.getContentLength());return n??vl(e)},Il=bn&&(async t=>{let{url:e,method:n,data:i,signal:s,cancelToken:o,timeout:r,onDownloadProgress:a,onUploadProgress:l,responseType:d,headers:c,withCredentials:u="same-origin",fetchOptions:p}=Uo(t);d=d?(d+"").toLowerCase():"text";let[h,f]=s||o||r?gl([s,o],r):[],m,E;const g=()=>{!m&&setTimeout(()=>{h&&h.unsubscribe()}),m=!0};let b;try{if(l&&yl&&n!=="get"&&n!=="head"&&(b=await Tl(c,i))!==0){let D=new Request(e,{method:"POST",body:i,duplex:"half"}),L;y.isFormData(i)&&(L=D.headers.get("content-type"))&&c.setContentType(L),D.body&&(i=Xi(D.body,Ki,Zi(b,on(l)),null,ii))}y.isString(u)||(u=u?"cors":"omit"),E=new Request(e,{...p,signal:h,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:i,duplex:"half",withCredentials:u});let v=await fetch(E);const R=si&&(d==="stream"||d==="response");if(si&&(a||R)){const D={};["status","statusText","headers"].forEach(_=>{D[_]=v[_]});const L=y.toFiniteNumber(v.headers.get("content-length"));v=new Response(Xi(v.body,Ki,a&&Zi(L,on(a,!0)),R&&g,ii),D)}d=d||"text";let P=await rn[y.findKey(rn,d)||"text"](v,t);return!R&&g(),f&&f(),await new Promise((D,L)=>{zo(D,L,{data:P,headers:pe.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:E})})}catch(v){throw g(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new G("Network Error",G.ERR_NETWORK,t,E),{cause:v.cause||v}):G.from(v,v&&v.code,t,E)}}),oi={http:za,xhr:ml,fetch:Il};y.forEach(oi,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Qi=t=>`- ${t}`,Rl=t=>y.isFunction(t)||t===null||t===!1,qo={getAdapter:t=>{t=y.isArray(t)?t:[t];const{length:e}=t;let n,i;const s={};for(let o=0;o<e;o++){n=t[o];let r;if(i=n,!Rl(n)&&(i=oi[(r=String(n)).toLowerCase()],i===void 0))throw new G(`Unknown adapter '${r}'`);if(i)break;s[r||"#"+o]=i}if(!i){const o=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let r=e?o.length>1?`since :
`+o.map(Qi).join(`
`):" "+Qi(o[0]):"as no adapter specified";throw new G("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return i},adapters:oi};function An(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Tt(null,t)}function Ji(t){return An(t),t.headers=pe.from(t.headers),t.data=Dn.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),qo.getAdapter(t.adapter||xt.adapter)(t).then(function(i){return An(t),i.data=Dn.call(t,t.transformResponse,i),i.headers=pe.from(i.headers),i},function(i){return Go(i)||(An(t),i&&i.response&&(i.response.data=Dn.call(t,t.transformResponse,i.response),i.response.headers=pe.from(i.response.headers))),Promise.reject(i)})}const jo="1.7.2",Si={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Si[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const es={};Si.transitional=function(e,n,i){function s(o,r){return"[Axios v"+jo+"] Transitional option '"+o+"'"+r+(i?". "+i:"")}return(o,r,a)=>{if(e===!1)throw new G(s(r," has been removed"+(n?" in "+n:"")),G.ERR_DEPRECATED);return n&&!es[r]&&(es[r]=!0,console.warn(s(r," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,r,a):!0}};function Sl(t,e,n){if(typeof t!="object")throw new G("options must be an object",G.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let s=i.length;for(;s-- >0;){const o=i[s],r=e[o];if(r){const a=t[o],l=a===void 0||r(a,o,t);if(l!==!0)throw new G("option "+o+" must be "+l,G.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new G("Unknown option "+o,G.ERR_BAD_OPTION)}}const ri={assertOptions:Sl,validators:Si},ke=ri.validators;class Je{constructor(e){this.defaults=e,this.interceptors={request:new $i,response:new $i}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ot(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:o}=n;i!==void 0&&ri.assertOptions(i,{silentJSONParsing:ke.transitional(ke.boolean),forcedJSONParsing:ke.transitional(ke.boolean),clarifyTimeoutError:ke.transitional(ke.boolean)},!1),s!=null&&(y.isFunction(s)?n.paramsSerializer={serialize:s}:ri.assertOptions(s,{encode:ke.function,serialize:ke.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let r=o&&y.merge(o.common,o[n.method]);o&&y.forEach(["delete","get","head","post","put","patch","common"],f=>{delete o[f]}),n.headers=pe.concat(r,o);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const d=[];this.interceptors.response.forEach(function(m){d.push(m.fulfilled,m.rejected)});let c,u=0,p;if(!l){const f=[Ji.bind(this),void 0];for(f.unshift.apply(f,a),f.push.apply(f,d),p=f.length,c=Promise.resolve(n);u<p;)c=c.then(f[u++],f[u++]);return c}p=a.length;let h=n;for(u=0;u<p;){const f=a[u++],m=a[u++];try{h=f(h)}catch(E){m.call(this,E);break}}try{c=Ji.call(this,h)}catch(f){return Promise.reject(f)}for(u=0,p=d.length;u<p;)c=c.then(d[u++],d[u++]);return c}getUri(e){e=ot(this.defaults,e);const n=ko(e.baseURL,e.url);return No(n,e.params,e.paramsSerializer)}}y.forEach(["delete","get","head","options"],function(e){Je.prototype[e]=function(n,i){return this.request(ot(i||{},{method:e,url:n,data:(i||{}).data}))}});y.forEach(["post","put","patch"],function(e){function n(i){return function(o,r,a){return this.request(ot(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:r}))}}Je.prototype[e]=n(),Je.prototype[e+"Form"]=n(!0)});class _i{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(s=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](s);i._listeners=null}),this.promise.then=s=>{let o;const r=new Promise(a=>{i.subscribe(a),o=a}).then(s);return r.cancel=function(){i.unsubscribe(o)},r},e(function(o,r,a){i.reason||(i.reason=new Tt(o,r,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new _i(function(s){e=s}),cancel:e}}}function _l(t){return function(n){return t.apply(null,n)}}function Ol(t){return y.isObject(t)&&t.isAxiosError===!0}const ai={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ai).forEach(([t,e])=>{ai[e]=t});function Vo(t){const e=new Je(t),n=Ro(Je.prototype.request,e);return y.extend(n,Je.prototype,e,{allOwnKeys:!0}),y.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Vo(ot(t,s))},n}const X=Vo(xt);X.Axios=Je;X.CanceledError=Tt;X.CancelToken=_i;X.isCancel=Go;X.VERSION=jo;X.toFormData=En;X.AxiosError=G;X.Cancel=X.CanceledError;X.all=function(e){return Promise.all(e)};X.spread=_l;X.isAxiosError=Ol;X.mergeConfig=ot;X.AxiosHeaders=pe;X.formToJSON=t=>Bo(y.isHTMLForm(t)?new FormData(t):t);X.getAdapter=qo.getAdapter;X.HttpStatusCode=ai;X.default=X;window.axios=X;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function wl(){document.getElementById("loading").style.display="flex"}function ts(){document.getElementById("loading").style.display="none"}function Cn(t){const e=document.querySelector("#errorModal .modal-content p");e.innerText=t,new bootstrap.Modal(document.getElementById("errorModal")).show()}X.interceptors.request.use(function(t){return t.data instanceof FormData&&(t.headers["Content-Type"]="multipart/form-data"),wl(),t},function(t){return Promise.reject(t)});X.interceptors.response.use(function(t){return ts(),t},function(t){return ts(),t.response?Cn(t.response.data.message||"Erro desconhecido"):t.request?Cn("Sem resposta do servidor"):Cn("Erro ao enviar requisição"),Promise.reject(t)});function li(){let t=document.getElementById("logradouro"),e=document.getElementById("bairro"),n=document.getElementById("cidade"),i=document.getElementById("estado"),s=document.getElementById("pais");t.value="",t.disabled=!1,e.value="",e.disabled=!1,n.value="",n.disabled=!1,i.value="",i.disabled=!1,s.value="",s.disabled=!1}window.meu_callback=function(t){if("erro"in t)li(),alert("CEP não encontrado.");else{let e=document.getElementById("logradouro"),n=document.getElementById("bairro"),i=document.getElementById("cidade"),s=document.getElementById("estado"),o=document.getElementById("pais");e.value=t.logradouro,e.readOnly=!0,n.value=t.bairro,n.readOnly=!0,i.value=t.localidade,i.readOnly=!0,s.value=t.uf,s.readOnly=!0,o.value="Brasil",o.readOnly=!0}};window.pesquisaCep=function(t){var e=t.replace(/\D/g,"");if(e!=""){var n=/^[0-9]{8}$/;if(n.test(e)){document.getElementById("logradouro").value="...",document.getElementById("bairro").value="...",document.getElementById("cidade").value="...",document.getElementById("estado").value="...",document.getElementById("pais").value="...";var i=document.createElement("script");i.src="https://viacep.com.br/ws/"+e+"/json/?callback=meu_callback",document.body.appendChild(i)}else li(),alert("Formato de CEP inválido.")}else li()};var $o=function(t){return t.replace(/\D/g,"").length>11?"00.000.000/0000-00":"000.000.000-009"},Pl={onKeyPress:function(t,e,n,i){n.mask($o.apply({},arguments),i)}};$("#cpfcnpj").mask($o,Pl);var Wo=function(t){return t.replace(/\D/g,"").length>10?"(00) 00000-0000":"(00) 0000-00009"},Dl={onKeyPress:function(t,e,n,i){n.mask(Wo(t),i)}};$(".phone").mask(Wo,Dl);Fancybox.bind("[data-fancybox]",{});function Al(t){t=$(t),t.unmask().mask("#.##0,00",{reverse:!0}),console.log(t.val());const e=t.val().length;t[0].setSelectionRange(e,e)}window.inputValor=Al;/*!
 * FilePond 4.31.1
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Cl=t=>t instanceof HTMLElement,Ll=(t,e=[],n=[])=>{const i={...t},s=[],o=[],r=()=>({...i}),a=()=>{const f=[...s];return s.length=0,f},l=()=>{const f=[...o];o.length=0,f.forEach(({type:m,data:E})=>{d(m,E)})},d=(f,m,E)=>{if(E&&!document.hidden){o.push({type:f,data:m});return}h[f]&&h[f](m),s.push({type:f,data:m})},c=(f,...m)=>p[f]?p[f](...m):null,u={getState:r,processActionQueue:a,processDispatchQueue:l,dispatch:d,query:c};let p={};e.forEach(f=>{p={...f(i),...p}});let h={};return n.forEach(f=>{h={...f(d,c,i),...h}}),u},Ml=(t,e,n)=>{if(typeof n=="function"){t[e]=n;return}Object.defineProperty(t,e,{...n})},Z=(t,e)=>{for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])},qe=t=>{const e={};return Z(t,n=>{Ml(e,n,t[n])}),e},ee=(t,e,n=null)=>{if(n===null)return t.getAttribute(e)||t.hasAttribute(e);t.setAttribute(e,n)},xl="http://www.w3.org/2000/svg",Nl=["svg","path"],ns=t=>Nl.includes(t),an=(t,e,n={})=>{typeof e=="object"&&(n=e,e=null);const i=ns(t)?document.createElementNS(xl,t):document.createElement(t);return e&&(ns(t)?ee(i,"class",e):i.className=e),Z(n,(s,o)=>{ee(i,s,o)}),i},Fl=t=>(e,n)=>{typeof n<"u"&&t.children[n]?t.insertBefore(e,t.children[n]):t.appendChild(e)},Bl=(t,e)=>(n,i)=>(typeof i<"u"?e.splice(i,0,n):e.push(n),n),Gl=(t,e)=>n=>(e.splice(e.indexOf(n),1),n.element.parentNode&&t.removeChild(n.element),n),zl=typeof window<"u"&&typeof window.document<"u",Yo=()=>zl,kl=Yo()?an("svg"):{},Ul="children"in kl?t=>t.children.length:t=>t.childNodes.length,Xo=(t,e,n,i)=>{const s=n[0]||t.left,o=n[1]||t.top,r=s+t.width,a=o+t.height*(i[1]||1),l={element:{...t},inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:s,top:o,right:r,bottom:a}};return e.filter(d=>!d.isRectIgnored()).map(d=>d.rect).forEach(d=>{is(l.inner,{...d.inner}),is(l.outer,{...d.outer})}),ss(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,ss(l.outer),l},is=(t,e)=>{e.top+=t.top,e.right+=t.left,e.bottom+=t.top,e.left+=t.left,e.bottom>t.bottom&&(t.bottom=e.bottom),e.right>t.right&&(t.right=e.right)},ss=t=>{t.width=t.right-t.left,t.height=t.bottom-t.top},Xe=t=>typeof t=="number",Hl=(t,e,n,i=.001)=>Math.abs(t-e)<i&&Math.abs(n)<i,ql=({stiffness:t=.5,damping:e=.75,mass:n=10}={})=>{let i=null,s=null,o=0,r=!1;const d=qe({interpolate:(c,u)=>{if(r)return;if(!(Xe(i)&&Xe(s))){r=!0,o=0;return}const p=-(s-i)*t;o+=p/n,s+=o,o*=e,Hl(s,i,o)||u?(s=i,o=0,r=!0,d.onupdate(s),d.oncomplete(s)):d.onupdate(s)},target:{set:c=>{if(Xe(c)&&!Xe(s)&&(s=c),i===null&&(i=c,s=c),i=c,s===i||typeof i>"u"){r=!0,o=0,d.onupdate(s),d.oncomplete(s);return}r=!1},get:()=>i},resting:{get:()=>r},onupdate:c=>{},oncomplete:c=>{}});return d},jl=t=>t<.5?2*t*t:-1+(4-2*t)*t,Vl=({duration:t=500,easing:e=jl,delay:n=0}={})=>{let i=null,s,o,r=!0,a=!1,l=null;const c=qe({interpolate:(u,p)=>{r||l===null||(i===null&&(i=u),!(u-i<n)&&(s=u-i-n,s>=t||p?(s=1,o=a?0:1,c.onupdate(o*l),c.oncomplete(o*l),r=!0):(o=s/t,c.onupdate((s>=0?e(a?1-o:o):0)*l))))},target:{get:()=>a?0:l,set:u=>{if(l===null){l=u,c.onupdate(u),c.oncomplete(u);return}u<l?(l=1,a=!0):(a=!1,l=u),r=!1,i=null}},resting:{get:()=>r},onupdate:u=>{},oncomplete:u=>{}});return c},os={spring:ql,tween:Vl},$l=(t,e,n)=>{const i=t[e]&&typeof t[e][n]=="object"?t[e][n]:t[e]||t,s=typeof i=="string"?i:i.type,o=typeof i=="object"?{...i}:{};return os[s]?os[s](o):null},Oi=(t,e,n,i=!1)=>{e=Array.isArray(e)?e:[e],e.forEach(s=>{t.forEach(o=>{let r=o,a=()=>n[o],l=d=>n[o]=d;typeof o=="object"&&(r=o.key,a=o.getter||a,l=o.setter||l),!(s[r]&&!i)&&(s[r]={get:a,set:l})})})},Wl=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:i})=>{const s={...e},o=[];return Z(t,(r,a)=>{const l=$l(a);if(!l)return;l.onupdate=c=>{e[r]=c},l.target=s[r],Oi([{key:r,setter:c=>{l.target!==c&&(l.target=c)},getter:()=>e[r]}],[n,i],e,!0),o.push(l)}),{write:r=>{let a=document.hidden,l=!0;return o.forEach(d=>{d.resting||(l=!1),d.interpolate(r,a)}),l},destroy:()=>{}}},Yl=t=>(e,n)=>{t.addEventListener(e,n)},Xl=t=>(e,n)=>{t.removeEventListener(e,n)},Zl=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:i,viewState:s,view:o})=>{const r=[],a=Yl(o.element),l=Xl(o.element);return i.on=(d,c)=>{r.push({type:d,fn:c}),a(d,c)},i.off=(d,c)=>{r.splice(r.findIndex(u=>u.type===d&&u.fn===c),1),l(d,c)},{write:()=>!0,destroy:()=>{r.forEach(d=>{l(d.type,d.fn)})}}},Kl=({mixinConfig:t,viewProps:e,viewExternalAPI:n})=>{Oi(t,n,e)},ae=t=>t!=null,Ql={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Jl=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:i,view:s})=>{const o={...e},r={};Oi(t,[n,i],e);const a=()=>[e.translateX||0,e.translateY||0],l=()=>[e.scaleX||0,e.scaleY||0],d=()=>s.rect?Xo(s.rect,s.childViews,a(),l()):null;return n.rect={get:d},i.rect={get:d},t.forEach(c=>{e[c]=typeof o[c]>"u"?Ql[c]:o[c]}),{write:()=>{if(ec(r,e))return tc(s.element,e),Object.assign(r,{...e}),!0},destroy:()=>{}}},ec=(t,e)=>{if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const n in e)if(e[n]!==t[n])return!0;return!1},tc=(t,{opacity:e,perspective:n,translateX:i,translateY:s,scaleX:o,scaleY:r,rotateX:a,rotateY:l,rotateZ:d,originX:c,originY:u,width:p,height:h})=>{let f="",m="";(ae(c)||ae(u))&&(m+=`transform-origin: ${c||0}px ${u||0}px;`),ae(n)&&(f+=`perspective(${n}px) `),(ae(i)||ae(s))&&(f+=`translate3d(${i||0}px, ${s||0}px, 0) `),(ae(o)||ae(r))&&(f+=`scale3d(${ae(o)?o:1}, ${ae(r)?r:1}, 1) `),ae(d)&&(f+=`rotateZ(${d}rad) `),ae(a)&&(f+=`rotateX(${a}rad) `),ae(l)&&(f+=`rotateY(${l}rad) `),f.length&&(m+=`transform:${f};`),ae(e)&&(m+=`opacity:${e};`,e===0&&(m+="visibility:hidden;"),e<1&&(m+="pointer-events:none;")),ae(h)&&(m+=`height:${h}px;`),ae(p)&&(m+=`width:${p}px;`);const E=t.elementCurrentStyle||"";(m.length!==E.length||m!==E)&&(t.style.cssText=m,t.elementCurrentStyle=m)},nc={styles:Jl,listeners:Zl,animations:Wl,apis:Kl},rs=(t={},e={},n={})=>(e.layoutCalculated||(t.paddingTop=parseInt(n.paddingTop,10)||0,t.marginTop=parseInt(n.marginTop,10)||0,t.marginRight=parseInt(n.marginRight,10)||0,t.marginBottom=parseInt(n.marginBottom,10)||0,t.marginLeft=parseInt(n.marginLeft,10)||0,e.layoutCalculated=!0),t.left=e.offsetLeft||0,t.top=e.offsetTop||0,t.width=e.offsetWidth||0,t.height=e.offsetHeight||0,t.right=t.left+t.width,t.bottom=t.top+t.height,t.scrollTop=e.scrollTop,t.hidden=e.offsetParent===null,t),te=({tag:t="div",name:e=null,attributes:n={},read:i=()=>{},write:s=()=>{},create:o=()=>{},destroy:r=()=>{},filterFrameActionsForChild:a=(h,f)=>f,didCreateView:l=()=>{},didWriteView:d=()=>{},ignoreRect:c=!1,ignoreRectUpdate:u=!1,mixins:p=[]}={})=>(h,f={})=>{const m=an(t,`filepond--${e}`,n),E=window.getComputedStyle(m,null),g=rs();let b=null,v=!1;const R=[],P=[],D={},L={},_=[s],N=[i],z=[r],M=()=>m,F=()=>R.concat(),k=()=>D,S=H=>(oe,Me)=>oe(H,Me),U=()=>b||(b=Xo(g,R,[0,0],[1,1]),b),I=()=>E,O=()=>{b=null,R.forEach(Me=>Me._read()),!(u&&g.width&&g.height)&&rs(g,m,E);const oe={root:ze,props:f,rect:g};N.forEach(Me=>Me(oe))},x=(H,oe,Me)=>{let ct=oe.length===0;return _.forEach(de=>{de({props:f,root:ze,actions:oe,timestamp:H,shouldOptimize:Me})===!1&&(ct=!1)}),P.forEach(de=>{de.write(H)===!1&&(ct=!1)}),R.filter(de=>!!de.element.parentNode).forEach(de=>{de._write(H,a(de,oe),Me)||(ct=!1)}),R.forEach((de,Ft)=>{de.element.parentNode||(ze.appendChild(de.element,Ft),de._read(),de._write(H,a(de,oe),Me),ct=!1)}),v=ct,d({props:f,root:ze,actions:oe,timestamp:H}),ct},C=()=>{P.forEach(H=>H.destroy()),z.forEach(H=>{H({root:ze,props:f})}),R.forEach(H=>H._destroy())},W={element:{get:M},style:{get:I},childViews:{get:F}},Y={...W,rect:{get:U},ref:{get:k},is:H=>e===H,appendChild:Fl(m),createChildView:S(h),linkView:H=>(R.push(H),H),unlinkView:H=>{R.splice(R.indexOf(H),1)},appendChildView:Bl(m,R),removeChildView:Gl(m,R),registerWriter:H=>_.push(H),registerReader:H=>N.push(H),registerDestroyer:H=>z.push(H),invalidateLayout:()=>m.layoutCalculated=!1,dispatch:h.dispatch,query:h.query},On={element:{get:M},childViews:{get:F},rect:{get:U},resting:{get:()=>v},isRectIgnored:()=>c,_read:O,_write:x,_destroy:C},Jr={...W,rect:{get:()=>g}};Object.keys(p).sort((H,oe)=>H==="styles"?1:oe==="styles"?-1:0).forEach(H=>{const oe=nc[H]({mixinConfig:p[H],viewProps:f,viewState:L,viewInternalAPI:Y,viewExternalAPI:On,view:qe(Jr)});oe&&P.push(oe)});const ze=qe(Y);o({root:ze,props:f});const ea=Ul(m);return R.forEach((H,oe)=>{ze.appendChild(H.element,ea+oe)}),l(ze),qe(On)},ic=(t,e,n=60)=>{const i="__framePainter";if(window[i]){window[i].readers.push(t),window[i].writers.push(e);return}window[i]={readers:[t],writers:[e]};const s=window[i],o=1e3/n;let r=null,a=null,l=null,d=null;const c=()=>{document.hidden?(l=()=>window.setTimeout(()=>u(performance.now()),o),d=()=>window.clearTimeout(a)):(l=()=>window.requestAnimationFrame(u),d=()=>window.cancelAnimationFrame(a))};document.addEventListener("visibilitychange",()=>{d&&d(),c(),u(performance.now())});const u=p=>{a=l(u),r||(r=p);const h=p-r;h<=o||(r=p-h%o,s.readers.forEach(f=>f()),s.writers.forEach(f=>f(p)))};return c(),u(performance.now()),{pause:()=>{d(a)}}},ce=(t,e)=>({root:n,props:i,actions:s=[],timestamp:o,shouldOptimize:r})=>{s.filter(a=>t[a.type]).forEach(a=>t[a.type]({root:n,props:i,action:a.data,timestamp:o,shouldOptimize:r})),e&&e({root:n,props:i,actions:s,timestamp:o,shouldOptimize:r})},as=(t,e)=>e.parentNode.insertBefore(t,e),ls=(t,e)=>e.parentNode.insertBefore(t,e.nextSibling),yn=t=>Array.isArray(t),Be=t=>t==null,sc=t=>t.trim(),vn=t=>""+t,oc=(t,e=",")=>Be(t)?[]:yn(t)?t:vn(t).split(e).map(sc).filter(n=>n.length),Zo=t=>typeof t=="boolean",Ko=t=>Zo(t)?t:t==="true",le=t=>typeof t=="string",Qo=t=>Xe(t)?t:le(t)?vn(t).replace(/[a-z]+/gi,""):0,sn=t=>parseInt(Qo(t),10),cs=t=>parseFloat(Qo(t)),It=t=>Xe(t)&&isFinite(t)&&Math.floor(t)===t,ds=(t,e=1e3)=>{if(It(t))return t;let n=vn(t).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),sn(n)*e*e):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),sn(n)*e):sn(n)},Ze=t=>typeof t=="function",rc=t=>{let e=self,n=t.split("."),i=null;for(;i=n.shift();)if(e=e[i],!e)return null;return e},us={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},ac=t=>{const e={};return e.url=le(t)?t:t.url||"",e.timeout=t.timeout?parseInt(t.timeout,10):0,e.headers=t.headers?t.headers:{},Z(us,n=>{e[n]=lc(n,t[n],us[n],e.timeout,e.headers)}),e.process=t.process||le(t)||t.url?e.process:null,e.remove=t.remove||null,delete e.headers,e},lc=(t,e,n,i,s)=>{if(e===null)return null;if(typeof e=="function")return e;const o={url:n==="GET"||n==="PATCH"?`?${t}=`:"",method:n,headers:s,withCredentials:!1,timeout:i,onload:null,ondata:null,onerror:null};if(le(e))return o.url=e,o;if(Object.assign(o,e),le(o.headers)){const r=o.headers.split(/:(.+)/);o.headers={header:r[0],value:r[1]}}return o.withCredentials=Ko(o.withCredentials),o},cc=t=>ac(t),dc=t=>t===null,se=t=>typeof t=="object"&&t!==null,uc=t=>se(t)&&le(t.url)&&se(t.process)&&se(t.revert)&&se(t.restore)&&se(t.fetch),ci=t=>yn(t)?"array":dc(t)?"null":It(t)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)?"bytes":uc(t)?"api":typeof t,hc=t=>t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),fc={array:oc,boolean:Ko,int:t=>ci(t)==="bytes"?ds(t):sn(t),number:cs,float:cs,bytes:ds,string:t=>Ze(t)?t:vn(t),function:t=>rc(t),serverapi:cc,object:t=>{try{return JSON.parse(hc(t))}catch{return null}}},pc=(t,e)=>fc[e](t),Jo=(t,e,n)=>{if(t===e)return t;let i=ci(t);if(i!==n){const s=pc(t,n);if(i=ci(s),s===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;t=s}return t},mc=(t,e)=>{let n=t;return{enumerable:!0,get:()=>n,set:i=>{n=Jo(i,t,e)}}},gc=t=>{const e={};return Z(t,n=>{const i=t[n];e[n]=mc(i[0],i[1])}),qe(e)},Ec=t=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:gc(t)}),Tn=(t,e="-")=>t.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(e),bc=(t,e)=>{const n={};return Z(e,i=>{n[i]={get:()=>t.getState().options[i],set:s=>{t.dispatch(`SET_${Tn(i,"_").toUpperCase()}`,{value:s})}}}),n},yc=t=>(e,n,i)=>{const s={};return Z(t,o=>{const r=Tn(o,"_").toUpperCase();s[`SET_${r}`]=a=>{try{i.options[o]=a.value}catch{}e(`DID_SET_${r}`,{value:i.options[o]})}}),s},vc=t=>e=>{const n={};return Z(t,i=>{n[`GET_${Tn(i,"_").toUpperCase()}`]=s=>e.options[i]}),n},Ie={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},wi=()=>Math.random().toString(36).substring(2,11),Pi=(t,e)=>t.splice(e,1),Tc=(t,e)=>{e?t():document.hidden?Promise.resolve(1).then(t):setTimeout(t,0)},In=()=>{const t=[],e=(i,s)=>{Pi(t,t.findIndex(o=>o.event===i&&(o.cb===s||!s)))},n=(i,s,o)=>{t.filter(r=>r.event===i).map(r=>r.cb).forEach(r=>Tc(()=>r(...s),o))};return{fireSync:(i,...s)=>{n(i,s,!0)},fire:(i,...s)=>{n(i,s,!1)},on:(i,s)=>{t.push({event:i,cb:s})},onOnce:(i,s)=>{t.push({event:i,cb:(...o)=>{e(i,s),s(...o)}})},off:e}},er=(t,e,n)=>{Object.getOwnPropertyNames(t).filter(i=>!n.includes(i)).forEach(i=>Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i)))},Ic=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],ue=t=>{const e={};return er(t,e,Ic),e},Rc=t=>{t.forEach((e,n)=>{e.released&&Pi(t,n)})},B={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},ne={INPUT:1,LIMBO:2,LOCAL:3},tr=t=>/[^0-9]+/.exec(t),nr=()=>tr(1.1.toLocaleString())[0],Sc=()=>{const t=nr(),e=1e3.toLocaleString();return e!=="1000"?tr(e)[0]:t==="."?",":"."},T={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Di=[],Se=(t,e,n)=>new Promise((i,s)=>{const o=Di.filter(a=>a.key===t).map(a=>a.cb);if(o.length===0){i(e);return}const r=o.shift();o.reduce((a,l)=>a.then(d=>l(d,n)),r(e,n)).then(a=>i(a)).catch(a=>s(a))}),at=(t,e,n)=>Di.filter(i=>i.key===t).map(i=>i.cb(e,n)),_c=(t,e)=>Di.push({key:t,cb:e}),Oc=t=>Object.assign(gt,t),ln=()=>({...gt}),wc=t=>{Z(t,(e,n)=>{gt[e]&&(gt[e][0]=Jo(n,gt[e][0],gt[e][1]))})},gt={id:[null,T.STRING],name:["filepond",T.STRING],disabled:[!1,T.BOOLEAN],className:[null,T.STRING],required:[!1,T.BOOLEAN],captureMethod:[null,T.STRING],allowSyncAcceptAttribute:[!0,T.BOOLEAN],allowDrop:[!0,T.BOOLEAN],allowBrowse:[!0,T.BOOLEAN],allowPaste:[!0,T.BOOLEAN],allowMultiple:[!1,T.BOOLEAN],allowReplace:[!0,T.BOOLEAN],allowRevert:[!0,T.BOOLEAN],allowRemove:[!0,T.BOOLEAN],allowProcess:[!0,T.BOOLEAN],allowReorder:[!1,T.BOOLEAN],allowDirectoriesOnly:[!1,T.BOOLEAN],storeAsFile:[!1,T.BOOLEAN],forceRevert:[!1,T.BOOLEAN],maxFiles:[null,T.INT],checkValidity:[!1,T.BOOLEAN],itemInsertLocationFreedom:[!0,T.BOOLEAN],itemInsertLocation:["before",T.STRING],itemInsertInterval:[75,T.INT],dropOnPage:[!1,T.BOOLEAN],dropOnElement:[!0,T.BOOLEAN],dropValidation:[!1,T.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],T.ARRAY],instantUpload:[!0,T.BOOLEAN],maxParallelUploads:[2,T.INT],allowMinimumUploadDuration:[!0,T.BOOLEAN],chunkUploads:[!1,T.BOOLEAN],chunkForce:[!1,T.BOOLEAN],chunkSize:[5e6,T.INT],chunkRetryDelays:[[500,1e3,3e3],T.ARRAY],server:[null,T.SERVER_API],fileSizeBase:[1e3,T.INT],labelFileSizeBytes:["bytes",T.STRING],labelFileSizeKilobytes:["KB",T.STRING],labelFileSizeMegabytes:["MB",T.STRING],labelFileSizeGigabytes:["GB",T.STRING],labelDecimalSeparator:[nr(),T.STRING],labelThousandsSeparator:[Sc(),T.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',T.STRING],labelInvalidField:["Field contains invalid files",T.STRING],labelFileWaitingForSize:["Waiting for size",T.STRING],labelFileSizeNotAvailable:["Size not available",T.STRING],labelFileCountSingular:["file in list",T.STRING],labelFileCountPlural:["files in list",T.STRING],labelFileLoading:["Loading",T.STRING],labelFileAdded:["Added",T.STRING],labelFileLoadError:["Error during load",T.STRING],labelFileRemoved:["Removed",T.STRING],labelFileRemoveError:["Error during remove",T.STRING],labelFileProcessing:["Uploading",T.STRING],labelFileProcessingComplete:["Upload complete",T.STRING],labelFileProcessingAborted:["Upload cancelled",T.STRING],labelFileProcessingError:["Error during upload",T.STRING],labelFileProcessingRevertError:["Error during revert",T.STRING],labelTapToCancel:["tap to cancel",T.STRING],labelTapToRetry:["tap to retry",T.STRING],labelTapToUndo:["tap to undo",T.STRING],labelButtonRemoveItem:["Remove",T.STRING],labelButtonAbortItemLoad:["Abort",T.STRING],labelButtonRetryItemLoad:["Retry",T.STRING],labelButtonAbortItemProcessing:["Cancel",T.STRING],labelButtonUndoItemProcessing:["Undo",T.STRING],labelButtonRetryItemProcessing:["Retry",T.STRING],labelButtonProcessItem:["Upload",T.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',T.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',T.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',T.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',T.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',T.STRING],oninit:[null,T.FUNCTION],onwarning:[null,T.FUNCTION],onerror:[null,T.FUNCTION],onactivatefile:[null,T.FUNCTION],oninitfile:[null,T.FUNCTION],onaddfilestart:[null,T.FUNCTION],onaddfileprogress:[null,T.FUNCTION],onaddfile:[null,T.FUNCTION],onprocessfilestart:[null,T.FUNCTION],onprocessfileprogress:[null,T.FUNCTION],onprocessfileabort:[null,T.FUNCTION],onprocessfilerevert:[null,T.FUNCTION],onprocessfile:[null,T.FUNCTION],onprocessfiles:[null,T.FUNCTION],onremovefile:[null,T.FUNCTION],onpreparefile:[null,T.FUNCTION],onupdatefiles:[null,T.FUNCTION],onreorderfiles:[null,T.FUNCTION],beforeDropFile:[null,T.FUNCTION],beforeAddFile:[null,T.FUNCTION],beforeRemoveFile:[null,T.FUNCTION],beforePrepareFile:[null,T.FUNCTION],stylePanelLayout:[null,T.STRING],stylePanelAspectRatio:[null,T.STRING],styleItemPanelAspectRatio:[null,T.STRING],styleButtonRemoveItemPosition:["left",T.STRING],styleButtonProcessItemPosition:["right",T.STRING],styleLoadIndicatorPosition:["right",T.STRING],styleProgressIndicatorPosition:["right",T.STRING],styleButtonRemoveItemAlign:[!1,T.BOOLEAN],files:[[],T.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],T.ARRAY]},Ke=(t,e)=>Be(e)?t[0]||null:It(e)?t[e]||null:(typeof e=="object"&&(e=e.id),t.find(n=>n.id===e)||null),ir=t=>{if(Be(t))return t;if(/:/.test(t)){const e=t.split(":");return e[1]/e[0]}return parseFloat(t)},_e=t=>t.filter(e=>!e.archived),Pc={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Bt=null;const Dc=()=>{if(Bt===null)try{const t=new DataTransfer;t.items.add(new File(["hello world"],"This_Works.txt"));const e=document.createElement("input");e.setAttribute("type","file"),e.files=t.files,Bt=e.files.length===1}catch{Bt=!1}return Bt},Ac=[B.LOAD_ERROR,B.PROCESSING_ERROR,B.PROCESSING_REVERT_ERROR],Cc=[B.LOADING,B.PROCESSING,B.PROCESSING_QUEUED,B.INIT],Lc=[B.PROCESSING_COMPLETE],Mc=t=>Ac.includes(t.status),xc=t=>Cc.includes(t.status),Nc=t=>Lc.includes(t.status),hs=t=>se(t.options.server)&&(se(t.options.server.process)||Ze(t.options.server.process)),Fc=t=>({GET_STATUS:()=>{const e=_e(t.items),{EMPTY:n,ERROR:i,BUSY:s,IDLE:o,READY:r}=Pc;return e.length===0?n:e.some(Mc)?i:e.some(xc)?s:e.some(Nc)?r:o},GET_ITEM:e=>Ke(t.items,e),GET_ACTIVE_ITEM:e=>Ke(_e(t.items),e),GET_ACTIVE_ITEMS:()=>_e(t.items),GET_ITEMS:()=>t.items,GET_ITEM_NAME:e=>{const n=Ke(t.items,e);return n?n.filename:null},GET_ITEM_SIZE:e=>{const n=Ke(t.items,e);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(t.options).filter(e=>/^style/.test(e)).map(e=>({name:e,value:t.options[e]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(t.options.stylePanelLayout)?1:ir(t.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>t.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:e=>_e(t.items).filter(n=>n.status===e),GET_TOTAL_ITEMS:()=>_e(t.items).length,SHOULD_UPDATE_FILE_INPUT:()=>t.options.storeAsFile&&Dc()&&!hs(t),IS_ASYNC:()=>hs(t),GET_FILE_SIZE_LABELS:e=>({labelBytes:e("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:e("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:e("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:e("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),Bc=t=>{const e=_e(t.items).length;if(!t.options.allowMultiple)return e===0;const n=t.options.maxFiles;return n===null||e<n},sr=(t,e,n)=>Math.max(Math.min(n,t),e),Gc=(t,e,n)=>t.splice(e,0,n),zc=(t,e,n)=>Be(e)?null:typeof n>"u"?(t.push(e),e):(n=sr(n,0,t.length),Gc(t,n,e),e),di=t=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t),Nt=t=>`${t}`.split("/").pop().split("?").shift(),Rn=t=>t.split(".").pop(),kc=t=>{if(typeof t!="string")return"";const e=t.split("/").pop();return/svg/.test(e)?"svg":/zip|compressed/.test(e)?"zip":/plain/.test(e)?"txt":/msword/.test(e)?"doc":/[a-z]+/.test(e)?e==="jpeg"?"jpg":e:""},St=(t,e="")=>(e+t).slice(-e.length),or=(t=new Date)=>`${t.getFullYear()}-${St(t.getMonth()+1,"00")}-${St(t.getDate(),"00")}_${St(t.getHours(),"00")}-${St(t.getMinutes(),"00")}-${St(t.getSeconds(),"00")}`,yt=(t,e,n=null,i=null)=>{const s=typeof n=="string"?t.slice(0,t.size,n):t.slice(0,t.size,t.type);return s.lastModifiedDate=new Date,t._relativePath&&(s._relativePath=t._relativePath),le(e)||(e=or()),e&&i===null&&Rn(e)?s.name=e:(i=i||kc(s.type),s.name=e+(i?"."+i:"")),s},Uc=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,rr=(t,e)=>{const n=Uc();if(n){const i=new n;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},Hc=(t,e)=>{const n=new ArrayBuffer(t.length),i=new Uint8Array(n);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return rr(n,e)},ar=t=>(/^data:(.+);/.exec(t)||[])[1]||null,qc=t=>t.split(",")[1].replace(/\s/g,""),jc=t=>atob(qc(t)),Vc=t=>{const e=ar(t),n=jc(t);return Hc(n,e)},$c=(t,e,n)=>yt(Vc(t),e,null,n),Wc=t=>{if(!/^content-disposition:/i.test(t))return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return e.length?decodeURI(e[e.length-1]):null},Yc=t=>{if(/content-length:/i.test(t)){const e=t.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},Xc=t=>/x-content-transfer-id:/i.test(t)&&(t.split(":")[1]||"").trim()||null,Ai=t=>{const e={source:null,name:null,size:null},n=t.split(`
`);for(let i of n){const s=Wc(i);if(s){e.name=s;continue}const o=Yc(i);if(o){e.size=o;continue}const r=Xc(i);if(r){e.source=r;continue}}return e},Zc=t=>{const e={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>e.progress,i=()=>{e.request&&e.request.abort&&e.request.abort()},s=()=>{const a=e.source;r.fire("init",a),a instanceof File?r.fire("load",a):a instanceof Blob?r.fire("load",yt(a,a.name)):di(a)?r.fire("load",$c(a)):o(a)},o=a=>{if(!t){r.fire("error",{type:"error",body:"Can't load URL",code:400});return}e.timestamp=Date.now(),e.request=t(a,l=>{e.duration=Date.now()-e.timestamp,e.complete=!0,l instanceof Blob&&(l=yt(l,l.name||Nt(a))),r.fire("load",l instanceof Blob?l:l?l.body:null)},l=>{r.fire("error",typeof l=="string"?{type:"error",code:0,body:l}:l)},(l,d,c)=>{if(c&&(e.size=c),e.duration=Date.now()-e.timestamp,!l){e.progress=null;return}e.progress=d/c,r.fire("progress",e.progress)},()=>{r.fire("abort")},l=>{const d=Ai(typeof l=="string"?l:l.headers);r.fire("meta",{size:e.size||d.size,filename:d.name,source:d.source})})},r={...In(),setSource:a=>e.source=a,getProgress:n,abort:i,load:s};return r},fs=t=>/GET|HEAD/.test(t),et=(t,e,n)=>{const i={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{s=!0,r.abort()}};let s=!1,o=!1;n={method:"POST",headers:{},withCredentials:!1,...n},e=encodeURI(e),fs(n.method)&&t&&(e=`${e}${encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))}`);const r=new XMLHttpRequest,a=fs(n.method)?r:r.upload;return a.onprogress=l=>{s||i.onprogress(l.lengthComputable,l.loaded,l.total)},r.onreadystatechange=()=>{r.readyState<2||r.readyState===4&&r.status===0||o||(o=!0,i.onheaders(r))},r.onload=()=>{r.status>=200&&r.status<300?i.onload(r):i.onerror(r)},r.onerror=()=>i.onerror(r),r.onabort=()=>{s=!0,i.onabort()},r.ontimeout=()=>i.ontimeout(r),r.open(n.method,e,!0),It(n.timeout)&&(r.timeout=n.timeout),Object.keys(n.headers).forEach(l=>{const d=unescape(encodeURIComponent(n.headers[l]));r.setRequestHeader(l,d)}),n.responseType&&(r.responseType=n.responseType),n.withCredentials&&(r.withCredentials=!0),r.send(t),i},K=(t,e,n,i)=>({type:t,code:e,body:n,headers:i}),tt=t=>e=>{t(K("error",0,"Timeout",e.getAllResponseHeaders()))},ps=t=>/\?/.test(t),At=(...t)=>{let e="";return t.forEach(n=>{e+=ps(e)&&ps(n)?n.replace(/\?/,"&"):n}),e},Ln=(t="",e)=>{if(typeof e=="function")return e;if(!e||!le(e.url))return null;const n=e.onload||(s=>s),i=e.onerror||(s=>null);return(s,o,r,a,l,d)=>{const c=et(s,At(t,e.url),{...e,responseType:"blob"});return c.onload=u=>{const p=u.getAllResponseHeaders(),h=Ai(p).name||Nt(s);o(K("load",u.status,e.method==="HEAD"?null:yt(n(u.response),h),p))},c.onerror=u=>{r(K("error",u.status,i(u.response)||u.statusText,u.getAllResponseHeaders()))},c.onheaders=u=>{d(K("headers",u.status,null,u.getAllResponseHeaders()))},c.ontimeout=tt(r),c.onprogress=a,c.onabort=l,c}},ge={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},Kc=(t,e,n,i,s,o,r,a,l,d,c)=>{const u=[],{chunkTransferId:p,chunkServer:h,chunkSize:f,chunkRetryDelays:m}=c,E={serverId:p,aborted:!1},g=e.ondata||(S=>S),b=e.onload||((S,U)=>U==="HEAD"?S.getResponseHeader("Upload-Offset"):S.response),v=e.onerror||(S=>null),R=S=>{const U=new FormData;se(s)&&U.append(n,JSON.stringify(s));const I=typeof e.headers=="function"?e.headers(i,s):{...e.headers,"Upload-Length":i.size},O={...e,headers:I},x=et(g(U),At(t,e.url),O);x.onload=C=>S(b(C,O.method)),x.onerror=C=>r(K("error",C.status,v(C.response)||C.statusText,C.getAllResponseHeaders())),x.ontimeout=tt(r)},P=S=>{const U=At(t,h.url,E.serverId),O={headers:typeof e.headers=="function"?e.headers(E.serverId):{...e.headers},method:"HEAD"},x=et(null,U,O);x.onload=C=>S(b(C,O.method)),x.onerror=C=>r(K("error",C.status,v(C.response)||C.statusText,C.getAllResponseHeaders())),x.ontimeout=tt(r)},D=Math.floor(i.size/f);for(let S=0;S<=D;S++){const U=S*f,I=i.slice(U,U+f,"application/offset+octet-stream");u[S]={index:S,size:I.size,offset:U,data:I,file:i,progress:0,retries:[...m],status:ge.QUEUED,error:null,request:null,timeout:null}}const L=()=>o(E.serverId),_=S=>S.status===ge.QUEUED||S.status===ge.ERROR,N=S=>{if(E.aborted)return;if(S=S||u.find(_),!S){u.every(W=>W.status===ge.COMPLETE)&&L();return}S.status=ge.PROCESSING,S.progress=null;const U=h.ondata||(W=>W),I=h.onerror||(W=>null),O=At(t,h.url,E.serverId),x=typeof h.headers=="function"?h.headers(S):{...h.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":S.offset,"Upload-Length":i.size,"Upload-Name":i.name},C=S.request=et(U(S.data),O,{...h,headers:x});C.onload=()=>{S.status=ge.COMPLETE,S.request=null,F()},C.onprogress=(W,Y,On)=>{S.progress=W?Y:null,M()},C.onerror=W=>{S.status=ge.ERROR,S.request=null,S.error=I(W.response)||W.statusText,z(S)||r(K("error",W.status,I(W.response)||W.statusText,W.getAllResponseHeaders()))},C.ontimeout=W=>{S.status=ge.ERROR,S.request=null,z(S)||tt(r)(W)},C.onabort=()=>{S.status=ge.QUEUED,S.request=null,l()}},z=S=>S.retries.length===0?!1:(S.status=ge.WAITING,clearTimeout(S.timeout),S.timeout=setTimeout(()=>{N(S)},S.retries.shift()),!0),M=()=>{const S=u.reduce((I,O)=>I===null||O.progress===null?null:I+O.progress,0);if(S===null)return a(!1,0,0);const U=u.reduce((I,O)=>I+O.size,0);a(!0,S,U)},F=()=>{u.filter(U=>U.status===ge.PROCESSING).length>=1||N()},k=()=>{u.forEach(S=>{clearTimeout(S.timeout),S.request&&S.request.abort()})};return E.serverId?P(S=>{E.aborted||(u.filter(U=>U.offset<S).forEach(U=>{U.status=ge.COMPLETE,U.progress=U.size}),F())}):R(S=>{E.aborted||(d(S),E.serverId=S,F())}),{abort:()=>{E.aborted=!0,k()}}},Qc=(t,e,n,i)=>(s,o,r,a,l,d,c)=>{if(!s)return;const u=i.chunkUploads,p=u&&s.size>i.chunkSize,h=u&&(p||i.chunkForce);if(s instanceof Blob&&h)return Kc(t,e,n,s,o,r,a,l,d,c,i);const f=e.ondata||(P=>P),m=e.onload||(P=>P),E=e.onerror||(P=>null),g=typeof e.headers=="function"?e.headers(s,o)||{}:{...e.headers},b={...e,headers:g};var v=new FormData;se(o)&&v.append(n,JSON.stringify(o)),(s instanceof Blob?[{name:null,file:s}]:s).forEach(P=>{v.append(n,P.file,P.name===null?P.file.name:`${P.name}${P.file.name}`)});const R=et(f(v),At(t,e.url),b);return R.onload=P=>{r(K("load",P.status,m(P.response),P.getAllResponseHeaders()))},R.onerror=P=>{a(K("error",P.status,E(P.response)||P.statusText,P.getAllResponseHeaders()))},R.ontimeout=tt(a),R.onprogress=l,R.onabort=d,R},Jc=(t="",e,n,i)=>typeof e=="function"?(...s)=>e(n,...s,i):!e||!le(e.url)?null:Qc(t,e,n,i),_t=(t="",e)=>{if(typeof e=="function")return e;if(!e||!le(e.url))return(s,o)=>o();const n=e.onload||(s=>s),i=e.onerror||(s=>null);return(s,o,r)=>{const a=et(s,t+e.url,e);return a.onload=l=>{o(K("load",l.status,n(l.response),l.getAllResponseHeaders()))},a.onerror=l=>{r(K("error",l.status,i(l.response)||l.statusText,l.getAllResponseHeaders()))},a.ontimeout=tt(r),a}},lr=(t=0,e=1)=>t+Math.random()*(e-t),ed=(t,e=1e3,n=0,i=25,s=250)=>{let o=null;const r=Date.now(),a=()=>{let l=Date.now()-r,d=lr(i,s);l+d>e&&(d=l+d-e);let c=l/e;if(c>=1||document.hidden){t(1);return}t(c),o=setTimeout(a,d)};return e>0&&a(),{clear:()=>{clearTimeout(o)}}},td=(t,e)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:i}=e,s=(c,u)=>{const p=()=>{n.duration===0||n.progress===null||d.fire("progress",d.getProgress())},h=()=>{n.complete=!0,d.fire("load-perceived",n.response.body)};d.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=ed(f=>{n.perceivedProgress=f,n.perceivedDuration=Date.now()-n.timestamp,p(),n.response&&n.perceivedProgress===1&&!n.complete&&h()},i?lr(750,1500):0),n.request=t(c,u,f=>{n.response=se(f)?f:{type:"load",code:200,body:`${f}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,d.fire("load",n.response.body),(!i||i&&n.perceivedProgress===1)&&h()},f=>{n.perceivedPerformanceUpdater.clear(),d.fire("error",se(f)?f:{type:"error",code:0,body:`${f}`})},(f,m,E)=>{n.duration=Date.now()-n.timestamp,n.progress=f?m/E:null,p()},()=>{n.perceivedPerformanceUpdater.clear(),d.fire("abort",n.response?n.response.body:null)},f=>{d.fire("transfer",f)})},o=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},r=()=>{o(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},a=i?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,l=i?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,d={...In(),process:s,abort:o,getProgress:a,getDuration:l,reset:r};return d},cr=t=>t.substring(0,t.lastIndexOf("."))||t,nd=t=>{let e=[t.name,t.size,t.type];return t instanceof Blob||di(t)?e[0]=t.name||or():di(t)?(e[1]=t.length,e[2]=ar(t)):le(t)&&(e[0]=Nt(t),e[1]=0,e[2]="application/octet-stream"),{name:e[0],size:e[1],type:e[2]}},nt=t=>!!(t instanceof File||t instanceof Blob&&t.name),dr=t=>{if(!se(t))return t;const e=yn(t)?[]:{};for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n];e[n]=i&&se(i)?dr(i):i}return e},id=(t=null,e=null,n=null)=>{const i=wi(),s={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:e,transferId:null,processingAborted:!1,status:e?B.PROCESSING_COMPLETE:B.INIT,activeLoader:null,activeProcessor:null};let o=null;const r={},a=_=>s.status=_,l=(_,...N)=>{s.released||s.frozen||D.fire(_,...N)},d=()=>Rn(s.file.name),c=()=>s.file.type,u=()=>s.file.size,p=()=>s.file,h=(_,N,z)=>{if(s.source=_,D.fireSync("init"),s.file){D.fireSync("load-skip");return}s.file=nd(_),N.on("init",()=>{l("load-init")}),N.on("meta",M=>{s.file.size=M.size,s.file.filename=M.filename,M.source&&(t=ne.LIMBO,s.serverFileReference=M.source,s.status=B.PROCESSING_COMPLETE),l("load-meta")}),N.on("progress",M=>{a(B.LOADING),l("load-progress",M)}),N.on("error",M=>{a(B.LOAD_ERROR),l("load-request-error",M)}),N.on("abort",()=>{a(B.INIT),l("load-abort")}),N.on("load",M=>{s.activeLoader=null;const F=S=>{s.file=nt(S)?S:s.file,t===ne.LIMBO&&s.serverFileReference?a(B.PROCESSING_COMPLETE):a(B.IDLE),l("load")},k=S=>{s.file=M,l("load-meta"),a(B.LOAD_ERROR),l("load-file-error",S)};if(s.serverFileReference){F(M);return}z(M,F,k)}),N.setSource(_),s.activeLoader=N,N.load()},f=()=>{s.activeLoader&&s.activeLoader.load()},m=()=>{if(s.activeLoader){s.activeLoader.abort();return}a(B.INIT),l("load-abort")},E=(_,N)=>{if(s.processingAborted){s.processingAborted=!1;return}if(a(B.PROCESSING),o=null,!(s.file instanceof Blob)){D.on("load",()=>{E(_,N)});return}_.on("load",F=>{s.transferId=null,s.serverFileReference=F}),_.on("transfer",F=>{s.transferId=F}),_.on("load-perceived",F=>{s.activeProcessor=null,s.transferId=null,s.serverFileReference=F,a(B.PROCESSING_COMPLETE),l("process-complete",F)}),_.on("start",()=>{l("process-start")}),_.on("error",F=>{s.activeProcessor=null,a(B.PROCESSING_ERROR),l("process-error",F)}),_.on("abort",F=>{s.activeProcessor=null,s.serverFileReference=F,a(B.IDLE),l("process-abort"),o&&o()}),_.on("progress",F=>{l("process-progress",F)});const z=F=>{s.archived||_.process(F,{...r})},M=console.error;N(s.file,z,M),s.activeProcessor=_},g=()=>{s.processingAborted=!1,a(B.PROCESSING_QUEUED)},b=()=>new Promise(_=>{if(!s.activeProcessor){s.processingAborted=!0,a(B.IDLE),l("process-abort"),_();return}o=()=>{_()},s.activeProcessor.abort()}),v=(_,N)=>new Promise((z,M)=>{const F=s.serverFileReference!==null?s.serverFileReference:s.transferId;if(F===null){z();return}_(F,()=>{s.serverFileReference=null,s.transferId=null,z()},k=>{if(!N){z();return}a(B.PROCESSING_REVERT_ERROR),l("process-revert-error"),M(k)}),a(B.IDLE),l("process-revert")}),R=(_,N,z)=>{const M=_.split("."),F=M[0],k=M.pop();let S=r;M.forEach(U=>S=S[U]),JSON.stringify(S[k])!==JSON.stringify(N)&&(S[k]=N,l("metadata-update",{key:F,value:r[F],silent:z}))},D={id:{get:()=>i},origin:{get:()=>t,set:_=>t=_},serverId:{get:()=>s.serverFileReference},transferId:{get:()=>s.transferId},status:{get:()=>s.status},filename:{get:()=>s.file.name},filenameWithoutExtension:{get:()=>cr(s.file.name)},fileExtension:{get:d},fileType:{get:c},fileSize:{get:u},file:{get:p},relativePath:{get:()=>s.file._relativePath},source:{get:()=>s.source},getMetadata:_=>dr(_?r[_]:r),setMetadata:(_,N,z)=>{if(se(_)){const M=_;return Object.keys(M).forEach(F=>{R(F,M[F],N)}),_}return R(_,N,z),N},extend:(_,N)=>L[_]=N,abortLoad:m,retryLoad:f,requestProcessing:g,abortProcessing:b,load:h,process:E,revert:v,...In(),freeze:()=>s.frozen=!0,release:()=>s.released=!0,released:{get:()=>s.released},archive:()=>s.archived=!0,archived:{get:()=>s.archived},setFile:_=>s.file=_},L=qe(D);return L},sd=(t,e)=>Be(e)?0:le(e)?t.findIndex(n=>n.id===e):-1,ms=(t,e)=>{const n=sd(t,e);if(!(n<0))return t[n]||null},gs=(t,e,n,i,s,o)=>{const r=et(null,t,{method:"GET",responseType:"blob"});return r.onload=a=>{const l=a.getAllResponseHeaders(),d=Ai(l).name||Nt(t);e(K("load",a.status,yt(a.response,d),l))},r.onerror=a=>{n(K("error",a.status,a.statusText,a.getAllResponseHeaders()))},r.onheaders=a=>{o(K("headers",a.status,null,a.getAllResponseHeaders()))},r.ontimeout=tt(n),r.onprogress=i,r.onabort=s,r},Es=t=>(t.indexOf("//")===0&&(t=location.protocol+t),t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),od=t=>(t.indexOf(":")>-1||t.indexOf("//")>-1)&&Es(location.href)!==Es(t),Gt=t=>(...e)=>Ze(t)?t(...e):t,rd=t=>!nt(t.file),Mn=(t,e)=>{clearTimeout(e.listUpdateTimeout),e.listUpdateTimeout=setTimeout(()=>{t("DID_UPDATE_ITEMS",{items:_e(e.items)})},0)},bs=(t,...e)=>new Promise(n=>{if(!t)return n(!0);const i=t(...e);if(i==null)return n(!0);if(typeof i=="boolean")return n(i);typeof i.then=="function"&&i.then(n)}),xn=(t,e)=>{t.items.sort((n,i)=>e(ue(n),ue(i)))},Ee=(t,e)=>({query:n,success:i=()=>{},failure:s=()=>{},...o}={})=>{const r=Ke(t.items,n);if(!r){s({error:K("error",0,"Item not found"),file:null});return}e(r,i,s,o||{})},ad=(t,e,n)=>({ABORT_ALL:()=>{_e(n.items).forEach(i=>{i.freeze(),i.abortLoad(),i.abortProcessing()})},DID_SET_FILES:({value:i=[]})=>{const s=i.map(r=>({source:r.source?r.source:r,options:r.options}));let o=_e(n.items);o.forEach(r=>{s.find(a=>a.source===r.source||a.source===r.file)||t("REMOVE_ITEM",{query:r,remove:!1})}),o=_e(n.items),s.forEach((r,a)=>{o.find(l=>l.source===r.source||l.file===r.source)||t("ADD_ITEM",{...r,interactionMethod:Ie.NONE,index:a})})},DID_UPDATE_ITEM_METADATA:({id:i,action:s,change:o})=>{o.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const r=ms(n.items,i);if(!e("IS_ASYNC")){Se("SHOULD_PREPARE_OUTPUT",!1,{item:r,query:e,action:s,change:o}).then(c=>{const u=e("GET_BEFORE_PREPARE_FILE");u&&(c=u(r,c)),c&&t("REQUEST_PREPARE_OUTPUT",{query:i,item:r,success:p=>{t("DID_PREPARE_OUTPUT",{id:i,file:p})}},!0)});return}r.origin===ne.LOCAL&&t("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.source});const a=()=>{setTimeout(()=>{t("REQUEST_ITEM_PROCESSING",{query:i})},32)},l=c=>{r.revert(_t(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(c?a:()=>{}).catch(()=>{})},d=c=>{r.abortProcessing().then(c?a:()=>{})};if(r.status===B.PROCESSING_COMPLETE)return l(n.options.instantUpload);if(r.status===B.PROCESSING)return d(n.options.instantUpload);n.options.instantUpload&&a()},0))},MOVE_ITEM:({query:i,index:s})=>{const o=Ke(n.items,i);if(!o)return;const r=n.items.indexOf(o);s=sr(s,0,n.items.length-1),r!==s&&n.items.splice(s,0,n.items.splice(r,1)[0])},SORT:({compare:i})=>{xn(n,i),t("DID_SORT_ITEMS",{items:e("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:i,index:s,interactionMethod:o,success:r=()=>{},failure:a=()=>{}})=>{let l=s;if(s===-1||typeof s>"u"){const h=e("GET_ITEM_INSERT_LOCATION"),f=e("GET_TOTAL_ITEMS");l=h==="before"?0:f}const d=e("GET_IGNORED_FILES"),c=h=>nt(h)?!d.includes(h.name.toLowerCase()):!Be(h),p=i.filter(c).map(h=>new Promise((f,m)=>{t("ADD_ITEM",{interactionMethod:o,source:h.source||h,success:f,failure:m,index:l++,options:h.options||{}})}));Promise.all(p).then(r).catch(a)},ADD_ITEM:({source:i,index:s=-1,interactionMethod:o,success:r=()=>{},failure:a=()=>{},options:l={}})=>{if(Be(i)){a({error:K("error",0,"No source"),file:null});return}if(nt(i)&&n.options.ignoredFiles.includes(i.name.toLowerCase()))return;if(!Bc(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const b=K("warning",0,"Max files");t("DID_THROW_MAX_FILES",{source:i,error:b}),a({error:b,file:null});return}const g=_e(n.items)[0];if(g.status===B.PROCESSING_COMPLETE||g.status===B.PROCESSING_REVERT_ERROR){const b=e("GET_FORCE_REVERT");if(g.revert(_t(n.options.server.url,n.options.server.revert),b).then(()=>{b&&t("ADD_ITEM",{source:i,index:s,interactionMethod:o,success:r,failure:a,options:l})}).catch(()=>{}),b)return}t("REMOVE_ITEM",{query:g.id})}const d=l.type==="local"?ne.LOCAL:l.type==="limbo"?ne.LIMBO:ne.INPUT,c=id(d,d===ne.INPUT?null:i,l.file);Object.keys(l.metadata||{}).forEach(g=>{c.setMetadata(g,l.metadata[g])}),at("DID_CREATE_ITEM",c,{query:e,dispatch:t});const u=e("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(s=u==="before"?-1:n.items.length),zc(n.items,c,s),Ze(u)&&i&&xn(n,u);const p=c.id;c.on("init",()=>{t("DID_INIT_ITEM",{id:p})}),c.on("load-init",()=>{t("DID_START_ITEM_LOAD",{id:p})}),c.on("load-meta",()=>{t("DID_UPDATE_ITEM_META",{id:p})}),c.on("load-progress",g=>{t("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:g})}),c.on("load-request-error",g=>{const b=Gt(n.options.labelFileLoadError)(g);if(g.code>=400&&g.code<500){t("DID_THROW_ITEM_INVALID",{id:p,error:g,status:{main:b,sub:`${g.code} (${g.body})`}}),a({error:g,file:ue(c)});return}t("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:g,status:{main:b,sub:n.options.labelTapToRetry}})}),c.on("load-file-error",g=>{t("DID_THROW_ITEM_INVALID",{id:p,error:g.status,status:g.status}),a({error:g.status,file:ue(c)})}),c.on("load-abort",()=>{t("REMOVE_ITEM",{query:p})}),c.on("load-skip",()=>{c.on("metadata-update",g=>{nt(c.file)&&t("DID_UPDATE_ITEM_METADATA",{id:p,change:g})}),t("COMPLETE_LOAD_ITEM",{query:p,item:c,data:{source:i,success:r}})}),c.on("load",()=>{const g=b=>{if(!b){t("REMOVE_ITEM",{query:p});return}c.on("metadata-update",v=>{t("DID_UPDATE_ITEM_METADATA",{id:p,change:v})}),Se("SHOULD_PREPARE_OUTPUT",!1,{item:c,query:e}).then(v=>{const R=e("GET_BEFORE_PREPARE_FILE");R&&(v=R(c,v));const P=()=>{t("COMPLETE_LOAD_ITEM",{query:p,item:c,data:{source:i,success:r}}),Mn(t,n)};if(v){t("REQUEST_PREPARE_OUTPUT",{query:p,item:c,success:D=>{t("DID_PREPARE_OUTPUT",{id:p,file:D}),P()}},!0);return}P()})};Se("DID_LOAD_ITEM",c,{query:e,dispatch:t}).then(()=>{bs(e("GET_BEFORE_ADD_FILE"),ue(c)).then(g)}).catch(b=>{if(!b||!b.error||!b.status)return g(!1);t("DID_THROW_ITEM_INVALID",{id:p,error:b.error,status:b.status})})}),c.on("process-start",()=>{t("DID_START_ITEM_PROCESSING",{id:p})}),c.on("process-progress",g=>{t("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:g})}),c.on("process-error",g=>{t("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,error:g,status:{main:Gt(n.options.labelFileProcessingError)(g),sub:n.options.labelTapToRetry}})}),c.on("process-revert-error",g=>{t("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:p,error:g,status:{main:Gt(n.options.labelFileProcessingRevertError)(g),sub:n.options.labelTapToRetry}})}),c.on("process-complete",g=>{t("DID_COMPLETE_ITEM_PROCESSING",{id:p,error:null,serverFileReference:g}),t("DID_DEFINE_VALUE",{id:p,value:g})}),c.on("process-abort",()=>{t("DID_ABORT_ITEM_PROCESSING",{id:p})}),c.on("process-revert",()=>{t("DID_REVERT_ITEM_PROCESSING",{id:p}),t("DID_DEFINE_VALUE",{id:p,value:null})}),t("DID_ADD_ITEM",{id:p,index:s,interactionMethod:o}),Mn(t,n);const{url:h,load:f,restore:m,fetch:E}=n.options.server||{};c.load(i,Zc(d===ne.INPUT?le(i)&&od(i)&&E?Ln(h,E):gs:d===ne.LIMBO?Ln(h,m):Ln(h,f)),(g,b,v)=>{Se("LOAD_FILE",g,{query:e}).then(b).catch(v)})},REQUEST_PREPARE_OUTPUT:({item:i,success:s,failure:o=()=>{}})=>{const r={error:K("error",0,"Item not found"),file:null};if(i.archived)return o(r);Se("PREPARE_OUTPUT",i.file,{query:e,item:i}).then(a=>{Se("COMPLETE_PREPARE_OUTPUT",a,{query:e,item:i}).then(l=>{if(i.archived)return o(r);s(l)})})},COMPLETE_LOAD_ITEM:({item:i,data:s})=>{const{success:o,source:r}=s,a=e("GET_ITEM_INSERT_LOCATION");if(Ze(a)&&r&&xn(n,a),t("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.origin===ne.INPUT?null:r}),o(ue(i)),i.origin===ne.LOCAL){t("DID_LOAD_LOCAL_ITEM",{id:i.id});return}if(i.origin===ne.LIMBO){t("DID_COMPLETE_ITEM_PROCESSING",{id:i.id,error:null,serverFileReference:r}),t("DID_DEFINE_VALUE",{id:i.id,value:i.serverId||r});return}e("IS_ASYNC")&&n.options.instantUpload&&t("REQUEST_ITEM_PROCESSING",{query:i.id})},RETRY_ITEM_LOAD:Ee(n,i=>{i.retryLoad()}),REQUEST_ITEM_PREPARE:Ee(n,(i,s,o)=>{t("REQUEST_PREPARE_OUTPUT",{query:i.id,item:i,success:r=>{t("DID_PREPARE_OUTPUT",{id:i.id,file:r}),s({file:i,output:r})},failure:o},!0)}),REQUEST_ITEM_PROCESSING:Ee(n,(i,s,o)=>{if(!(i.status===B.IDLE||i.status===B.PROCESSING_ERROR)){const a=()=>t("REQUEST_ITEM_PROCESSING",{query:i,success:s,failure:o}),l=()=>document.hidden?a():setTimeout(a,32);i.status===B.PROCESSING_COMPLETE||i.status===B.PROCESSING_REVERT_ERROR?i.revert(_t(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(l).catch(()=>{}):i.status===B.PROCESSING&&i.abortProcessing().then(l);return}i.status!==B.PROCESSING_QUEUED&&(i.requestProcessing(),t("DID_REQUEST_ITEM_PROCESSING",{id:i.id}),t("PROCESS_ITEM",{query:i,success:s,failure:o},!0))}),PROCESS_ITEM:Ee(n,(i,s,o)=>{const r=e("GET_MAX_PARALLEL_UPLOADS");if(e("GET_ITEMS_BY_STATUS",B.PROCESSING).length===r){n.processingQueue.push({id:i.id,success:s,failure:o});return}if(i.status===B.PROCESSING)return;const l=()=>{const c=n.processingQueue.shift();if(!c)return;const{id:u,success:p,failure:h}=c,f=Ke(n.items,u);if(!f||f.archived){l();return}t("PROCESS_ITEM",{query:u,success:p,failure:h},!0)};i.onOnce("process-complete",()=>{s(ue(i)),l();const c=n.options.server;if(n.options.instantUpload&&i.origin===ne.LOCAL&&Ze(c.remove)){const h=()=>{};i.origin=ne.LIMBO,n.options.server.remove(i.source,h,h)}e("GET_ITEMS_BY_STATUS",B.PROCESSING_COMPLETE).length===n.items.length&&t("DID_COMPLETE_ITEM_PROCESSING_ALL")}),i.onOnce("process-error",c=>{o({error:c,file:ue(i)}),l()});const d=n.options;i.process(td(Jc(d.server.url,d.server.process,d.name,{chunkTransferId:i.transferId,chunkServer:d.server.patch,chunkUploads:d.chunkUploads,chunkForce:d.chunkForce,chunkSize:d.chunkSize,chunkRetryDelays:d.chunkRetryDelays}),{allowMinimumUploadDuration:e("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(c,u,p)=>{Se("PREPARE_OUTPUT",c,{query:e,item:i}).then(h=>{t("DID_PREPARE_OUTPUT",{id:i.id,file:h}),u(h)}).catch(p)})}),RETRY_ITEM_PROCESSING:Ee(n,i=>{t("REQUEST_ITEM_PROCESSING",{query:i})}),REQUEST_REMOVE_ITEM:Ee(n,i=>{bs(e("GET_BEFORE_REMOVE_FILE"),ue(i)).then(s=>{s&&t("REMOVE_ITEM",{query:i})})}),RELEASE_ITEM:Ee(n,i=>{i.release()}),REMOVE_ITEM:Ee(n,(i,s,o,r)=>{const a=()=>{const d=i.id;ms(n.items,d).archive(),t("DID_REMOVE_ITEM",{error:null,id:d,item:i}),Mn(t,n),s(ue(i))},l=n.options.server;i.origin===ne.LOCAL&&l&&Ze(l.remove)&&r.remove!==!1?(t("DID_START_ITEM_REMOVE",{id:i.id}),l.remove(i.source,()=>a(),d=>{t("DID_THROW_ITEM_REMOVE_ERROR",{id:i.id,error:K("error",0,d,null),status:{main:Gt(n.options.labelFileRemoveError)(d),sub:n.options.labelTapToRetry}})})):((r.revert&&i.origin!==ne.LOCAL&&i.serverId!==null||n.options.chunkUploads&&i.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&i.revert(_t(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")),a())}),ABORT_ITEM_LOAD:Ee(n,i=>{i.abortLoad()}),ABORT_ITEM_PROCESSING:Ee(n,i=>{if(i.serverId){t("REVERT_ITEM_PROCESSING",{id:i.id});return}i.abortProcessing().then(()=>{n.options.instantUpload&&t("REMOVE_ITEM",{query:i.id})})}),REQUEST_REVERT_ITEM_PROCESSING:Ee(n,i=>{if(!n.options.instantUpload){t("REVERT_ITEM_PROCESSING",{query:i});return}const s=a=>{a&&t("REVERT_ITEM_PROCESSING",{query:i})},o=e("GET_BEFORE_REMOVE_FILE");if(!o)return s(!0);const r=o(ue(i));if(r==null)return s(!0);if(typeof r=="boolean")return s(r);typeof r.then=="function"&&r.then(s)}),REVERT_ITEM_PROCESSING:Ee(n,i=>{i.revert(_t(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||rd(i))&&t("REMOVE_ITEM",{query:i.id})}).catch(()=>{})}),SET_OPTIONS:({options:i})=>{const s=Object.keys(i),o=ld.filter(a=>s.includes(a));[...o,...Object.keys(i).filter(a=>!o.includes(a))].forEach(a=>{t(`SET_${Tn(a,"_").toUpperCase()}`,{value:i[a]})})}}),ld=["server"],Ci=t=>t,Ge=t=>document.createElement(t),Q=(t,e)=>{let n=t.childNodes[0];n?e!==n.nodeValue&&(n.nodeValue=e):(n=document.createTextNode(e),t.appendChild(n))},ys=(t,e,n,i)=>{const s=(i%360-90)*Math.PI/180;return{x:t+n*Math.cos(s),y:e+n*Math.sin(s)}},cd=(t,e,n,i,s,o)=>{const r=ys(t,e,n,s),a=ys(t,e,n,i);return["M",r.x,r.y,"A",n,n,0,o,0,a.x,a.y].join(" ")},dd=(t,e,n,i,s)=>{let o=1;return s>i&&s-i<=.5&&(o=0),i>s&&i-s>=.5&&(o=0),cd(t,e,n,Math.min(.9999,i)*360,Math.min(.9999,s)*360,o)},ud=({root:t,props:e})=>{e.spin=!1,e.progress=0,e.opacity=0;const n=an("svg");t.ref.path=an("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(t.ref.path),t.ref.svg=n,t.appendChild(n)},hd=({root:t,props:e})=>{if(e.opacity===0)return;e.align&&(t.element.dataset.align=e.align);const n=parseInt(ee(t.ref.path,"stroke-width"),10),i=t.rect.element.width*.5;let s=0,o=0;e.spin?(s=0,o=.5):(s=0,o=e.progress);const r=dd(i,i,i-n,s,o);ee(t.ref.path,"d",r),ee(t.ref.path,"stroke-opacity",e.spin||e.progress>0?1:0)},vs=te({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:ud,write:hd,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),fd=({root:t,props:e})=>{t.element.innerHTML=(e.icon||"")+`<span>${e.label}</span>`,e.isDisabled=!1},pd=({root:t,props:e})=>{const{isDisabled:n}=e,i=t.query("GET_DISABLED")||e.opacity===0;i&&!n?(e.isDisabled=!0,ee(t.element,"disabled","disabled")):!i&&n&&(e.isDisabled=!1,t.element.removeAttribute("disabled"))},ur=te({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:fd,write:pd}),hr=(t,e=".",n=1e3,i={})=>{const{labelBytes:s="bytes",labelKilobytes:o="KB",labelMegabytes:r="MB",labelGigabytes:a="GB"}=i;t=Math.round(Math.abs(t));const l=n,d=n*n,c=n*n*n;return t<l?`${t} ${s}`:t<d?`${Math.floor(t/l)} ${o}`:t<c?`${Ts(t/d,1,e)} ${r}`:`${Ts(t/c,2,e)} ${a}`},Ts=(t,e,n)=>t.toFixed(e).split(".").filter(i=>i!=="0").join(n),md=({root:t,props:e})=>{const n=Ge("span");n.className="filepond--file-info-main",ee(n,"aria-hidden","true"),t.appendChild(n),t.ref.fileName=n;const i=Ge("span");i.className="filepond--file-info-sub",t.appendChild(i),t.ref.fileSize=i,Q(i,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Q(n,Ci(t.query("GET_ITEM_NAME",e.id)))},ui=({root:t,props:e})=>{Q(t.ref.fileSize,hr(t.query("GET_ITEM_SIZE",e.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),Q(t.ref.fileName,Ci(t.query("GET_ITEM_NAME",e.id)))},Is=({root:t,props:e})=>{if(It(t.query("GET_ITEM_SIZE",e.id))){ui({root:t,props:e});return}Q(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},gd=te({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:ce({DID_LOAD_ITEM:ui,DID_UPDATE_ITEM_META:ui,DID_THROW_ITEM_LOAD_ERROR:Is,DID_THROW_ITEM_INVALID:Is}),didCreateView:t=>{at("CREATE_VIEW",{...t,view:t})},create:md,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),fr=t=>Math.round(t*100),Ed=({root:t})=>{const e=Ge("span");e.className="filepond--file-status-main",t.appendChild(e),t.ref.main=e;const n=Ge("span");n.className="filepond--file-status-sub",t.appendChild(n),t.ref.sub=n,pr({root:t,action:{progress:null}})},pr=({root:t,action:e})=>{const n=e.progress===null?t.query("GET_LABEL_FILE_LOADING"):`${t.query("GET_LABEL_FILE_LOADING")} ${fr(e.progress)}%`;Q(t.ref.main,n),Q(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},bd=({root:t,action:e})=>{const n=e.progress===null?t.query("GET_LABEL_FILE_PROCESSING"):`${t.query("GET_LABEL_FILE_PROCESSING")} ${fr(e.progress)}%`;Q(t.ref.main,n),Q(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},yd=({root:t})=>{Q(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),Q(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},vd=({root:t})=>{Q(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Q(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},Td=({root:t})=>{Q(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Q(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},Rs=({root:t})=>{Q(t.ref.main,""),Q(t.ref.sub,"")},Ot=({root:t,action:e})=>{Q(t.ref.main,e.status.main),Q(t.ref.sub,e.status.sub)},Id=te({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:ce({DID_LOAD_ITEM:Rs,DID_REVERT_ITEM_PROCESSING:Rs,DID_REQUEST_ITEM_PROCESSING:yd,DID_ABORT_ITEM_PROCESSING:vd,DID_COMPLETE_ITEM_PROCESSING:Td,DID_UPDATE_ITEM_PROCESS_PROGRESS:bd,DID_UPDATE_ITEM_LOAD_PROGRESS:pr,DID_THROW_ITEM_LOAD_ERROR:Ot,DID_THROW_ITEM_INVALID:Ot,DID_THROW_ITEM_PROCESSING_ERROR:Ot,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Ot,DID_THROW_ITEM_REMOVE_ERROR:Ot}),didCreateView:t=>{at("CREATE_VIEW",{...t,view:t})},create:Ed,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),hi={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},fi=[];Z(hi,t=>{fi.push(t)});const me=t=>{if(pi(t)==="right")return 0;const e=t.ref.buttonRemoveItem.rect.element;return e.hidden?null:e.width+e.left},Rd=t=>t.ref.buttonAbortItemLoad.rect.element.width,zt=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.height/4),Sd=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.left/2),_d=t=>t.query("GET_STYLE_LOAD_INDICATOR_POSITION"),Od=t=>t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),pi=t=>t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),wd={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:_d},processProgressIndicator:{opacity:0,align:Od},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Ss={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:me},status:{translateX:me}},Nn={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Et={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:me},status:{translateX:me,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:me},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:pi},info:{translateX:me},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:pi},buttonRemoveItem:{opacity:1},info:{translateX:me},status:{opacity:1,translateX:me}},DID_LOAD_ITEM:Ss,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:me},status:{translateX:me}},DID_START_ITEM_PROCESSING:Nn,DID_REQUEST_ITEM_PROCESSING:Nn,DID_UPDATE_ITEM_PROCESS_PROGRESS:Nn,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:me}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:me},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Ss},Pd=te({create:({root:t})=>{t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Dd=({root:t,props:e})=>{const n=Object.keys(hi).reduce((f,m)=>(f[m]={...hi[m]},f),{}),{id:i}=e,s=t.query("GET_ALLOW_REVERT"),o=t.query("GET_ALLOW_REMOVE"),r=t.query("GET_ALLOW_PROCESS"),a=t.query("GET_INSTANT_UPLOAD"),l=t.query("IS_ASYNC"),d=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let c;l?r&&!s?c=f=>!/RevertItemProcessing/.test(f):!r&&s?c=f=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(f):!r&&!s&&(c=f=>!/Process/.test(f)):c=f=>!/Process/.test(f);const u=c?fi.filter(c):fi.concat();if(a&&s&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),l&&!s){const f=Et.DID_COMPLETE_ITEM_PROCESSING;f.info.translateX=Sd,f.info.translateY=zt,f.status.translateY=zt,f.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(l&&!r&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(f=>{Et[f].status.translateY=zt}),Et.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Rd),d&&s){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const f=Et.DID_COMPLETE_ITEM_PROCESSING;f.info.translateX=me,f.status.translateY=zt,f.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}o||(n.RemoveItem.disabled=!0),Z(n,(f,m)=>{const E=t.createChildView(ur,{label:t.query(m.label),icon:t.query(m.icon),opacity:0});u.includes(f)&&t.appendChildView(E),m.disabled&&(E.element.setAttribute("disabled","disabled"),E.element.setAttribute("hidden","hidden")),E.element.dataset.align=t.query(`GET_STYLE_${m.align}`),E.element.classList.add(m.className),E.on("click",g=>{g.stopPropagation(),!m.disabled&&t.dispatch(m.action,{query:i})}),t.ref[`button${f}`]=E}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(Pd)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(gd,{id:i})),t.ref.status=t.appendChildView(t.createChildView(Id,{id:i}));const p=t.appendChildView(t.createChildView(vs,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));p.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=p;const h=t.appendChildView(t.createChildView(vs,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));h.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=h,t.ref.activeStyles=[]},Ad=({root:t,actions:e,props:n})=>{Cd({root:t,actions:e,props:n});let i=e.concat().filter(s=>/^DID_/.test(s.type)).reverse().find(s=>Et[s.type]);if(i){t.ref.activeStyles=[];const s=Et[i.type];Z(wd,(o,r)=>{const a=t.ref[o];Z(r,(l,d)=>{const c=s[o]&&typeof s[o][l]<"u"?s[o][l]:d;t.ref.activeStyles.push({control:a,key:l,value:c})})})}t.ref.activeStyles.forEach(({control:s,key:o,value:r})=>{s[o]=typeof r=="function"?r(t):r})},Cd=ce({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:t,action:e})=>{t.ref.buttonAbortItemProcessing.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:t,action:e})=>{t.ref.buttonAbortItemLoad.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:t,action:e})=>{t.ref.buttonAbortItemRemoval.label=e.value},DID_REQUEST_ITEM_PROCESSING:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:t})=>{t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:t,action:e})=>{t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=e.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:t,action:e})=>{t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=e.progress}}),Ld=te({create:Dd,write:Ad,didCreateView:t=>{at("CREATE_VIEW",{...t,view:t})},name:"file"}),Md=({root:t,props:e})=>{t.ref.fileName=Ge("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(Ld,{id:e.id})),t.ref.data=!1},xd=({root:t,props:e})=>{Q(t.ref.fileName,Ci(t.query("GET_ITEM_NAME",e.id)))},Nd=te({create:Md,ignoreRect:!0,write:ce({DID_LOAD_ITEM:xd}),didCreateView:t=>{at("CREATE_VIEW",{...t,view:t})},tag:"fieldset",name:"file-wrapper"}),_s={type:"spring",damping:.6,mass:7},Fd=({root:t,props:e})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:_s},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:_s},styles:["translateY"]}}].forEach(n=>{Bd(t,n,e.name)}),t.element.classList.add(`filepond--${e.name}`),t.ref.scalable=null},Bd=(t,e,n)=>{const i=te({name:`panel-${e.name} filepond--${n}`,mixins:e.mixins,ignoreRectUpdate:!0}),s=t.createChildView(i,e.props);t.ref[e.name]=t.appendChildView(s)},Gd=({root:t,props:e})=>{if((t.ref.scalable===null||e.scalable!==t.ref.scalable)&&(t.ref.scalable=Zo(e.scalable)?e.scalable:!0,t.element.dataset.scalable=t.ref.scalable),!e.height)return;const n=t.ref.top.rect.element,i=t.ref.bottom.rect.element,s=Math.max(n.height+i.height,e.height);t.ref.center.translateY=n.height,t.ref.center.scaleY=(s-n.height-i.height)/100,t.ref.bottom.translateY=s-i.height},mr=te({name:"panel",read:({root:t,props:e})=>e.heightCurrent=t.ref.bottom.translateY,write:Gd,create:Fd,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),zd=t=>{const e=t.map(i=>i.id);let n;return{setIndex:i=>{n=i},getIndex:()=>n,getItemIndex:i=>e.indexOf(i.id)}},Os={type:"spring",stiffness:.75,damping:.45,mass:10},ws="spring",Ps={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},kd=({root:t,props:e})=>{if(t.ref.handleClick=i=>t.dispatch("DID_ACTIVATE_ITEM",{id:e.id}),t.element.id=`filepond--item-${e.id}`,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(Nd,{id:e.id})),t.ref.panel=t.appendChildView(t.createChildView(mr,{name:"item-panel"})),t.ref.panel.height=null,e.markedForRemoval=!1,!t.query("GET_ALLOW_REORDER"))return;t.element.dataset.dragState="idle";const n=i=>{if(!i.isPrimary)return;let s=!1;const o={x:i.pageX,y:i.pageY};e.dragOrigin={x:t.translateX,y:t.translateY},e.dragCenter={x:i.offsetX,y:i.offsetY};const r=zd(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:e.id,dragState:r});const a=u=>{if(!u.isPrimary)return;u.stopPropagation(),u.preventDefault(),e.dragOffset={x:u.pageX-o.x,y:u.pageY-o.y},e.dragOffset.x*e.dragOffset.x+e.dragOffset.y*e.dragOffset.y>16&&!s&&(s=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:e.id,dragState:r})},l=u=>{u.isPrimary&&(e.dragOffset={x:u.pageX-o.x,y:u.pageY-o.y},c())},d=()=>{c()},c=()=>{document.removeEventListener("pointercancel",d),document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),t.dispatch("DID_DROP_ITEM",{id:e.id,dragState:r}),s&&setTimeout(()=>t.element.addEventListener("click",t.ref.handleClick),0)};document.addEventListener("pointercancel",d),document.addEventListener("pointermove",a),document.addEventListener("pointerup",l)};t.element.addEventListener("pointerdown",n)},Ud=ce({DID_UPDATE_PANEL_HEIGHT:({root:t,action:e})=>{t.height=e.height}}),Hd=ce({DID_GRAB_ITEM:({root:t,props:e})=>{e.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:({root:t})=>{t.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:t,props:e})=>{e.dragOffset=null,e.dragOrigin=null,t.element.dataset.dragState="drop"}},({root:t,actions:e,props:n,shouldOptimize:i})=>{t.element.dataset.dragState==="drop"&&t.scaleX<=1&&(t.element.dataset.dragState="idle");let s=e.concat().filter(r=>/^DID_/.test(r.type)).reverse().find(r=>Ps[r.type]);s&&s.type!==n.currentState&&(n.currentState=s.type,t.element.dataset.filepondItemState=Ps[n.currentState]||"");const o=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");o?i||(t.height=t.rect.element.width*o):(Ud({root:t,actions:e,props:n}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),i&&(t.ref.panel.height=null),t.ref.panel.height=t.height}),qd=te({create:kd,write:Hd,destroy:({root:t,props:e})=>{t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:e.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:ws,scaleY:ws,translateX:Os,translateY:Os,opacity:{type:"tween",duration:150}}}});var Li=(t,e)=>Math.max(1,Math.floor((t+1)/e));const Mi=(t,e,n)=>{if(!n)return;const i=t.rect.element.width,s=e.length;let o=null;if(s===0||n.top<e[0].rect.element.top)return-1;const a=e[0].rect.element,l=a.marginLeft+a.marginRight,d=a.width+l,c=Li(i,d);if(c===1){for(let h=0;h<s;h++){const f=e[h],m=f.rect.outer.top+f.rect.element.height*.5;if(n.top<m)return h}return s}const u=a.marginTop+a.marginBottom,p=a.height+u;for(let h=0;h<s;h++){const f=h%c,m=Math.floor(h/c),E=f*d,g=m*p,b=g-a.marginTop,v=E+d,R=g+p+a.marginBottom;if(n.top<R&&n.top>b){if(n.left<v)return h;h!==s-1?o=h:o=null}}return o!==null?o:s},kt={height:0,width:0,get getHeight(){return this.height},set setHeight(t){(this.height===0||t===0)&&(this.height=t)},get getWidth(){return this.width},set setWidth(t){(this.width===0||t===0)&&(this.width=t)},setDimensions:function(t,e){(this.height===0||t===0)&&(this.height=t),(this.width===0||e===0)&&(this.width=e)}},jd=({root:t})=>{ee(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},Vd=({root:t,action:e})=>{const{id:n,index:i,interactionMethod:s}=e;t.ref.addIndex=i;const o=Date.now();let r=o,a=1;if(s!==Ie.NONE){a=0;const l=t.query("GET_ITEM_INSERT_INTERVAL"),d=o-t.ref.lastItemSpanwDate;r=d<l?o+(l-d):o}t.ref.lastItemSpanwDate=r,t.appendChildView(t.createChildView(qd,{spawnDate:r,id:n,opacity:a,interactionMethod:s}),i)},Ds=(t,e,n,i=0,s=1)=>{t.dragOffset?(t.translateX=null,t.translateY=null,t.translateX=t.dragOrigin.x+t.dragOffset.x,t.translateY=t.dragOrigin.y+t.dragOffset.y,t.scaleX=1.025,t.scaleY=1.025):(t.translateX=e,t.translateY=n,Date.now()>t.spawnDate&&(t.opacity===0&&$d(t,e,n,i,s),t.scaleX=1,t.scaleY=1,t.opacity=1))},$d=(t,e,n,i,s)=>{t.interactionMethod===Ie.NONE?(t.translateX=null,t.translateX=e,t.translateY=null,t.translateY=n):t.interactionMethod===Ie.DROP?(t.translateX=null,t.translateX=e-i*20,t.translateY=null,t.translateY=n-s*10,t.scaleX=.8,t.scaleY=.8):t.interactionMethod===Ie.BROWSE?(t.translateY=null,t.translateY=n-30):t.interactionMethod===Ie.API&&(t.translateX=null,t.translateX=e-30,t.translateY=null)},Wd=({root:t,action:e})=>{const{id:n}=e,i=t.childViews.find(s=>s.id===n);i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},Fn=t=>t.rect.element.height+t.rect.element.marginBottom*.5+t.rect.element.marginTop*.5,Yd=t=>t.rect.element.width+t.rect.element.marginLeft*.5+t.rect.element.marginRight*.5,Xd=({root:t,action:e})=>{const{id:n,dragState:i}=e,s=t.query("GET_ITEM",{id:n}),o=t.childViews.find(E=>E.id===n),r=t.childViews.length,a=i.getItemIndex(s);if(!o)return;const l={x:o.dragOrigin.x+o.dragOffset.x+o.dragCenter.x,y:o.dragOrigin.y+o.dragOffset.y+o.dragCenter.y},d=Fn(o),c=Yd(o);let u=Math.floor(t.rect.outer.width/c);u>r&&(u=r);const p=Math.floor(r/u+1);kt.setHeight=d*p,kt.setWidth=c*u;var h={y:Math.floor(l.y/d),x:Math.floor(l.x/c),getGridIndex:function(){return l.y>kt.getHeight||l.y<0||l.x>kt.getWidth||l.x<0?a:this.y*u+this.x},getColIndex:function(){const g=t.query("GET_ACTIVE_ITEMS"),b=t.childViews.filter(M=>M.rect.element.height),v=g.map(M=>b.find(F=>F.id===M.id)),R=v.findIndex(M=>M===o),P=Fn(o),D=v.length;let L=D,_=0,N=0,z=0;for(let M=0;M<D;M++)if(_=Fn(v[M]),z=N,N=z+_,l.y<N){if(R>M){if(l.y<z+P){L=M;break}continue}L=M;break}return L}};const f=u>1?h.getGridIndex():h.getColIndex();t.dispatch("MOVE_ITEM",{query:o,index:f});const m=i.getIndex();if(m===void 0||m!==f){if(i.setIndex(f),m===void 0)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:a,target:f})}},Zd=ce({DID_ADD_ITEM:Vd,DID_REMOVE_ITEM:Wd,DID_DRAG_ITEM:Xd}),Kd=({root:t,props:e,actions:n,shouldOptimize:i})=>{Zd({root:t,props:e,actions:n});const{dragCoordinates:s}=e,o=t.rect.element.width,r=t.childViews.filter(v=>v.rect.element.height),a=t.query("GET_ACTIVE_ITEMS").map(v=>r.find(R=>R.id===v.id)).filter(v=>v),l=s?Mi(t,a,s):null,d=t.ref.addIndex||null;t.ref.addIndex=null;let c=0,u=0,p=0;if(a.length===0)return;const h=a[0].rect.element,f=h.marginTop+h.marginBottom,m=h.marginLeft+h.marginRight,E=h.width+m,g=h.height+f,b=Li(o,E);if(b===1){let v=0,R=0;a.forEach((P,D)=>{if(l){let N=D-l;N===-2?R=-f*.25:N===-1?R=-f*.75:N===0?R=f*.75:N===1?R=f*.25:R=0}i&&(P.translateX=null,P.translateY=null),P.markedForRemoval||Ds(P,0,v+R);let _=(P.rect.element.height+f)*(P.markedForRemoval?P.opacity:1);v+=_})}else{let v=0,R=0;a.forEach((P,D)=>{D===l&&(c=1),D===d&&(p+=1),P.markedForRemoval&&P.opacity<.5&&(u-=1);const L=D+p+c+u,_=L%b,N=Math.floor(L/b),z=_*E,M=N*g,F=Math.sign(z-v),k=Math.sign(M-R);v=z,R=M,!P.markedForRemoval&&(i&&(P.translateX=null,P.translateY=null),Ds(P,z,M,F,k))})}},Qd=(t,e)=>e.filter(n=>n.data&&n.data.id?t.id===n.data.id:!0),Jd=te({create:jd,write:Kd,tag:"ul",name:"list",didWriteView:({root:t})=>{t.childViews.filter(e=>e.markedForRemoval&&e.opacity===0&&e.resting).forEach(e=>{e._destroy(),t.removeChildView(e)})},filterFrameActionsForChild:Qd,mixins:{apis:["dragCoordinates"]}}),eu=({root:t,props:e})=>{t.ref.list=t.appendChildView(t.createChildView(Jd)),e.dragCoordinates=null,e.overflowing=!1},tu=({root:t,props:e,action:n})=>{t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(e.dragCoordinates={left:n.position.scopeLeft-t.ref.list.rect.element.left,top:n.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},nu=({props:t})=>{t.dragCoordinates=null},iu=ce({DID_DRAG:tu,DID_END_DRAG:nu}),su=({root:t,props:e,actions:n})=>{if(iu({root:t,props:e,actions:n}),t.ref.list.dragCoordinates=e.dragCoordinates,e.overflowing&&!e.overflow&&(e.overflowing=!1,t.element.dataset.state="",t.height=null),e.overflow){const i=Math.round(e.overflow);i!==t.height&&(e.overflowing=!0,t.element.dataset.state="overflow",t.height=i)}},ou=te({create:eu,write:su,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Oe=(t,e,n,i="")=>{n?ee(t,e,i):t.removeAttribute(e)},ru=t=>{if(!(!t||t.value==="")){try{t.value=""}catch{}if(t.value){const e=Ge("form"),n=t.parentNode,i=t.nextSibling;e.appendChild(t),e.reset(),i?n.insertBefore(t,i):n.appendChild(t)}}},au=({root:t,props:e})=>{t.element.id=`filepond--browser-${e.id}`,ee(t.element,"name",t.query("GET_NAME")),ee(t.element,"aria-controls",`filepond--assistant-${e.id}`),ee(t.element,"aria-labelledby",`filepond--drop-label-${e.id}`),gr({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),Er({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),br({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),mi({root:t}),yr({root:t,action:{value:t.query("GET_REQUIRED")}}),vr({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=n=>{if(!t.element.value)return;const i=Array.from(t.element.files).map(s=>(s._relativePath=s.webkitRelativePath,s));setTimeout(()=>{e.onload(i),ru(t.element)},250)},t.element.addEventListener("change",t.ref.handleChange)},gr=({root:t,action:e})=>{t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Oe(t.element,"accept",!!e.value,e.value?e.value.join(","):"")},Er=({root:t,action:e})=>{Oe(t.element,"multiple",e.value)},br=({root:t,action:e})=>{Oe(t.element,"webkitdirectory",e.value)},mi=({root:t})=>{const e=t.query("GET_DISABLED"),n=t.query("GET_ALLOW_BROWSE"),i=e||!n;Oe(t.element,"disabled",i)},yr=({root:t,action:e})=>{e.value?t.query("GET_TOTAL_ITEMS")===0&&Oe(t.element,"required",!0):Oe(t.element,"required",!1)},vr=({root:t,action:e})=>{Oe(t.element,"capture",!!e.value,e.value===!0?"":e.value)},As=({root:t})=>{const{element:e}=t;t.query("GET_TOTAL_ITEMS")>0?(Oe(e,"required",!1),Oe(e,"name",!1)):(Oe(e,"name",!0,t.query("GET_NAME")),t.query("GET_CHECK_VALIDITY")&&e.setCustomValidity(""),t.query("GET_REQUIRED")&&Oe(e,"required",!0))},lu=({root:t})=>{t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},cu=te({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:au,destroy:({root:t})=>{t.element.removeEventListener("change",t.ref.handleChange)},write:ce({DID_LOAD_ITEM:As,DID_REMOVE_ITEM:As,DID_THROW_ITEM_INVALID:lu,DID_SET_DISABLED:mi,DID_SET_ALLOW_BROWSE:mi,DID_SET_ALLOW_DIRECTORIES_ONLY:br,DID_SET_ALLOW_MULTIPLE:Er,DID_SET_ACCEPTED_FILE_TYPES:gr,DID_SET_CAPTURE_METHOD:vr,DID_SET_REQUIRED:yr})}),Cs={ENTER:13,SPACE:32},du=({root:t,props:e})=>{const n=Ge("label");ee(n,"for",`filepond--browser-${e.id}`),ee(n,"id",`filepond--drop-label-${e.id}`),ee(n,"aria-hidden","true"),t.ref.handleKeyDown=i=>{(i.keyCode===Cs.ENTER||i.keyCode===Cs.SPACE)&&(i.preventDefault(),t.ref.label.click())},t.ref.handleClick=i=>{i.target===n||n.contains(i.target)||t.ref.label.click()},n.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),Tr(n,e.caption),t.appendChild(n),t.ref.label=n},Tr=(t,e)=>{t.innerHTML=e;const n=t.querySelector(".filepond--label-action");return n&&ee(n,"tabindex","0"),e},uu=te({name:"drop-label",ignoreRect:!0,create:du,destroy:({root:t})=>{t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:ce({DID_SET_LABEL_IDLE:({root:t,action:e})=>{Tr(t.ref.label,e.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),hu=te({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),fu=({root:t})=>{const e=t.rect.element.width*.5,n=t.rect.element.height*.5;t.ref.blob=t.appendChildView(t.createChildView(hu,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:e,translateY:n}))},pu=({root:t,action:e})=>{if(!t.ref.blob){fu({root:t});return}t.ref.blob.translateX=e.position.scopeLeft,t.ref.blob.translateY=e.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1},mu=({root:t})=>{t.ref.blob&&(t.ref.blob.opacity=0)},gu=({root:t})=>{t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},Eu=({root:t,props:e,actions:n})=>{bu({root:t,props:e,actions:n});const{blob:i}=t.ref;n.length===0&&i&&i.opacity===0&&(t.removeChildView(i),t.ref.blob=null)},bu=ce({DID_DRAG:pu,DID_DROP:gu,DID_END_DRAG:mu}),yu=te({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:Eu}),Ir=(t,e)=>{try{const n=new DataTransfer;e.forEach(i=>{i instanceof File?n.items.add(i):n.items.add(new File([i],i.name,{type:i.type}))}),t.files=n.files}catch{return!1}return!0},vu=({root:t})=>t.ref.fields={},Sn=(t,e)=>t.ref.fields[e],xi=t=>{t.query("GET_ACTIVE_ITEMS").forEach(e=>{t.ref.fields[e.id]&&t.element.appendChild(t.ref.fields[e.id])})},Ls=({root:t})=>xi(t),Tu=({root:t,action:e})=>{const s=!(t.query("GET_ITEM",e.id).origin===ne.LOCAL)&&t.query("SHOULD_UPDATE_FILE_INPUT"),o=Ge("input");o.type=s?"file":"hidden",o.name=t.query("GET_NAME"),o.disabled=t.query("GET_DISABLED"),t.ref.fields[e.id]=o,xi(t)},Iu=({root:t,action:e})=>{const n=Sn(t,e.id);if(!n||(e.serverFileReference!==null&&(n.value=e.serverFileReference),!t.query("SHOULD_UPDATE_FILE_INPUT")))return;const i=t.query("GET_ITEM",e.id);Ir(n,[i.file])},Ru=({root:t,action:e})=>{t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=Sn(t,e.id);n&&Ir(n,[e.file])},0)},Su=({root:t})=>{t.element.disabled=t.query("GET_DISABLED")},_u=({root:t,action:e})=>{const n=Sn(t,e.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete t.ref.fields[e.id])},Ou=({root:t,action:e})=>{const n=Sn(t,e.id);n&&(e.value===null?n.removeAttribute("value"):n.type!="file"&&(n.value=e.value),xi(t))},wu=ce({DID_SET_DISABLED:Su,DID_ADD_ITEM:Tu,DID_LOAD_ITEM:Iu,DID_REMOVE_ITEM:_u,DID_DEFINE_VALUE:Ou,DID_PREPARE_OUTPUT:Ru,DID_REORDER_ITEMS:Ls,DID_SORT_ITEMS:Ls}),Pu=te({tag:"fieldset",name:"data",create:vu,write:wu,ignoreRect:!0}),Du=t=>"getRootNode"in t?t.getRootNode():document,Au=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Cu=["css","csv","html","txt"],Lu={zip:"zip|compressed",epub:"application/epub+zip"},Rr=(t="")=>(t=t.toLowerCase(),Au.includes(t)?"image/"+(t==="jpg"?"jpeg":t==="svg"?"svg+xml":t):Cu.includes(t)?"text/"+t:Lu[t]||""),Ni=t=>new Promise((e,n)=>{const i=ku(t);if(i.length&&!Mu(t))return e(i);xu(t).then(e)}),Mu=t=>t.files?t.files.length>0:!1,xu=t=>new Promise((e,n)=>{const i=(t.items?Array.from(t.items):[]).filter(s=>Nu(s)).map(s=>Fu(s));if(!i.length){e(t.files?Array.from(t.files):[]);return}Promise.all(i).then(s=>{const o=[];s.forEach(r=>{o.push.apply(o,r)}),e(o.filter(r=>r).map(r=>(r._relativePath||(r._relativePath=r.webkitRelativePath),r)))}).catch(console.error)}),Nu=t=>{if(Sr(t)){const e=Fi(t);if(e)return e.isFile||e.isDirectory}return t.kind==="file"},Fu=t=>new Promise((e,n)=>{if(zu(t)){Bu(Fi(t)).then(e).catch(n);return}e([t.getAsFile()])}),Bu=t=>new Promise((e,n)=>{const i=[];let s=0,o=0;const r=()=>{o===0&&s===0&&e(i)},a=l=>{s++;const d=l.createReader(),c=()=>{d.readEntries(u=>{if(u.length===0){s--,r();return}u.forEach(p=>{p.isDirectory?a(p):(o++,p.file(h=>{const f=Gu(h);p.fullPath&&(f._relativePath=p.fullPath),i.push(f),o--,r()}))}),c()},n)};c()};a(t)}),Gu=t=>{if(t.type.length)return t;const e=t.lastModifiedDate,n=t.name,i=Rr(Rn(t.name));return i.length&&(t=t.slice(0,t.size,i),t.name=n,t.lastModifiedDate=e),t},zu=t=>Sr(t)&&(Fi(t)||{}).isDirectory,Sr=t=>"webkitGetAsEntry"in t,Fi=t=>t.webkitGetAsEntry(),ku=t=>{let e=[];try{if(e=Hu(t),e.length)return e;e=Uu(t)}catch{}return e},Uu=t=>{let e=t.getData("url");return typeof e=="string"&&e.length?[e]:[]},Hu=t=>{let e=t.getData("text/html");if(typeof e=="string"&&e.length){const n=e.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},cn=[],it=t=>({pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}),qu=(t,e,n)=>{const i=ju(e),s={element:t,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return s.destroy=i.addListener(s),s},ju=t=>{const e=cn.find(i=>i.element===t);if(e)return e;const n=Vu(t);return cn.push(n),n},Vu=t=>{const e=[],n={dragenter:Wu,dragover:Yu,dragleave:Zu,drop:Xu},i={};Z(n,(o,r)=>{i[o]=r(t,e),t.addEventListener(o,i[o],!1)});const s={element:t,addListener:o=>(e.push(o),()=>{e.splice(e.indexOf(o),1),e.length===0&&(cn.splice(cn.indexOf(s),1),Z(n,r=>{t.removeEventListener(r,i[r],!1)}))})};return s},$u=(t,e)=>("elementFromPoint"in t||(t=document),t.elementFromPoint(e.x,e.y)),Bi=(t,e)=>{const n=Du(e),i=$u(n,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return i===e||e.contains(i)};let _r=null;const Ut=(t,e)=>{try{t.dropEffect=e}catch{}},Wu=(t,e)=>n=>{n.preventDefault(),_r=n.target,e.forEach(i=>{const{element:s,onenter:o}=i;Bi(n,s)&&(i.state="enter",o(it(n)))})},Yu=(t,e)=>n=>{n.preventDefault();const i=n.dataTransfer;Ni(i).then(s=>{let o=!1;e.some(r=>{const{filterElement:a,element:l,onenter:d,onexit:c,ondrag:u,allowdrop:p}=r;Ut(i,"copy");const h=p(s);if(!h){Ut(i,"none");return}if(Bi(n,l)){if(o=!0,r.state===null){r.state="enter",d(it(n));return}if(r.state="over",a&&!h){Ut(i,"none");return}u(it(n))}else a&&!o&&Ut(i,"none"),r.state&&(r.state=null,c(it(n)))})})},Xu=(t,e)=>n=>{n.preventDefault();const i=n.dataTransfer;Ni(i).then(s=>{e.forEach(o=>{const{filterElement:r,element:a,ondrop:l,onexit:d,allowdrop:c}=o;if(o.state=null,!(r&&!Bi(n,a))){if(!c(s))return d(it(n));l(it(n),s)}})})},Zu=(t,e)=>n=>{_r===n.target&&e.forEach(i=>{const{onexit:s}=i;i.state=null,s(it(n))})},Ku=(t,e,n)=>{t.classList.add("filepond--hopper");const{catchesDropsOnPage:i,requiresDropOnElement:s,filterItems:o=c=>c}=n,r=qu(t,i?document.documentElement:t,s);let a="",l="";r.allowdrop=c=>e(o(c)),r.ondrop=(c,u)=>{const p=o(u);if(!e(p)){d.ondragend(c);return}l="drag-drop",d.onload(p,c)},r.ondrag=c=>{d.ondrag(c)},r.onenter=c=>{l="drag-over",d.ondragstart(c)},r.onexit=c=>{l="drag-exit",d.ondragend(c)};const d={updateHopperState:()=>{a!==l&&(t.dataset.hopperState=l,a=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{r.destroy()}};return d};let gi=!1;const bt=[],Or=t=>{const e=document.activeElement;if(e&&/textarea|input/i.test(e.nodeName)){let n=!1,i=e;for(;i!==document.body;){if(i.classList.contains("filepond--root")){n=!0;break}i=i.parentNode}if(!n)return}Ni(t.clipboardData).then(n=>{n.length&&bt.forEach(i=>i(n))})},Qu=t=>{bt.includes(t)||(bt.push(t),!gi&&(gi=!0,document.addEventListener("paste",Or)))},Ju=t=>{Pi(bt,bt.indexOf(t)),bt.length===0&&(document.removeEventListener("paste",Or),gi=!1)},eh=()=>{const t=n=>{e.onload(n)},e={destroy:()=>{Ju(t)},onload:()=>{}};return Qu(t),e},th=({root:t,props:e})=>{t.element.id=`filepond--assistant-${e.id}`,ee(t.element,"role","status"),ee(t.element,"aria-live","polite"),ee(t.element,"aria-relevant","additions")};let Ms=null,xs=null;const Bn=[],_n=(t,e)=>{t.element.textContent=e},nh=t=>{t.element.textContent=""},wr=(t,e,n)=>{const i=t.query("GET_TOTAL_ITEMS");_n(t,`${n} ${e}, ${i} ${i===1?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(xs),xs=setTimeout(()=>{nh(t)},1500)},Pr=t=>t.element.parentNode.contains(document.activeElement),ih=({root:t,action:e})=>{if(!Pr(t))return;t.element.textContent="";const n=t.query("GET_ITEM",e.id);Bn.push(n.filename),clearTimeout(Ms),Ms=setTimeout(()=>{wr(t,Bn.join(", "),t.query("GET_LABEL_FILE_ADDED")),Bn.length=0},750)},sh=({root:t,action:e})=>{if(!Pr(t))return;const n=e.item;wr(t,n.filename,t.query("GET_LABEL_FILE_REMOVED"))},oh=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,s=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");_n(t,`${i} ${s}`)},Ns=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,s=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");_n(t,`${i} ${s}`)},Ht=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename;_n(t,`${e.status.main} ${i} ${e.status.sub}`)},rh=te({create:th,ignoreRect:!0,ignoreRectUpdate:!0,write:ce({DID_LOAD_ITEM:ih,DID_REMOVE_ITEM:sh,DID_COMPLETE_ITEM_PROCESSING:oh,DID_ABORT_ITEM_PROCESSING:Ns,DID_REVERT_ITEM_PROCESSING:Ns,DID_THROW_ITEM_REMOVE_ERROR:Ht,DID_THROW_ITEM_LOAD_ERROR:Ht,DID_THROW_ITEM_INVALID:Ht,DID_THROW_ITEM_PROCESSING_ERROR:Ht}),tag:"span",name:"assistant"}),Dr=(t,e="-")=>t.replace(new RegExp(`${e}.`,"g"),n=>n.charAt(1).toUpperCase()),Ar=(t,e=16,n=!0)=>{let i=Date.now(),s=null;return(...o)=>{clearTimeout(s);const r=Date.now()-i,a=()=>{i=Date.now(),t(...o)};r<e?n||(s=setTimeout(a,e-r)):a()}},ah=1e6,dn=t=>t.preventDefault(),lh=({root:t,props:e})=>{const n=t.query("GET_ID");n&&(t.element.id=n);const i=t.query("GET_CLASS_NAME");i&&i.split(" ").filter(l=>l.length).forEach(l=>{t.element.classList.add(l)}),t.ref.label=t.appendChildView(t.createChildView(uu,{...e,translateY:null,caption:t.query("GET_LABEL_IDLE")})),t.ref.list=t.appendChildView(t.createChildView(ou,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(mr,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(rh,{...e})),t.ref.data=t.appendChildView(t.createChildView(Pu,{...e})),t.ref.measure=Ge("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(l=>!Be(l.value)).map(({name:l,value:d})=>{t.element.dataset[l]=d}),t.ref.widthPrevious=null,t.ref.widthUpdated=Ar(()=>{t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];const s=window.matchMedia("(pointer: fine) and (hover: hover)").matches,o="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&o&&!s&&(t.element.addEventListener("touchmove",dn,{passive:!1}),t.element.addEventListener("gesturestart",dn));const r=t.query("GET_CREDITS");if(r.length===2){const l=document.createElement("a");l.className="filepond--credits",l.setAttribute("aria-hidden","true"),l.href=r[0],l.tabindex=-1,l.target="_blank",l.rel="noopener noreferrer",l.textContent=r[1],t.element.appendChild(l),t.ref.credits=l}},ch=({root:t,props:e,actions:n})=>{if(ph({root:t,props:e,actions:n}),n.filter(D=>/^DID_SET_STYLE_/.test(D.type)).filter(D=>!Be(D.data.value)).map(({type:D,data:L})=>{const _=Dr(D.substring(8).toLowerCase(),"_");t.element.dataset[_]=L.value,t.invalidateLayout()}),t.rect.element.hidden)return;t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());let i=t.ref.bounds;i||(i=t.ref.bounds=hh(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);const{hopper:s,label:o,list:r,panel:a}=t.ref;s&&s.updateHopperState();const l=t.query("GET_PANEL_ASPECT_RATIO"),d=t.query("GET_ALLOW_MULTIPLE"),c=t.query("GET_TOTAL_ITEMS"),u=d?t.query("GET_MAX_FILES")||ah:1,p=c===u,h=n.find(D=>D.type==="DID_ADD_ITEM");if(p&&h){const D=h.data.interactionMethod;o.opacity=0,d?o.translateY=-40:D===Ie.API?o.translateX=40:D===Ie.BROWSE?o.translateY=40:o.translateY=30}else p||(o.opacity=1,o.translateX=0,o.translateY=0);const f=dh(t),m=uh(t),E=o.rect.element.height,g=!d||p?0:E,b=p?r.rect.element.marginTop:0,v=c===0?0:r.rect.element.marginBottom,R=g+b+m.visual+v,P=g+b+m.bounds+v;if(r.translateY=Math.max(0,g-r.rect.element.marginTop)-f.top,l){const D=t.rect.element.width,L=D*l;l!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=l,t.ref.updateHistory=[]);const _=t.ref.updateHistory;_.push(D);const N=2;if(_.length>N*2){const M=_.length,F=M-10;let k=0;for(let S=M;S>=F;S--)if(_[S]===_[S-2]&&k++,k>=N)return}a.scalable=!1,a.height=L;const z=L-g-(v-f.bottom)-(p?b:0);m.visual>z?r.overflow=z:r.overflow=null,t.height=L}else if(i.fixedHeight){a.scalable=!1;const D=i.fixedHeight-g-(v-f.bottom)-(p?b:0);m.visual>D?r.overflow=D:r.overflow=null}else if(i.cappedHeight){const D=R>=i.cappedHeight,L=Math.min(i.cappedHeight,R);a.scalable=!0,a.height=D?L:L-f.top-f.bottom;const _=L-g-(v-f.bottom)-(p?b:0);R>i.cappedHeight&&m.visual>_?r.overflow=_:r.overflow=null,t.height=Math.min(i.cappedHeight,P-f.top-f.bottom)}else{const D=c>0?f.top+f.bottom:0;a.scalable=!0,a.height=Math.max(E,R-D),t.height=Math.max(E,P-D)}t.ref.credits&&a.heightCurrent&&(t.ref.credits.style.transform=`translateY(${a.heightCurrent}px)`)},dh=t=>{const e=t.ref.list.childViews[0].childViews[0];return e?{top:e.rect.element.marginTop,bottom:e.rect.element.marginBottom}:{top:0,bottom:0}},uh=t=>{let e=0,n=0;const i=t.ref.list,s=i.childViews[0],o=s.childViews.filter(b=>b.rect.element.height),r=t.query("GET_ACTIVE_ITEMS").map(b=>o.find(v=>v.id===b.id)).filter(b=>b);if(r.length===0)return{visual:e,bounds:n};const a=s.rect.element.width,l=Mi(s,r,i.dragCoordinates),d=r[0].rect.element,c=d.marginTop+d.marginBottom,u=d.marginLeft+d.marginRight,p=d.width+u,h=d.height+c,f=typeof l<"u"&&l>=0?1:0,m=r.find(b=>b.markedForRemoval&&b.opacity<.45)?-1:0,E=r.length+f+m,g=Li(a,p);return g===1?r.forEach(b=>{const v=b.rect.element.height+c;n+=v,e+=v*b.opacity}):(n=Math.ceil(E/g)*h,e=n),{visual:e,bounds:n}},hh=t=>{const e=t.ref.measureHeight||null;return{cappedHeight:parseInt(t.style.maxHeight,10)||null,fixedHeight:e===0?null:e}},Gi=(t,e)=>{const n=t.query("GET_ALLOW_REPLACE"),i=t.query("GET_ALLOW_MULTIPLE"),s=t.query("GET_TOTAL_ITEMS");let o=t.query("GET_MAX_FILES");const r=e.length;return!i&&r>1?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:K("warning",0,"Max files")}),!0):(o=i?o:1,!i&&n?!1:It(o)&&s+r>o?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:K("warning",0,"Max files")}),!0):!1)},fh=(t,e,n)=>{const i=t.childViews[0];return Mi(i,e,{left:n.scopeLeft-i.rect.element.left,top:n.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},Fs=t=>{const e=t.query("GET_ALLOW_DROP"),n=t.query("GET_DISABLED"),i=e&&!n;if(i&&!t.ref.hopper){const s=Ku(t.element,o=>{const r=t.query("GET_BEFORE_DROP_FILE")||(()=>!0);return t.query("GET_DROP_VALIDATION")?o.every(l=>at("ALLOW_HOPPER_ITEM",l,{query:t.query}).every(d=>d===!0)&&r(l)):!0},{filterItems:o=>{const r=t.query("GET_IGNORED_FILES");return o.filter(a=>nt(a)?!r.includes(a.name.toLowerCase()):!0)},catchesDropsOnPage:t.query("GET_DROP_ON_PAGE"),requiresDropOnElement:t.query("GET_DROP_ON_ELEMENT")});s.onload=(o,r)=>{const l=t.ref.list.childViews[0].childViews.filter(c=>c.rect.element.height),d=t.query("GET_ACTIVE_ITEMS").map(c=>l.find(u=>u.id===c.id)).filter(c=>c);Se("ADD_ITEMS",o,{dispatch:t.dispatch}).then(c=>{if(Gi(t,c))return!1;t.dispatch("ADD_ITEMS",{items:c,index:fh(t.ref.list,d,r),interactionMethod:Ie.DROP})}),t.dispatch("DID_DROP",{position:r}),t.dispatch("DID_END_DRAG",{position:r})},s.ondragstart=o=>{t.dispatch("DID_START_DRAG",{position:o})},s.ondrag=Ar(o=>{t.dispatch("DID_DRAG",{position:o})}),s.ondragend=o=>{t.dispatch("DID_END_DRAG",{position:o})},t.ref.hopper=s,t.ref.drip=t.appendChildView(t.createChildView(yu))}else!i&&t.ref.hopper&&(t.ref.hopper.destroy(),t.ref.hopper=null,t.removeChildView(t.ref.drip))},Bs=(t,e)=>{const n=t.query("GET_ALLOW_BROWSE"),i=t.query("GET_DISABLED"),s=n&&!i;s&&!t.ref.browser?t.ref.browser=t.appendChildView(t.createChildView(cu,{...e,onload:o=>{Se("ADD_ITEMS",o,{dispatch:t.dispatch}).then(r=>{if(Gi(t,r))return!1;t.dispatch("ADD_ITEMS",{items:r,index:-1,interactionMethod:Ie.BROWSE})})}}),0):!s&&t.ref.browser&&(t.removeChildView(t.ref.browser),t.ref.browser=null)},Gs=t=>{const e=t.query("GET_ALLOW_PASTE"),n=t.query("GET_DISABLED"),i=e&&!n;i&&!t.ref.paster?(t.ref.paster=eh(),t.ref.paster.onload=s=>{Se("ADD_ITEMS",s,{dispatch:t.dispatch}).then(o=>{if(Gi(t,o))return!1;t.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:Ie.PASTE})})}):!i&&t.ref.paster&&(t.ref.paster.destroy(),t.ref.paster=null)},ph=ce({DID_SET_ALLOW_BROWSE:({root:t,props:e})=>{Bs(t,e)},DID_SET_ALLOW_DROP:({root:t})=>{Fs(t)},DID_SET_ALLOW_PASTE:({root:t})=>{Gs(t)},DID_SET_DISABLED:({root:t,props:e})=>{Fs(t),Gs(t),Bs(t,e),t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),mh=te({name:"root",read:({root:t})=>{t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:lh,write:ch,destroy:({root:t})=>{t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",dn),t.element.removeEventListener("gesturestart",dn)},mixins:{styles:["height"]}}),gh=(t={})=>{let e=null;const n=ln(),i=Ll(Ec(n),[Fc,vc(n)],[ad,yc(n)]);i.dispatch("SET_OPTIONS",{options:t});const s=()=>{document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",s);let o=null,r=!1,a=!1,l=null,d=null;const c=()=>{r||(r=!0),clearTimeout(o),o=setTimeout(()=>{r=!1,l=null,d=null,a&&(a=!1,i.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",c);const u=mh(i,{id:wi()});let p=!1,h=!1;const f={_read:()=>{r&&(d=window.innerWidth,l||(l=d),!a&&d!==l&&(i.dispatch("DID_START_RESIZE"),a=!0)),h&&p&&(p=u.element.offsetParent===null),!p&&(u._read(),h=u.rect.element.hidden)},_write:I=>{const O=i.processActionQueue().filter(x=>!/^SET_/.test(x.type));p&&!O.length||(b(O),p=u._write(I,O,a),Rc(i.query("GET_ITEMS")),p&&i.processDispatchQueue())}},m=I=>O=>{const x={type:I};if(!O)return x;if(O.hasOwnProperty("error")&&(x.error=O.error?{...O.error}:null),O.status&&(x.status={...O.status}),O.file&&(x.output=O.file),O.source)x.file=O.source;else if(O.item||O.id){const C=O.item?O.item:i.query("GET_ITEM",O.id);x.file=C?ue(C):null}return O.items&&(x.items=O.items.map(ue)),/progress/.test(I)&&(x.progress=O.progress),O.hasOwnProperty("origin")&&O.hasOwnProperty("target")&&(x.origin=O.origin,x.target=O.target),x},E={DID_DESTROY:m("destroy"),DID_INIT:m("init"),DID_THROW_MAX_FILES:m("warning"),DID_INIT_ITEM:m("initfile"),DID_START_ITEM_LOAD:m("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:m("addfileprogress"),DID_LOAD_ITEM:m("addfile"),DID_THROW_ITEM_INVALID:[m("error"),m("addfile")],DID_THROW_ITEM_LOAD_ERROR:[m("error"),m("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[m("error"),m("removefile")],DID_PREPARE_OUTPUT:m("preparefile"),DID_START_ITEM_PROCESSING:m("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:m("processfileprogress"),DID_ABORT_ITEM_PROCESSING:m("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:m("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:m("processfiles"),DID_REVERT_ITEM_PROCESSING:m("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[m("error"),m("processfile")],DID_REMOVE_ITEM:m("removefile"),DID_UPDATE_ITEMS:m("updatefiles"),DID_ACTIVATE_ITEM:m("activatefile"),DID_REORDER_ITEMS:m("reorderfiles")},g=I=>{const O={pond:U,...I};delete O.type,u.element.dispatchEvent(new CustomEvent(`FilePond:${I.type}`,{detail:O,bubbles:!0,cancelable:!0,composed:!0}));const x=[];I.hasOwnProperty("error")&&x.push(I.error),I.hasOwnProperty("file")&&x.push(I.file);const C=["type","error","file"];Object.keys(I).filter(Y=>!C.includes(Y)).forEach(Y=>x.push(I[Y])),U.fire(I.type,...x);const W=i.query(`GET_ON${I.type.toUpperCase()}`);W&&W(...x)},b=I=>{I.length&&I.filter(O=>E[O.type]).forEach(O=>{const x=E[O.type];(Array.isArray(x)?x:[x]).forEach(C=>{O.type==="DID_INIT_ITEM"?g(C(O.data)):setTimeout(()=>{g(C(O.data))},0)})})},v=I=>i.dispatch("SET_OPTIONS",{options:I}),R=I=>i.query("GET_ACTIVE_ITEM",I),P=I=>new Promise((O,x)=>{i.dispatch("REQUEST_ITEM_PREPARE",{query:I,success:C=>{O(C)},failure:C=>{x(C)}})}),D=(I,O={})=>new Promise((x,C)=>{N([{source:I,options:O}],{index:O.index}).then(W=>x(W&&W[0])).catch(C)}),L=I=>I.file&&I.id,_=(I,O)=>(typeof I=="object"&&!L(I)&&!O&&(O=I,I=void 0),i.dispatch("REMOVE_ITEM",{...O,query:I}),i.query("GET_ACTIVE_ITEM",I)===null),N=(...I)=>new Promise((O,x)=>{const C=[],W={};if(yn(I[0]))C.push.apply(C,I[0]),Object.assign(W,I[1]||{});else{const Y=I[I.length-1];typeof Y=="object"&&!(Y instanceof Blob)&&Object.assign(W,I.pop()),C.push(...I)}i.dispatch("ADD_ITEMS",{items:C,index:W.index,interactionMethod:Ie.API,success:O,failure:x})}),z=()=>i.query("GET_ACTIVE_ITEMS"),M=I=>new Promise((O,x)=>{i.dispatch("REQUEST_ITEM_PROCESSING",{query:I,success:C=>{O(C)},failure:C=>{x(C)}})}),F=(...I)=>{const O=Array.isArray(I[0])?I[0]:I,x=O.length?O:z();return Promise.all(x.map(P))},k=(...I)=>{const O=Array.isArray(I[0])?I[0]:I;if(!O.length){const x=z().filter(C=>!(C.status===B.IDLE&&C.origin===ne.LOCAL)&&C.status!==B.PROCESSING&&C.status!==B.PROCESSING_COMPLETE&&C.status!==B.PROCESSING_REVERT_ERROR);return Promise.all(x.map(M))}return Promise.all(O.map(M))},S=(...I)=>{const O=Array.isArray(I[0])?I[0]:I;let x;typeof O[O.length-1]=="object"?x=O.pop():Array.isArray(I[0])&&(x=I[1]);const C=z();return O.length?O.map(Y=>Xe(Y)?C[Y]?C[Y].id:null:Y).filter(Y=>Y).map(Y=>_(Y,x)):Promise.all(C.map(Y=>_(Y,x)))},U={...In(),...f,...bc(i,n),setOptions:v,addFile:D,addFiles:N,getFile:R,processFile:M,prepareFile:P,removeFile:_,moveFile:(I,O)=>i.dispatch("MOVE_ITEM",{query:I,index:O}),getFiles:z,processFiles:k,removeFiles:S,prepareFiles:F,sort:I=>i.dispatch("SORT",{compare:I}),browse:()=>{var I=u.element.querySelector("input[type=file]");I&&I.click()},destroy:()=>{U.fire("destroy",u.element),i.dispatch("ABORT_ALL"),u._destroy(),window.removeEventListener("resize",c),document.removeEventListener("visibilitychange",s),i.dispatch("DID_DESTROY")},insertBefore:I=>as(u.element,I),insertAfter:I=>ls(u.element,I),appendTo:I=>I.appendChild(u.element),replaceElement:I=>{as(u.element,I),I.parentNode.removeChild(I),e=I},restoreElement:()=>{e&&(ls(e,u.element),u.element.parentNode.removeChild(u.element),e=null)},isAttachedTo:I=>u.element===I||e===I,element:{get:()=>u.element},status:{get:()=>i.query("GET_STATUS")}};return i.dispatch("DID_INIT"),qe(U)},Cr=(t={})=>{const e={};return Z(ln(),(i,s)=>{e[i]=s[0]}),gh({...e,...t})},Eh=t=>t.charAt(0).toLowerCase()+t.slice(1),bh=t=>Dr(t.replace(/^data-/,"")),Lr=(t,e)=>{Z(e,(n,i)=>{Z(t,(s,o)=>{const r=new RegExp(n);if(!r.test(s)||(delete t[s],i===!1))return;if(le(i)){t[i]=o;return}const l=i.group;se(i)&&!t[l]&&(t[l]={}),t[l][Eh(s.replace(r,""))]=o}),i.mapping&&Lr(t[i.group],i.mapping)})},yh=(t,e={})=>{const n=[];Z(t.attributes,s=>{n.push(t.attributes[s])});const i=n.filter(s=>s.name).reduce((s,o)=>{const r=ee(t,o.name);return s[bh(o.name)]=r===o.name?!0:r,s},{});return Lr(i,e),i},vh=(t,e={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};at("SET_ATTRIBUTE_TO_OPTION_MAP",n);const i={...e},s=yh(t.nodeName==="FIELDSET"?t.querySelector("input[type=file]"):t,n);Object.keys(s).forEach(r=>{se(s[r])?(se(i[r])||(i[r]={}),Object.assign(i[r],s[r])):i[r]=s[r]}),i.files=(e.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map(r=>({source:r.value,options:{type:r.dataset.type}})));const o=Cr(i);return t.files&&Array.from(t.files).forEach(r=>{o.addFile(r)}),o.replaceElement(t),o},Th=(...t)=>Cl(t[0])?vh(...t):Cr(...t),Ih=["fire","_read","_write"],zs=t=>{const e={};return er(t,e,Ih),e},Rh=(t,e)=>t.replace(/(?:{([a-zA-Z]+)})/g,(n,i)=>e[i]),Sh=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(e),i=new Worker(n);return{transfer:(s,o)=>{},post:(s,o,r)=>{const a=wi();i.onmessage=l=>{l.data.id===a&&o(l.data.message)},i.postMessage({id:a,message:s},r)},terminate:()=>{i.terminate(),URL.revokeObjectURL(n)}}},_h=t=>new Promise((e,n)=>{const i=new Image;i.onload=()=>{e(i)},i.onerror=s=>{n(s)},i.src=t}),Mr=(t,e)=>{const n=t.slice(0,t.size,t.type);return n.lastModifiedDate=t.lastModifiedDate,n.name=e,n},Oh=t=>Mr(t,t.name),ks=[],wh=t=>{if(ks.includes(t))return;ks.push(t);const e=t({addFilter:_c,utils:{Type:T,forin:Z,isString:le,isFile:nt,toNaturalFileSize:hr,replaceInString:Rh,getExtensionFromFilename:Rn,getFilenameWithoutExtension:cr,guesstimateMimeType:Rr,getFileFromBlob:yt,getFilenameFromURL:Nt,createRoute:ce,createWorker:Sh,createView:te,createItemAPI:ue,loadImage:_h,copyFile:Oh,renameFile:Mr,createBlob:rr,applyFilterChain:Se,text:Q,getNumericAspectRatioFromString:ir},views:{fileActionButton:ur}});Oc(e.options)},Ph=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",Dh=()=>"Promise"in window,Ah=()=>"slice"in Blob.prototype,Ch=()=>"URL"in window&&"createObjectURL"in window.URL,Lh=()=>"visibilityState"in document,Mh=()=>"performance"in window,xh=()=>"supports"in(window.CSS||{}),Nh=()=>/MSIE|Trident/.test(window.navigator.userAgent),Us=(()=>{const t=Yo()&&!Ph()&&Lh()&&Dh()&&Ah()&&Ch()&&Mh()&&(xh()||Nh());return()=>t})(),Ue={apps:[]},Fh="filepond",lt=()=>{};let Hs={},je=lt,Gn=lt,qs=lt,js=lt,Ei=lt,Vs=lt,$s=lt;if(Us()){ic(()=>{Ue.apps.forEach(n=>n._read())},n=>{Ue.apps.forEach(i=>i._write(n))});const t=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Us,create:je,destroy:Gn,parse:qs,find:js,registerPlugin:Ei,setOptions:$s}})),document.removeEventListener("DOMContentLoaded",t)};document.readyState!=="loading"?setTimeout(()=>t(),0):document.addEventListener("DOMContentLoaded",t);const e=()=>Z(ln(),(n,i)=>{Hs[n]=i[1]});Hs={},e(),je=(...n)=>{const i=Th(...n);return i.on("destroy",Gn),Ue.apps.push(i),zs(i)},Gn=n=>{const i=Ue.apps.findIndex(s=>s.isAttachedTo(n));return i>=0?(Ue.apps.splice(i,1)[0].restoreElement(),!0):!1},qs=n=>Array.from(n.querySelectorAll(`.${Fh}`)).filter(o=>!Ue.apps.find(r=>r.isAttachedTo(o))).map(o=>je(o)),js=n=>{const i=Ue.apps.find(s=>s.isAttachedTo(n));return i?zs(i):null},Ei=(...n)=>{n.forEach(wh),e()},Vs=()=>{const n={};return Z(ln(),(i,s)=>{n[i]=s[0]}),n},$s=n=>(se(n)&&(Ue.apps.forEach(i=>{i.setOptions(n)}),wc(n)),Vs())}Ei(FilePondPluginFileValidateType,FilePondPluginImagePreview,FilePondPluginImageCrop,FilePondPluginImageResize,FilePondPluginImageTransform,FilePondPluginFileEncode);je(document.querySelector(".filepond"),{labelIdle:"Criar uma foto aqui",imagePreviewHeight:100,imageCropAspectRatio:"1:1",imageResizeTargetWidth:500,imageResizeTargetHeight:500,stylePanelLayout:"compact square",styleLoadIndicatorPosition:"center bottom",styleProgressIndicatorPosition:"right bottom",styleButtonRemoveItemPosition:"left bottom",styleButtonProcessItemPosition:"right bottom",allowFileEncode:!0});je(document.querySelector("#cnh"),{labelIdle:'<i class="bi bi-cloud-arrow-up"></i> Foto CNH',imagePreviewHeight:100,imageCropAspectRatio:"1:1",imageResizeTargetWidth:500,imageResizeTargetHeight:500,stylePanelLayout:"compact square",styleLoadIndicatorPosition:"center bottom",styleProgressIndicatorPosition:"right bottom",styleButtonRemoveItemPosition:"left bottom",styleButtonProcessItemPosition:"right bottom"});je(document.querySelector("#cnv"),{labelIdle:'<i class="bi bi-cloud-arrow-up"></i> Foto CNV',imagePreviewHeight:100,imageCropAspectRatio:"1:1",imageResizeTargetWidth:500,imageResizeTargetHeight:500,stylePanelLayout:"compact square",styleLoadIndicatorPosition:"center bottom",styleProgressIndicatorPosition:"right bottom",styleButtonRemoveItemPosition:"left bottom",styleButtonProcessItemPosition:"right bottom"});je(document.querySelector("#documento"),{labelIdle:'<i class="bi bi-cloud-arrow-up"></i> Foto Documento',imagePreviewHeight:100,imageCropAspectRatio:"1:1",imageResizeTargetWidth:500,imageResizeTargetHeight:500,stylePanelLayout:"compact square",styleLoadIndicatorPosition:"center bottom",styleProgressIndicatorPosition:"right bottom",styleButtonRemoveItemPosition:"left bottom",styleButtonProcessItemPosition:"right bottom"});je(document.querySelector("#imagem"),{labelIdle:'<i class="bi bi-cloud-arrow-up"></i> Foto do veiculo',imagePreviewHeight:100,imageCropAspectRatio:"1:1",imageResizeTargetWidth:500,imageResizeTargetHeight:500,stylePanelLayout:"compact square",styleLoadIndicatorPosition:"center bottom",styleProgressIndicatorPosition:"right bottom",styleButtonRemoveItemPosition:"left bottom",styleButtonProcessItemPosition:"right bottom"});document.querySelector("#formRegister")&&document.querySelector("#formRegister").addEventListener("submit",function(t){t.preventDefault(),Bh(t)});document.querySelector("#formRegisterEdit")&&document.querySelector("#formRegisterEdit").addEventListener("submit",function(t){t.preventDefault(),xr(t)});document.querySelector("#formDadosBancarios")&&document.querySelector("#formDadosBancarios").addEventListener("submit",function(t){t.preventDefault(),xr(t)});function Bh(t){t.preventDefault();const e=t.target,n=new FormData(e),i=e.method;axios({method:i,url:e.action,data:n}).then(s=>{Gh(s.data),zh(s.data),Toastify({text:"Cadastro realizado com sucesso!",className:"info",close:!0,gravity:"bottom",position:"right",style:{background:"#FF9921"}}).showToast()})}function xr(t){t.preventDefault();const e=t.target,n=new FormData(e),i=e.method;axios({method:i,url:e.action,data:n}).then(s=>{console.log(s.data),window.location.href=s.data.route})}function Gh(t){axios({method:"get",url:t+"/form"}).then(e=>{document.querySelector("#formRegister").innerHTML=e.data})}function zh(t){axios({method:"get",url:t+"/list"}).then(e=>{document.querySelector("#tableList").innerHTML=e.data})}const w=(t,e=1e4)=>(t=parseFloat(t+"")||0,Math.round((t+Number.EPSILON)*e)/e),bi=function(t){if(!(t&&t instanceof Element&&t.offsetParent))return!1;const e=t.scrollHeight>t.clientHeight,n=window.getComputedStyle(t).overflowY,i=n.indexOf("hidden")!==-1,s=n.indexOf("visible")!==-1;return e&&!i&&!s},un=function(t,e=void 0){return!(!t||t===document.body||e&&t===e)&&(bi(t)?t:un(t.parentElement,e))},Ce=function(t){var e=new DOMParser().parseFromString(t,"text/html").body;if(e.childElementCount>1){for(var n=document.createElement("div");e.firstChild;)n.appendChild(e.firstChild);return n}return e.firstChild},zi=t=>`${t||""}`.split(" ").filter(e=>!!e),Le=(t,e,n)=>{t&&zi(e).forEach(i=>{t.classList.toggle(i,n||!1)})};class dt{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}}const ut={passive:!1};class kh{constructor(e,{start:n=()=>!0,move:i=()=>{},end:s=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=n,this.moveCallback=i,this.endCallback=s;for(const o of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[o]=this[o].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,ut),this.element.addEventListener("touchstart",this.onTouchStart,ut),this.element.addEventListener("touchmove",this.onMove,ut),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||e.button!==0)return;const n=new dt(e);this.currentPointers.some(i=>i.id===n.id)||this.triggerPointerStart(n,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(const n of Array.from(e.changedTouches||[]))this.triggerPointerStart(new dt(n),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){const n=this.currentPointers.slice(),i="changedTouches"in e?Array.from(e.changedTouches||[]).map(o=>new dt(o)):[new dt(e)],s=[];for(const o of i){const r=this.currentPointers.findIndex(a=>a.id===o.id);r<0||(s.push(o),this.currentPointers[r]=o)}s.length&&this.moveCallback(e,this.currentPointers.slice(),n)}onPointerEnd(e){e.buttons>0&&e.button!==0||(this.triggerPointerEnd(e,new dt(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(const n of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new dt(n))}triggerPointerStart(e,n){return!!this.startCallback(n,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,n){const i=this.currentPointers.findIndex(s=>s.id===n.id);i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(e,n,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,ut),this.element.removeEventListener("touchstart",this.onTouchStart,ut),this.element.removeEventListener("touchmove",this.onMove,ut),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function Ws(t,e){return e?Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2)):0}function Ys(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const yi=t=>typeof t=="object"&&t!==null&&t.constructor===Object&&Object.prototype.toString.call(t)==="[object Object]",fe=(t,...e)=>{const n=e.length;for(let i=0;i<n;i++){const s=e[i]||{};Object.entries(s).forEach(([o,r])=>{const a=Array.isArray(r)?[]:{};t[o]||Object.assign(t,{[o]:a}),yi(r)?Object.assign(t[o],fe(a,r)):Array.isArray(r)?Object.assign(t,{[o]:[...r]}):Object.assign(t,{[o]:r})})}return t},zn=function(t,e){return t.split(".").reduce((n,i)=>typeof n=="object"?n[i]:void 0,e)};class hn{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(const n of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))n.startsWith("on")&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}setOptions(e){this.options=e?fe({},this.constructor.defaults,e):{};for(const[n,i]of Object.entries(this.option("on")||{}))this.on(n,i)}option(e,...n){let i=zn(e,this.options);return i&&typeof i=="function"&&(i=i.call(this,this,...n)),i}optionFor(e,n,i,...s){let o=zn(n,e);var r;typeof(r=o)!="string"||isNaN(r)||isNaN(parseFloat(r))||(o=parseFloat(o)),o==="true"&&(o=!0),o==="false"&&(o=!1),o&&typeof o=="function"&&(o=o.call(this,this,e,...s));let a=zn(n,this.options);return a&&typeof a=="function"?o=a.call(this,this,e,...s,o):o===void 0&&(o=a),o===void 0?i:o}cn(e){const n=this.options.classes;return n&&n[e]||""}localize(e,n=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(i,s,o)=>{let r="";return o?r=this.option(`${s[0]+s.toLowerCase().substring(1)}.l10n.${o}`):s&&(r=this.option(`l10n.${s}`)),r||(r=i),r});for(let i=0;i<n.length;i++)e=e.split(n[i][0]).join(n[i][1]);return e=e.replace(/\{\{(.*?)\}\}/g,(i,s)=>s)}on(e,n){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),this.events||(this.events=new Map),i.forEach(s=>{let o=this.events.get(s);o||(this.events.set(s,[]),o=[]),o.includes(n)||o.push(n),this.events.set(s,o)})}off(e,n){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),i.forEach(s=>{const o=this.events.get(s);if(Array.isArray(o)){const r=o.indexOf(n);r>-1&&o.splice(r,1)}})}emit(e,...n){[...this.events.get(e)||[]].forEach(i=>i(this,...n)),e!=="*"&&this.emit("*",e,...n)}}Object.defineProperty(hn,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(hn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class ki extends hn{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){const n=new Map;for(const[i,s]of Object.entries(e)){const o=this.option(i),r=this.plugins[i];r||o===!1?r&&o===!1&&(r.detach(),delete this.plugins[i]):n.set(i,new s(this,o||{}))}for(const[i,s]of n)this.plugins[i]=s,s.attach()}detachPlugins(e){e=e||Object.keys(this.plugins);for(const n of e){const i=this.plugins[n];i&&i.detach(),delete this.plugins[n]}return this.emit("detachPlugins"),this}}var V;(function(t){t[t.Init=0]="Init",t[t.Error=1]="Error",t[t.Ready=2]="Ready",t[t.Panning=3]="Panning",t[t.Mousemove=4]="Mousemove",t[t.Destroy=5]="Destroy"})(V||(V={}));const xe=["a","b","c","d","e","f"],Nr={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},Uh={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:Nr},Xs='<circle cx="25" cy="25" r="20"></circle>',Ui='<div class="f-spinner"><svg viewBox="0 0 50 50">'+Xs+Xs+"</svg></div>",he=t=>t&&t!==null&&t instanceof Element&&"nodeType"in t,j=(t,e)=>{t&&zi(e).forEach(n=>{t.classList.remove(n)})},A=(t,e)=>{t&&zi(e).forEach(n=>{t.classList.add(n)})},qt={a:1,b:0,c:0,d:1,e:0,f:0},Hh=1e5,jt=1e4,be="mousemove",Zs="drag",Ks="content",ye="auto";let kn=null,Un=null;class rt extends ki{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return Un===null&&(Un=window.matchMedia("(hover: none)").matches),Un}get isMobile(){return kn===null&&(kn=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),kn}get panMode(){return this.options.panMode!==be||this.isTouchDevice?Zs:be}get panOnlyZoomed(){const e=this.options.panOnlyZoomed;return e===ye?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:e,b:n}=this.current;return Math.sqrt(e*e+n*n)||1}get targetScale(){const{a:e,b:n}=this.target;return Math.sqrt(e*e+n*n)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:e,contentRect:n}=this,i=Math.max(e.height/n.fitHeight,e.width/n.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const e of xe){const n=e=="e"||e==="f"?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>n)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,n={},i={}){var s;if(super(n),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:V.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},qt)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},qt)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},rt.Plugins),i)),this.emit("attachPlugins"),this.emit("init");const o=this.content;if(o.addEventListener("load",this.onLoad),o.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));const r=Ce(Ui);!e.contains(o)||o.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(r):this.spinner=((s=o.parentElement)===null||s===void 0?void 0:s.insertBefore(r,o))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){const{container:e}=this,n=this.cn(Ks);let i=this.option(Ks)||e.querySelector(`.${n}`);if(i||(i=e.querySelector("img,picture")||e.firstElementChild,i&&A(i,n)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){const{spinner:e,container:n,state:i}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&n.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===V.Init?this.enable():this.updateMetrics()}onError(){this.state!==V.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=V.Error,this.emit("error"))}getNextScale(e){const{fullScale:n,targetScale:i,coverScale:s,maxScale:o,minScale:r}=this;let a=r;switch(e){case"toggleMax":a=i-r<.5*(o-r)?o:r;break;case"toggleCover":a=i-r<.5*(s-r)?s:r;break;case"toggleZoom":a=i-r<.5*(n-r)?n:r;break;case"iterateZoom":let l=[1,n,o].sort((c,u)=>c-u),d=l.findIndex(c=>c>i+1e-5);a=l[d]||1}return a}attachObserver(){var e;const n=()=>{const{container:i,containerRect:s}=this;return Math.abs(s.width-i.getBoundingClientRect().width)>.1||Math.abs(s.height-i.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(n()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{n()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(e=this.resizeObserver)===null||e===void 0||e.observe(this.container)}detachObserver(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}attachEvents(){const{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new kh(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(be,this.onMouseMove)}detachEvents(){var e;const{container:n}=this;n.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),n.removeEventListener("wheel",this.onWheel,{passive:!1}),(e=this.pointerTracker)===null||e===void 0||e.stop(),this.pointerTracker=null,document.removeEventListener(be,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const e=this.friction,n=this.option("maxVelocity");for(const i of xe)e?(this.velocity[i]*=1-e,n&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],n),-1*n)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(const e of xe)e==="e"&&this.isBouncingX||e==="f"&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,n=0){const{current:i}=this,s=i.e+e,o=i.f+n,r=this.getBounds(),{x:a,y:l}=r,d=a.min,c=a.max,u=l.min,p=l.max;let h=0,f=0;return d!==1/0&&s<d?h=d-s:c!==1/0&&s>c&&(h=c-s),u!==1/0&&o<u?f=u-o:p!==1/0&&o>p&&(f=p-o),Math.abs(h)<1e-4&&(h=0),Math.abs(f)<1e-4&&(f=0),Object.assign(Object.assign({},r),{xDiff:h,yDiff:f,inBounds:!h&&!f})}clampTargetBounds(){const{target:e}=this,{x:n,y:i}=this.getBounds();n.min!==1/0&&(e.e=Math.max(e.e,n.min)),n.max!==1/0&&(e.e=Math.min(e.e,n.max)),i.min!==1/0&&(e.f=Math.max(e.f,i.min)),i.max!==1/0&&(e.f=Math.min(e.f,i.max))}calculateContentDim(e=this.current){const{content:n,contentRect:i}=this,{fitWidth:s,fitHeight:o,fullWidth:r,fullHeight:a}=i;let l=r,d=a;if(this.option("zoom")||this.angle!==0){const c=!(n instanceof HTMLImageElement)&&(window.getComputedStyle(n).maxWidth==="none"||window.getComputedStyle(n).maxHeight==="none"),u=c?r:s,p=c?a:o,h=this.getMatrix(e),f=new DOMPoint(0,0).matrixTransform(h),m=new DOMPoint(0+u,0).matrixTransform(h),E=new DOMPoint(0+u,0+p).matrixTransform(h),g=new DOMPoint(0,0+p).matrixTransform(h),b=Math.abs(E.x-f.x),v=Math.abs(E.y-f.y),R=Math.abs(g.x-m.x),P=Math.abs(g.y-m.y);l=Math.max(b,R),d=Math.max(v,P)}return{contentWidth:l,contentHeight:d}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===be||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:e}=this,{x:n,y:i,xDiff:s,yDiff:o}=this.checkBounds(),r=this.option("maxVelocity");let a=this.velocity.e,l=this.velocity.f;s!==0?(this.isBouncingX=!0,s*a<=0?a+=.14*s:(a=.14*s,n.min!==1/0&&(this.target.e=Math.max(e.e,n.min)),n.max!==1/0&&(this.target.e=Math.min(e.e,n.max))),r&&(a=Math.max(Math.min(a,r),-1*r))):this.isBouncingX=!1,o!==0?(this.isBouncingY=!0,o*l<=0?l+=.14*o:(l=.14*o,i.min!==1/0&&(this.target.f=Math.max(e.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(e.f,i.max))),r&&(l=Math.max(Math.min(l,r),-1*r))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=l)}enable(){const{content:e}=this,n=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(const i of xe)this.current[i]=this.target[i]=n[i];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=V.Ready,this.emit("ready")}onClick(e){var n;e.type==="click"&&e.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((n=this.pointerTracker)===null||n===void 0||n.clear(),this.trackingPoints=[],this.startDecelAnim());const i=e.target;if(!i||e.defaultPrevented)return;if(i.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{const h=window.getSelection();return h&&h.type==="Range"})()&&!i.closest("button"))return;const s=i.closest("[data-panzoom-action]"),o=i.closest("[data-panzoom-change]"),r=s||o,a=r&&he(r)?r.dataset:null;if(a){const h=a.panzoomChange,f=a.panzoomAction;if((h||f)&&e.preventDefault(),h){let m={};try{m=JSON.parse(h)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(m)}if(f)return void(this[f]&&this[f]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();if(i.closest("[data-fancybox]"))return;const l=this.content.getBoundingClientRect(),d=this.dragStart;if(d.time&&!this.canZoomOut()&&(Math.abs(l.x-d.x)>2||Math.abs(l.y-d.y)>2))return;this.dragStart.time=0;const c=h=>{this.option("zoom",e)&&h&&typeof h=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(h)&&typeof this[h]=="function"&&(e.preventDefault(),this[h]({event:e}))},u=this.option("click",e),p=this.option("dblClick",e);p?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",e),!e.defaultPrevented&&u&&c(u)):(this.emit("dblClick",e),e.defaultPrevented||c(p)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",e),!e.defaultPrevented&&u&&c(u))}addTrackingPoint(e){const n=this.trackingPoints.filter(i=>i.time>Date.now()-100);n.push(e),this.trackingPoints=n}onPointerDown(e,n,i){var s;if(this.option("touch",e)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const o=this.content.getBoundingClientRect();if(this.dragStart={x:o.x,y:o.y,top:o.top,left:o.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===be&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;const r=e.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(r.nodeName)||r.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(s=window.getSelection())===null||s===void 0||s.removeAllRanges()}if(e.type==="mousedown")["A","BUTTON"].includes(r.nodeName)||e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(n),this.emit("touchStart",e)),!0}onPointerMove(e,n,i){if(this.option("touch",e)===!1||!this.isDragging||n.length<2&&this.panOnlyZoomed&&w(this.targetScale)<=w(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))return;this.addTrackingPoint(n[0]);const{content:s}=this,o=Ys(i[0],i[1]),r=Ys(n[0],n[1]);let a=0,l=0;if(n.length>1){const v=s.getBoundingClientRect();a=o.clientX-v.left-.5*v.width,l=o.clientY-v.top-.5*v.height}const d=Ws(i[0],i[1]),c=Ws(n[0],n[1]);let u=d?c/d:1,p=r.clientX-o.clientX,h=r.clientY-o.clientY;this.dragOffset.x+=p,this.dragOffset.y+=h,this.dragOffset.time=Date.now()-this.dragStart.time;let f=w(this.targetScale)===w(this.minScale)&&this.option("lockAxis");if(f&&!this.lockedAxis)if(f==="xy"||f==="y"||e.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();const v=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=v>45&&v<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,p=0,h=0}else this.lockedAxis=f;if(un(e.target,this.content)&&(f="x",this.dragOffset.y=0),f&&f!=="xy"&&this.lockedAxis!==f&&w(this.targetScale)===w(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));const m=this.checkBounds(p,h);this.option("rubberband")?(this.isInfinite!=="x"&&(m.xDiff>0&&p<0||m.xDiff<0&&p>0)&&(p*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*m.xDiff))),this.isInfinite!=="y"&&(m.yDiff>0&&h<0||m.yDiff<0&&h>0)&&(h*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*m.yDiff)))):(m.xDiff&&(p=0),m.yDiff&&(h=0));const E=this.targetScale,g=this.minScale,b=this.maxScale;E<.5*g&&(u=Math.max(u,g)),E>1.5*b&&(u=Math.min(u,b)),this.lockedAxis==="y"&&w(E)===w(g)&&(p=0),this.lockedAxis==="x"&&w(E)===w(g)&&(h=0),this.applyChange({originX:a,originY:l,panX:p,panY:h,scale:u,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,n,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(n),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),un(e.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==V.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;const n=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const v of xe)this.velocity[v]=0;this.target.e=this.current.e,this.target.f=this.current.f,j(this.container,"is-scaling"),j(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:i}=this,s=i[0],o=i[i.length-1];let r=0,a=0,l=0;o&&s&&(r=o.clientX-s.clientX,a=o.clientY-s.clientY,l=o.time-s.time);const d=((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1;d!==1&&(r*=d,a*=d);let c=0,u=0,p=0,h=0,f=this.option("decelFriction");const m=this.targetScale;if(l>0){p=Math.abs(r)>3?r/(l/30):0,h=Math.abs(a)>3?a/(l/30):0;const v=this.option("maxVelocity");v&&(p=Math.max(Math.min(p,v),-1*v),h=Math.max(Math.min(h,v),-1*v))}p&&(c=p/(1/(1-f)-1)),h&&(u=h/(1/(1-f)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&w(m)===this.minScale)&&(c=p=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&w(m)===this.minScale)&&(u=h=0);const E=this.dragOffset.x,g=this.dragOffset.y,b=this.option("dragMinThreshold")||0;Math.abs(E)<b&&Math.abs(g)<b&&(c=u=0,p=h=0),(this.option("zoom")&&(m<this.minScale-1e-5||m>this.maxScale+1e-5)||n&&!c&&!u)&&(f=.35),this.applyChange({panX:c,panY:u,friction:f}),this.emit("decel",p,h,E,g)}onWheel(e){var n=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(o,r){return Math.abs(r)>Math.abs(o)?r:o});const i=Math.max(-1,Math.min(1,n));if(this.emit("wheel",e,i),this.panMode===be||e.defaultPrevented)return;const s=this.option("wheel");s==="pan"?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):s==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){e.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:e,target:n,content:i,contentRect:s}=this,o=Object.assign({},qt);for(const E of xe){const g=E=="e"||E==="f"?jt:Hh;o[E]=w(e[E],g),Math.abs(n[E]-e[E])<(E=="e"||E==="f"?.51:.001)&&(e[E]=n[E])}let{a:r,b:a,c:l,d,e:c,f:u}=o,p=`matrix(${r}, ${a}, ${l}, ${d}, ${c}, ${u})`,h=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;if(this.option("transformParent")&&(h=h.parentElement||h),h.style.transform===p)return;h.style.transform=p;const{contentWidth:f,contentHeight:m}=this.calculateContentDim();s.width=f,s.height=m,this.emit("afterTransform")}updateMetrics(e=!1){var n;if(!this||this.state===V.Destroy||this.isContentLoading)return;const i=Math.max(1,((n=window.visualViewport)===null||n===void 0?void 0:n.scale)||1),{container:s,content:o}=this,r=o instanceof HTMLImageElement,a=s.getBoundingClientRect(),l=getComputedStyle(this.container);let d=a.width*i,c=a.height*i;const u=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),p=d-(parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),h=c-u;this.containerRect={width:d,height:c,innerWidth:p,innerHeight:h};const f=parseFloat(o.dataset.width||"")||(k=>{let S=0;return S=k instanceof HTMLImageElement?k.naturalWidth:k instanceof SVGElement?k.width.baseVal.value:Math.max(k.offsetWidth,k.scrollWidth),S||0})(o),m=parseFloat(o.dataset.height||"")||(k=>{let S=0;return S=k instanceof HTMLImageElement?k.naturalHeight:k instanceof SVGElement?k.height.baseVal.value:Math.max(k.offsetHeight,k.scrollHeight),S||0})(o);let E=this.option("width",f)||ye,g=this.option("height",m)||ye;const b=E===ye,v=g===ye;typeof E!="number"&&(E=f),typeof g!="number"&&(g=m),b&&(E=f*(g/m)),v&&(g=m/(f/E));let R=o.parentElement instanceof HTMLPictureElement?o.parentElement:o;this.option("transformParent")&&(R=R.parentElement||R);const P=R.getAttribute("style")||"";R.style.setProperty("transform","none","important"),r&&(R.style.width="",R.style.height=""),R.offsetHeight;const D=o.getBoundingClientRect();let L=D.width*i,_=D.height*i,N=L,z=_;L=Math.min(L,E),_=Math.min(_,g),r?{width:L,height:_}=((k,S,U,I)=>{const O=U/k,x=I/S,C=Math.min(O,x);return{width:k*=C,height:S*=C}})(E,g,L,_):(L=Math.min(L,E),_=Math.min(_,g));let M=.5*(z-_),F=.5*(N-L);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:D.top-a.top+M,bottom:a.bottom-D.bottom+M,left:D.left-a.left+F,right:a.right-D.right+F,fitWidth:L,fitHeight:_,width:L,height:_,fullWidth:E,fullHeight:g}),R.style.cssText=P,r&&(R.style.width=`${L}px`,R.style.height=`${_}px`),this.setTransform(),e!==!0&&this.emit("refresh"),this.ignoreBounds||(w(this.targetScale)<w(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===V.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:e,contentHeight:n}=this.calculateContentDim(this.target),{targetScale:i,lockedAxis:s}=this,{fitWidth:o,fitHeight:r}=this.contentRect;let a=0,l=0,d=0,c=0;const u=this.option("infinite");if(u===!0||s&&u===s)a=-1/0,d=1/0,l=-1/0,c=1/0;else{let{containerRect:p,contentRect:h}=this,f=w(o*i,jt),m=w(r*i,jt),{innerWidth:E,innerHeight:g}=p;if(p.width===f&&(E=p.width),p.width===m&&(g=p.height),e>E){d=.5*(e-E),a=-1*d;let b=.5*(h.right-h.left);a+=b,d+=b}if(o>E&&e<E&&(a-=.5*(o-E),d-=.5*(o-E)),n>g){c=.5*(n-g),l=-1*c;let b=.5*(h.bottom-h.top);l+=b,c+=b}r>g&&n<g&&(a-=.5*(r-g),d-=.5*(r-g))}return{x:{min:a,max:d},y:{min:l,max:c}}}getBounds(){const e=this.option("bounds");return e!==ye?e:this.calculateBounds()}updateControls(){const e=this,n=e.container,{panMode:i,contentRect:s,targetScale:o,minScale:r}=e;let a=r,l=e.option("click")||!1;l&&(a=e.getNextScale(l));let d=e.canZoomIn(),c=e.canZoomOut(),u=i===Zs&&!!this.option("touch"),p=c&&u;if(u&&(w(o)<w(r)&&!this.panOnlyZoomed&&(p=!0),(w(s.width,1)>w(s.fitWidth,1)||w(s.height,1)>w(s.fitHeight,1))&&(p=!0)),w(s.width*o,1)<w(s.fitWidth,1)&&(p=!1),i===be&&(p=!1),Le(n,this.cn("isDraggable"),p),!this.option("zoom"))return;let h=d&&w(a)>w(o),f=!h&&!p&&c&&w(a)<w(o);Le(n,this.cn("canZoomIn"),h),Le(n,this.cn("canZoomOut"),f);for(const m of n.querySelectorAll("[data-panzoom-action]")){let E=!1,g=!1;switch(m.dataset.panzoomAction){case"zoomIn":d?E=!0:g=!0;break;case"zoomOut":c?E=!0:g=!0;break;case"toggleZoom":case"iterateZoom":d||c?E=!0:g=!0;const b=m.querySelector("g");b&&(b.style.display=d?"":"none")}E?(m.removeAttribute("disabled"),m.removeAttribute("tabindex")):g&&(m.setAttribute("disabled",""),m.setAttribute("tabindex","-1"))}}panTo({x:e=this.target.e,y:n=this.target.f,scale:i=this.targetScale,friction:s=this.option("friction"),angle:o=0,originX:r=0,originY:a=0,flipX:l=!1,flipY:d=!1,ignoreBounds:c=!1}){this.state!==V.Destroy&&this.applyChange({panX:e-this.target.e,panY:n-this.target.f,scale:i/this.targetScale,angle:o,originX:r,originY:a,friction:s,flipX:l,flipY:d,ignoreBounds:c})}applyChange({panX:e=0,panY:n=0,scale:i=1,angle:s=0,originX:o=-this.current.e,originY:r=-this.current.f,friction:a=this.option("friction"),flipX:l=!1,flipY:d=!1,ignoreBounds:c=!1,bounce:u=this.option("bounce")}){const p=this.state;if(p===V.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=a||0,this.ignoreBounds=c;const{current:h}=this,f=h.e,m=h.f,E=this.getMatrix(this.target);let g=new DOMMatrix().translate(f,m).translate(o,r).translate(e,n);if(this.option("zoom")){if(!c){const b=this.targetScale,v=this.minScale,R=this.maxScale;b*i<v&&(i=v/b),b*i>R&&(i=R/b)}g=g.scale(i)}g=g.translate(-o,-r).translate(-f,-m).multiply(E),s&&(g=g.rotate(s)),l&&(g=g.scale(-1,1)),d&&(g=g.scale(1,-1));for(const b of xe)b!=="e"&&b!=="f"&&(g[b]>this.minScale+1e-5||g[b]<this.minScale-1e-5)?this.target[b]=g[b]:this.target[b]=w(g[b],jt);(this.targetScale<this.scale||Math.abs(i-1)>.1||this.panMode===be||u===!1)&&!c&&this.clampTargetBounds(),p===V.Init?this.animate():this.isResting||(this.state=V.Panning,this.requestTick())}stop(e=!1){if(this.state===V.Init||this.state===V.Destroy)return;const n=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const i of xe)this.velocity[i]=0,e==="current"?this.current[i]=this.target[i]:e==="target"&&(this.target[i]=this.current[i]);this.setTransform(),j(this.container,"is-scaling"),j(this.container,"is-animating"),this.isTicking=!1,this.state=V.Ready,n&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),A(this.container,"is-animating"),this.isScaling&&A(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(e,n=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==be||!e||w(this.targetScale)<=w(this.minScale))return;this.emit("mouseMove",e);const{container:i,containerRect:s,contentRect:o}=this,r=s.width,a=s.height,l=i.getBoundingClientRect(),d=(e.clientX||0)-l.left,c=(e.clientY||0)-l.top;let{contentWidth:u,contentHeight:p}=this.calculateContentDim(this.target);const h=this.option("mouseMoveFactor");h>1&&(u!==r&&(u*=h),p!==a&&(p*=h));let f=.5*(u-r)-d/r*100/100*(u-r);f+=.5*(o.right-o.left);let m=.5*(p-a)-c/a*100/100*(p-a);m+=.5*(o.bottom-o.top),this.applyChange({panX:f-this.target.e,panY:m-this.target.f,friction:n})}zoomWithWheel(e){if(this.state===V.Destroy||this.state===V.Init)return;const n=Date.now();if(n-this.pwt<45)return void e.preventDefault();this.pwt=n;var i=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(d,c){return Math.abs(c)>Math.abs(d)?c:d});const s=Math.max(-1,Math.min(1,i)),{targetScale:o,maxScale:r,minScale:a}=this;let l=o*(100+45*s)/100;w(l)<w(a)&&w(o)<=w(a)?(this.cwd+=Math.abs(s),l=a):w(l)>w(r)&&w(o)>=w(r)?(this.cwd+=Math.abs(s),l=r):(this.cwd=0,l=Math.max(Math.min(l,r),a)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),w(l)!==w(o)&&this.zoomTo(l,{event:e}))}canZoomIn(){return this.option("zoom")&&(w(this.contentRect.width,1)<w(this.contentRect.fitWidth,1)||w(this.targetScale)<w(this.maxScale))}canZoomOut(){return this.option("zoom")&&w(this.targetScale)>w(this.minScale)}zoomIn(e=1.25,n){this.zoomTo(this.targetScale*e,n)}zoomOut(e=.8,n){this.zoomTo(this.targetScale*e,n)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:n=ye,originX:i=ye,originY:s=ye,event:o}={}){if(this.isContentLoading||this.state===V.Destroy)return;const{targetScale:r,fullScale:a,maxScale:l,coverScale:d}=this;if(this.stop(),this.panMode===be&&(o=this.pmme||o),o||i===ye||s===ye){const u=this.content.getBoundingClientRect(),p=this.container.getBoundingClientRect(),h=o?o.clientX:p.left+.5*p.width,f=o?o.clientY:p.top+.5*p.height;i=h-u.left-.5*u.width,s=f-u.top-.5*u.height}let c=1;typeof e=="number"?c=e:e==="full"?c=a:e==="cover"?c=d:e==="max"?c=l:e==="fit"?c=1:e==="next"&&(c=this.getNextScale("iterateZoom")),c=c/r||1,n=n===ye?c>1?.15:.25:n,this.applyChange({scale:c,originX:i,originY:s,friction:n}),o&&this.panMode===be&&this.panWithMouse(o,n)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:e,contentRect:n,target:i}=this;this.applyChange({panX:.5*e.width-(n.left+.5*n.fitWidth)-i.e,panY:.5*e.height-(n.top+.5*n.fitHeight)-i.f,scale:e.width/n.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:e,contentRect:n,target:i}=this;this.applyChange({panX:.5*e.width-(n.left+.5*n.fitWidth)-i.e,panY:.5*e.innerHeight-(n.top+.5*n.fitHeight)-i.f,scale:e.height/n.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:e}=this,n=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");e.classList.toggle(n);const s=e.classList.contains(n);s?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(s?"enterFS":"exitFS")}getMatrix(e=this.current){const{a:n,b:i,c:s,d:o,e:r,f:a}=e;return new DOMMatrix([n,i,s,o,r,a])}reset(e){if(this.state!==V.Init&&this.state!==V.Destroy){this.stop("current");for(const n of xe)this.target[n]=qt[n];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=e===void 0?this.option("friction"):e,this.state=V.Panning,this.requestTick())}}destroy(){this.stop(),this.state=V.Destroy,this.detachEvents(),this.detachObserver();const{container:e,content:n}=this,i=this.option("classes")||{};for(const s of Object.values(i))e.classList.remove(s+"");n&&(n.removeEventListener("load",this.onLoad),n.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(rt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Uh}),Object.defineProperty(rt,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const Qs=function(t,e){let n=!0;return(...i)=>{n&&(n=!1,t(...i),setTimeout(()=>{n=!0},e))}},Js=(t,e)=>{let n=[];return t.childNodes.forEach(i=>{i.nodeType!==Node.ELEMENT_NODE||e&&!i.matches(e)||n.push(i)}),n},qh={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};var J;(function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Destroy=2]="Destroy"})(J||(J={}));const Hn=t=>{if(typeof t=="string"||t instanceof HTMLElement)t={html:t};else{const e=t.thumb;e!==void 0&&(typeof e=="string"&&(t.thumbSrc=e),e instanceof HTMLImageElement&&(t.thumbEl=e,t.thumbElSrc=e.src,t.thumbSrc=e.src),delete t.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},t)},jh=(t={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},t);class De extends hn{constructor(e,n){super(n),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}}const Vh={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2};class Fr extends De{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;if(!e){e=document.createElement("ul"),A(e,this.cn("list")),e.setAttribute("role","tablist");const n=this.instance.container;n.appendChild(e),A(n,this.cn("hasDots")),this.list=e}return e}refresh(){var e;const n=this.instance.pages.length,i=Math.min(2,this.option("minCount")),s=Math.max(2e3,this.option("maxCount")),o=this.option("dynamicFrom");if(n<i||n>s)return void this.cleanup();const r=typeof o=="number"&&n>5&&n>=o,a=!this.list||this.isDynamic!==r||this.list.children.length!==n;a&&this.cleanup();const l=this.build();if(Le(l,this.cn("isDynamic"),!!r),a)for(let u=0;u<n;u++)l.append(this.createItem(u));let d,c=0;for(const u of[...l.children]){const p=c===this.instance.page;p&&(d=u),Le(u,this.cn("isCurrent"),p),(e=u.children[0])===null||e===void 0||e.setAttribute("aria-selected",p?"true":"false");for(const h of["isBeforePrev","isPrev","isNext","isAfterNext"])j(u,this.cn(h));c++}if(d=d||l.firstChild,r&&d){const u=d.previousElementSibling,p=u&&u.previousElementSibling;A(u,this.cn("isPrev")),A(p,this.cn("isBeforePrev"));const h=d.nextElementSibling,f=h&&h.nextElementSibling;A(h,this.cn("isNext")),A(f,this.cn("isAfterNext"))}this.isDynamic=r}createItem(e=0){var n;const i=document.createElement("li");i.setAttribute("role","presentation");const s=Ce(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return i.appendChild(s),(n=i.children[0])===null||n===void 0||n.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,j(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(Fr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Vh});const Vt="disabled",$t="next",eo="prev";class Br extends De{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const e=this.instance,n=e.pages.length,i=e.page;if(n<2)return void this.cleanup();this.build();let s=this.prev,o=this.next;s&&o&&(s.removeAttribute(Vt),o.removeAttribute(Vt),e.isInfinite||(i<=0&&s.setAttribute(Vt,""),i>=n-1&&o.setAttribute(Vt,"")))}addBtn(e){var n;const i=this.instance,s=document.createElement("button");s.setAttribute("tabindex","0"),s.setAttribute("title",i.localize(`{{${e.toUpperCase()}}}`)),A(s,this.cn("button")+" "+this.cn(e===$t?"isNext":"isPrev"));const o=i.isRTL?e===$t?eo:$t:e;var r;return s.innerHTML=i.localize(this.option(`${o}Tpl`)),s.dataset[`carousel${r=e,r?r.match("^[a-z]")?r.charAt(0).toUpperCase()+r.substring(1):r:""}`]="true",(n=this.container)===null||n===void 0||n.appendChild(s),s}build(){const e=this.instance.container,n=this.cn("container");let{container:i,prev:s,next:o}=this;i||(i=e.querySelector("."+n),this.isDom=!!i),i||(i=document.createElement("div"),A(i,n),e.appendChild(i)),this.container=i,o||(o=i.querySelector("[data-carousel-next]")),o||(o=this.addBtn($t)),this.next=o,s||(s=i.querySelector("[data-carousel-prev]")),s||(s=this.addBtn(eo)),this.prev=s}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(Br,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class Gr extends De{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){const{nav:e,target:n}=this;e&&n&&(e.options.initialSlide=n.options.initialPage,e.state===J.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),n.state===J.Ready?this.onTargetReady(n):n.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,n,i){this.onNavTouch(e,e.panzoom,i)}onNavTouch(e,n,i){var s,o;if(Math.abs(n.dragOffset.x)>3||Math.abs(n.dragOffset.y)>3)return;const r=i.target,{nav:a,target:l}=this;if(!a||!l||!r)return;const d=r.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!d)return;const c=parseInt(d.dataset.index||"",10)||0,u=l.getPageForSlide(c),p=a.getPageForSlide(c);a.slideTo(p),l.slideTo(u,{friction:((o=(s=this.nav)===null||s===void 0?void 0:s.plugins)===null||o===void 0?void 0:o.Sync.option("friction"))||0}),this.markSelectedSlide(c)}onNavCreateSlide(e,n){n.index===this.selectedIndex&&this.markSelectedSlide(n.index)}onTargetChange(){var e,n;const{target:i,nav:s}=this;if(!i||!s||s.state!==J.Ready||i.state!==J.Ready)return;const o=(n=(e=i.pages[i.page])===null||e===void 0?void 0:e.slides[0])===null||n===void 0?void 0:n.index,r=s.getPageForSlide(o);this.markSelectedSlide(o),s.slideTo(r,s.prevPage===null&&i.prevPage===null?{friction:0}:void 0)}markSelectedSlide(e){const n=this.nav;n&&n.state===J.Ready&&(this.selectedIndex=e,[...n.slides].map(i=>{i.el&&i.el.classList[i.index===e?"add":"remove"]("is-nav-selected")}))}attach(){const e=this;let n=e.options.target,i=e.options.nav;n?e.addAsNavFor(n):i&&e.addAsTargetFor(i)}detach(){const e=this,n=e.nav,i=e.target;n&&(n.off("ready",e.onNavReady),n.off("createSlide",e.onNavCreateSlide),n.off("Panzoom.click",e.onNavClick),n.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,i&&(i.off("ready",e.onTargetReady),i.off("refresh",e.onTargetChange),i.off("change",e.onTargetChange)),e.target=null}}Object.defineProperty(Gr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const $h={Navigation:Br,Dots:Fr,Sync:Gr},Wt="animationend",to="isSelected",Yt="slide";class st extends ki{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===J.Ready}get isInfinite(){let e=!1;const{contentDim:n,viewportDim:i,pages:s,slides:o}=this,r=o[0];return s.length>=2&&r&&n+r.dim>=i&&(e=this.option("infinite")),e}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(e,n={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:J.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof e=="string"&&(e=document.querySelector(e)),!e||!he(e))throw new Error("No Element found");this.container=e,this.slideNext=Qs(this.slideNext.bind(this),150),this.slidePrev=Qs(this.slidePrev.bind(this),150),this.userOptions=n,this.userPlugins=i,queueMicrotask(()=>{this.processOptions()})}processOptions(){var e,n;const i=fe({},st.defaults,this.userOptions);let s="";const o=i.breakpoints;if(o&&yi(o))for(const[r,a]of Object.entries(o))window.matchMedia(r).matches&&yi(a)&&(s+=r,fe(i,a));s===this.bp&&this.state!==J.Init||(this.bp=s,this.state===J.Ready&&(i.initialSlide=((n=(e=this.pages[this.page])===null||e===void 0?void 0:e.slides[0])===null||n===void 0?void 0:n.index)||0),this.state!==J.Init&&this.destroy(),super.setOptions(i),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=J.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},st.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=J.Ready,this.emit("ready")}initLayout(){const{container:e}=this,n=this.option("classes");A(e,this.cn("container")),Le(e,n.isLTR,!this.isRTL),Le(e,n.isRTL,this.isRTL),Le(e,n.isVertical,!this.isHorizontal),Le(e,n.isHorizontal,this.isHorizontal);let i=this.option("viewport")||e.querySelector(`.${n.viewport}`);i||(i=document.createElement("div"),A(i,n.viewport),i.append(...Js(e,`.${n.slide}`)),e.prepend(i)),i.addEventListener("scroll",this.onScroll);let s=this.option("track")||e.querySelector(`.${n.track}`);s||(s=document.createElement("div"),A(s,n.track),s.append(...Array.from(i.childNodes))),s.setAttribute("aria-live","polite"),i.contains(s)||i.prepend(s),this.viewport=i,this.track=s,this.emit("initLayout")}initSlides(){const{track:e}=this;if(!e)return;const n=[...this.slides],i=[];[...Js(e,`.${this.cn(Yt)}`)].forEach(s=>{if(he(s)){const o=Hn({el:s,isDom:!0,index:this.slides.length});i.push(o)}});for(let s of[...this.option("slides",[])||[],...n])i.push(Hn(s));this.slides=i;for(let s=0;s<this.slides.length;s++)this.slides[s].index=s;for(const s of i)this.emit("beforeInitSlide",s,s.index),this.emit("initSlide",s,s.index);this.emit("initSlides")}setInitialPage(){const e=this.option("initialSlide");this.page=typeof e=="number"?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:e,pages:n,isHorizontal:i}=this;if(!e||!n.length)return;let s=this.page;n[s]||(this.page=s=0);const o=(n[s].pos||0)*(this.isRTL&&i?1:-1),r=i?`${o}px`:"0",a=i?"0":`${o}px`;e.style.transform=`translate3d(${r}, ${a}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const e=this.option("Panzoom")||{};this.panzoom=new rt(this.viewport,fe({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:n=>!(this.pages.length<2&&!n.options.infinite),bounds:()=>this.getBounds(),maxVelocity:n=>Math.abs(n.target[this.axis]-n.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(n,i,...s)=>{this.emit(`Panzoom.${i}`,n,...s)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[];const{contentDim:n,viewportDim:i}=this;let s=this.option("slidesPerPage");s=(s==="auto"||n<=i)&&this.option("fill")!==!1?1/0:parseFloat(s+"");let o=0,r=0,a=0;for(const l of this.slides)(!e.length||r+l.dim-i>.05||a>=s)&&(e.push(jh()),o=e.length-1,r=0,a=0),e[o].slides.push(l),r+=l.dim+l.gap,a++;return e}processPages(){const e=this.pages,{contentDim:n,viewportDim:i,isInfinite:s}=this,o=this.option("center"),r=this.option("fill"),a=r&&o&&n>i&&!s;if(e.forEach((c,u)=>{var p;c.index=u,c.pos=((p=c.slides[0])===null||p===void 0?void 0:p.pos)||0,c.dim=0;for(const[h,f]of c.slides.entries())c.dim+=f.dim,h<c.slides.length-1&&(c.dim+=f.gap);a&&c.pos+.5*c.dim<.5*i?c.pos=0:a&&c.pos+.5*c.dim>=n-.5*i?c.pos=n-i:o&&(c.pos+=-.5*(i-c.dim))}),e.forEach(c=>{r&&!s&&n>i&&(c.pos=Math.max(c.pos,0),c.pos=Math.min(c.pos,n-i)),c.pos=w(c.pos,1e3),c.dim=w(c.dim,1e3),Math.abs(c.pos)<=.1&&(c.pos=0)}),s)return e;const l=[];let d;return e.forEach(c=>{const u=Object.assign({},c);d&&u.pos===d.pos?(d.dim+=u.dim,d.slides=[...d.slides,...u.slides]):(u.index=l.length,d=u,l.push(u))}),l}getPageFromIndex(e=0){const n=this.pages.length;let i;return e=parseInt((e||0).toString())||0,i=this.isInfinite?(e%n+n)%n:Math.max(Math.min(e,n-1),0),i}getSlideMetrics(e){var n,i;const s=this.isHorizontal?"width":"height";let o=0,r=0,a=e.el;const l=!(!a||a.parentNode);if(a?o=parseFloat(a.dataset[s]||"")||0:(a=document.createElement("div"),a.style.visibility="hidden",(this.track||document.body).prepend(a)),A(a,this.cn(Yt)+" "+e.class+" "+e.customClass),o)a.style[s]=`${o}px`,a.style[s==="width"?"height":"width"]="";else{l&&(this.track||document.body).prepend(a),o=a.getBoundingClientRect()[s]*Math.max(1,((n=window.visualViewport)===null||n===void 0?void 0:n.scale)||1);let c=a[this.isHorizontal?"offsetWidth":"offsetHeight"];c-1>o&&(o=c)}const d=getComputedStyle(a);return d.boxSizing==="content-box"&&(this.isHorizontal?(o+=parseFloat(d.paddingLeft)||0,o+=parseFloat(d.paddingRight)||0):(o+=parseFloat(d.paddingTop)||0,o+=parseFloat(d.paddingBottom)||0)),r=parseFloat(d[this.isHorizontal?"marginRight":"marginBottom"])||0,l?(i=a.parentElement)===null||i===void 0||i.removeChild(a):e.el||a.remove(),{dim:w(o,1e3),gap:w(r,1e3)}}getBounds(){const{isInfinite:e,isRTL:n,isHorizontal:i,pages:s}=this;let o={min:0,max:0};if(e)o={min:-1/0,max:1/0};else if(s.length){const r=s[0].pos,a=s[s.length-1].pos;o=n&&i?{min:r,max:a}:{min:-1*a,max:-1*r}}return{x:i?o:{min:0,max:0},y:i?{min:0,max:0}:o}}repositionSlides(){let e,{isHorizontal:n,isRTL:i,isInfinite:s,viewport:o,viewportDim:r,contentDim:a,page:l,pages:d,slides:c,panzoom:u}=this,p=0,h=0,f=0,m=0;u?m=-1*u.current[this.axis]:d[l]&&(m=d[l].pos||0),e=n?i?"right":"left":"top",i&&n&&(m*=-1);for(const v of c){const R=v.el;R?(e==="top"?(R.style.right="",R.style.left=""):R.style.top="",v.index!==p?R.style[e]=h===0?"":`${w(h,1e3)}px`:R.style[e]="",f+=v.dim+v.gap,p++):h+=v.dim+v.gap}if(s&&f&&o){let v=getComputedStyle(o),R="padding",P=n?"Right":"Bottom",D=parseFloat(v[R+(n?"Left":"Top")]);m-=D,r+=D,r+=parseFloat(v[R+P]);for(const L of c)L.el&&(w(L.pos)<w(r)&&w(L.pos+L.dim+L.gap)<w(m)&&w(m)>w(a-r)&&(L.el.style[e]=`${w(h+f,1e3)}px`),w(L.pos+L.gap)>=w(a-r)&&w(L.pos)>w(m+r)&&w(m)<w(r)&&(L.el.style[e]=`-${w(f,1e3)}px`))}let E,g,b=[...this.inTransition];if(b.length>1&&(E=d[b[0]],g=d[b[1]]),E&&g){let v=0;for(const R of c)R.el?this.inTransition.has(R.index)&&E.slides.indexOf(R)<0&&(R.el.style[e]=`${w(v+(E.pos-g.pos),1e3)}px`):v+=R.dim+R.gap}}createSlideEl(e){const{track:n,slides:i}=this;if(!n||!e||e.el&&e.el.parentNode)return;const s=e.el||document.createElement("div");A(s,this.cn(Yt)),A(s,e.class),A(s,e.customClass);const o=e.html;o&&(o instanceof HTMLElement?s.appendChild(o):s.innerHTML=e.html+"");const r=[];i.forEach((c,u)=>{c.el&&r.push(u)});const a=e.index;let l=null;r.length&&(l=i[r.reduce((c,u)=>Math.abs(u-a)<Math.abs(c-a)?u:c)]);const d=l&&l.el&&l.el.parentNode?l.index<e.index?l.el.nextSibling:l.el:null;n.insertBefore(s,n.contains(d)?d:null),e.el=s,this.emit("createSlide",e)}removeSlideEl(e,n=!1){const i=e==null?void 0:e.el;if(!i||!i.parentNode)return;const s=this.cn(to);if(i.classList.contains(s)&&(j(i,s),this.emit("unselectSlide",e)),e.isDom&&!n)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",e);const o=new CustomEvent(Wt);i.dispatchEvent(o),e.el&&(e.el.remove(),e.el=null)}transitionTo(e=0,n=this.option("transition")){var i,s,o,r;if(!n)return!1;const a=this.page,{pages:l,panzoom:d}=this;e=parseInt((e||0).toString())||0;const c=this.getPageFromIndex(e);if(!d||!l[c]||l.length<2||Math.abs((((s=(i=l[a])===null||i===void 0?void 0:i.slides[0])===null||s===void 0?void 0:s.dim)||0)-this.viewportDim)>1)return!1;let u=e>a?1:-1;this.isInfinite&&(a===0&&e===l.length-1&&(u=-1),a===l.length-1&&e===0&&(u=1));const p=l[c].pos*(this.isRTL?1:-1);if(a===c&&Math.abs(p-d.target[this.axis])<1)return!1;this.clearTransitions();const h=d.isResting;A(this.container,this.cn("inTransition"));const f=((o=l[a])===null||o===void 0?void 0:o.slides[0])||null,m=((r=l[c])===null||r===void 0?void 0:r.slides[0])||null;this.inTransition.add(m.index),this.createSlideEl(m);let E=f.el,g=m.el;h||n===Yt||(n="fadeFast",E=null);const b=this.isRTL?"next":"prev",v=this.isRTL?"prev":"next";return E&&(this.inTransition.add(f.index),f.transition=n,E.addEventListener(Wt,this.onAnimationEnd),E.classList.add(`f-${n}Out`,`to-${u>0?v:b}`)),g&&(m.transition=n,g.addEventListener(Wt,this.onAnimationEnd),g.classList.add(`f-${n}In`,`from-${u>0?b:v}`)),d.current[this.axis]=p,d.target[this.axis]=p,d.requestTick(),this.onChange(c),!0}manageSlideVisiblity(){const e=new Set,n=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const s of this.slides)i.has(s)?e.add(s):n.add(s);for(const s of this.inTransition)e.add(this.slides[s]);for(const s of e)this.createSlideEl(s),this.lazyLoadSlide(s);for(const s of n)e.has(s)||this.removeSlideEl(s);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const e="aria-hidden";let n=this.cn(to);if(n)for(const i of this.slides){const s=i.el;s&&(s.dataset.index=`${i.index}`,s.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?s.removeAttribute(e):s.setAttribute(e,"true"):this.pages[this.page].slides.includes(i)?(s.classList.contains(n)||(A(s,n),this.emit("selectSlide",i)),s.removeAttribute(e)):(s.classList.contains(n)&&(j(s,n),this.emit("unselectSlide",i)),s.setAttribute(e,"true")))}}flipInfiniteTrack(){const{axis:e,isHorizontal:n,isInfinite:i,isRTL:s,viewportDim:o,contentDim:r}=this,a=this.panzoom;if(!a||!i)return;let l=a.current[e],d=a.target[e]-l,c=0,u=.5*o;s&&n?(l<-u&&(c=-1,l+=r),l>r-u&&(c=1,l-=r)):(l>u&&(c=1,l-=r),l<-r+u&&(c=-1,l+=r)),c&&(a.current[e]=l,a.target[e]=l+d)}lazyLoadImg(e,n){const i=this,s="f-fadeIn",o="is-preloading";let r=!1,a=null;const l=()=>{r||(r=!0,a&&(a.remove(),a=null),j(n,o),n.complete&&(A(n,s),setTimeout(()=>{j(n,s)},350)),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",e))};A(n,o),n.src=n.dataset.lazySrcset||n.dataset.lazySrc||"",delete n.dataset.lazySrc,delete n.dataset.lazySrcset,n.addEventListener("error",()=>{l()}),n.addEventListener("load",()=>{l()}),setTimeout(()=>{const d=n.parentNode;d&&e.el&&(n.complete?l():r||(a=Ce(Ui),d.insertBefore(a,n)))},300)}lazyLoadSlide(e){const n=e&&e.el;if(!n)return;const i=new Set;let s=Array.from(n.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));n.dataset.lazySrc&&s.push(n),s.map(o=>{o instanceof HTMLImageElement?i.add(o):o instanceof HTMLElement&&o.dataset.lazySrc&&(o.style.backgroundImage=`url('${o.dataset.lazySrc}')`,delete o.dataset.lazySrc)});for(const o of i)this.lazyLoadImg(e,o)}onAnimationEnd(e){var n;const i=e.target,s=i?parseInt(i.dataset.index||"",10)||0:-1,o=this.slides[s],r=e.animationName;if(!i||!o||!r)return;const a=!!this.inTransition.has(s)&&o.transition;a&&r.substring(0,a.length+2)===`f-${a}`&&this.inTransition.delete(s),this.inTransition.size||this.clearTransitions(),s===this.page&&(!((n=this.panzoom)===null||n===void 0)&&n.isResting)&&this.emit("settle")}onDecel(e,n=0,i=0,s=0,o=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:r,isHorizontal:a,axis:l,pages:d}=this,c=d.length,u=Math.abs(Math.atan2(i,n)/(Math.PI/180));let p=0;if(p=u>45&&u<135?a?0:i:a?n:0,!c)return;let h=this.page,f=r&&a?1:-1;const m=e.current[l]*f;let{pageIndex:E}=this.getPageFromPosition(m);Math.abs(p)>5?(d[h].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(h=E),h=r&&a?p<0?h-1:h+1:p<0?h+1:h-1):h=s===0&&o===0?h:E,this.slideTo(h,{transition:!1,friction:e.option("decelFriction")})}onClick(e){const n=e.target,i=n&&he(n)?n.dataset:null;let s,o;i&&(i.carouselPage!==void 0?(o="slideTo",s=i.carouselPage):i.carouselNext!==void 0?o="slideNext":i.carouselPrev!==void 0&&(o="slidePrev")),o?(e.preventDefault(),e.stopPropagation(),n&&!n.hasAttribute("disabled")&&this[o](s)):this.emit("click",e)}onSlideTo(e){const n=e.detail||0;this.slideTo(this.getPageForSlide(n),{friction:0})}onChange(e,n=0){const i=this.page;this.prevPage=i,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==i&&(this.markSelectedSlides(),this.emit("change",e,i,n))}onRefresh(){let e=this.contentDim,n=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===n||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;(e=this.viewport)===null||e===void 0||e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,n=null){this.destroy(),this.state=J.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=n||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:n=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===J.Destroy)return;e=parseInt((e||0).toString())||0;const s=this.getPageFromIndex(e),{axis:o,isHorizontal:r,isRTL:a,pages:l,panzoom:d}=this,c=l.length,u=a&&r?1:-1;if(!d||!c)return;if(this.page!==s){const h=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",h,e),h.defaultPrevented)return}if(this.transitionTo(e,i))return;let p=l[s].pos;if(this.isInfinite){const h=this.contentDim,f=d.target[o]*u;c===2?p+=h*Math.floor(parseFloat(e+"")/2):p=[p,p-h,p+h].reduce(function(m,E){return Math.abs(E-f)<Math.abs(m-f)?E:m})}p*=u,Math.abs(d.target[o]-p)<1||(d.panTo({x:r?p:0,y:r?0:p,friction:n}),this.onChange(s))}slideToClosest(e){if(this.panzoom){const{pageIndex:n}=this.getPageFromPosition();this.slideTo(n,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),j(this.container,this.cn("inTransition"));const e=["to-prev","to-next","from-prev","from-next"];for(const n of this.slides){const i=n.el;if(i){i.removeEventListener(Wt,this.onAnimationEnd),i.classList.remove(...e);const s=n.transition;s&&i.classList.remove(`f-${s}Out`,`f-${s}In`)}}this.manageSlideVisiblity()}addSlide(e,n){var i,s,o,r;const a=this.panzoom,l=((i=this.pages[this.page])===null||i===void 0?void 0:i.pos)||0,d=((s=this.pages[this.page])===null||s===void 0?void 0:s.dim)||0,c=this.contentDim<this.viewportDim;let u=Array.isArray(n)?n:[n];const p=[];for(const h of u)p.push(Hn(h));this.slides.splice(e,0,...p);for(let h=0;h<this.slides.length;h++)this.slides[h].index=h;for(const h of p)this.emit("beforeInitSlide",h,h.index);if(this.page>=e&&(this.page+=p.length),this.updateMetrics(),a){const h=((o=this.pages[this.page])===null||o===void 0?void 0:o.pos)||0,f=((r=this.pages[this.page])===null||r===void 0?void 0:r.dim)||0,m=this.pages.length||1,E=this.isRTL?d-f:f-d,g=this.isRTL?l-h:h-l;c&&m===1?(e<=this.page&&(a.current[this.axis]-=E,a.target[this.axis]-=E),a.panTo({[this.isHorizontal?"x":"y"]:-1*h})):g&&e<=this.page&&(a.target[this.axis]-=g,a.current[this.axis]-=g,a.requestTick())}for(const h of p)this.emit("initSlide",h,h.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){const n=this.slides.length;e=(e%n+n)%n;const i=this.slides[e];if(i){this.removeSlideEl(i,!0),this.slides.splice(e,1);for(let s=0;s<this.slides.length;s++)this.slides[s].index=s;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){const{panzoom:e,viewport:n,track:i,slides:s,isHorizontal:o,isInfinite:r}=this;if(!i)return;const a=o?"width":"height",l=o?"offsetWidth":"offsetHeight";if(n){let u=Math.max(n[l],w(n.getBoundingClientRect()[a],1e3)),p=getComputedStyle(n),h="padding",f=o?"Right":"Bottom";u-=parseFloat(p[h+(o?"Left":"Top")])+parseFloat(p[h+f]),this.viewportDim=u}let d,c=0;for(const[u,p]of s.entries()){let h=0,f=0;!p.el&&d?(h=d.dim,f=d.gap):({dim:h,gap:f}=this.getSlideMetrics(p),d=p),h=w(h,1e3),f=w(f,1e3),p.dim=h,p.gap=f,p.pos=c,c+=h,(r||u<s.length-1)&&(c+=f)}c=w(c,1e3),this.contentDim=c,e&&(e.contentRect[a]=c,e.contentRect[o?"fullWidth":"fullHeight"]=c),this.pages=this.createPages(),this.pages=this.processPages(),this.state===J.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,n=!1,i=!1){e===void 0&&(e=this.page);const s=this,o=s.panzoom,r=s.contentDim,a=s.pages[e]||0;if(!a||!o)return e>this.page?-1:1;let l=-1*o.current.e,d=w((l-a.pos)/(1*a.dim),1e3),c=d,u=d;this.isInfinite&&i!==!0&&(c=w((l-a.pos+r)/(1*a.dim),1e3),u=w((l-a.pos-r)/(1*a.dim),1e3));let p=[d,c,u].reduce(function(h,f){return Math.abs(f)<Math.abs(h)?f:h});return n?p:p>1?1:p<-1?-1:p}setViewportHeight(){const{page:e,pages:n,viewport:i,isHorizontal:s}=this;if(!i||!n[e])return;let o=0;s&&this.track&&(this.track.style.height="auto",n[e].slides.forEach(r=>{r.el&&(o=Math.max(o,r.el.offsetHeight))})),i.style.height=o?`${o}px`:""}getPageForSlide(e){for(const n of this.pages)for(const i of n.slides)if(i.index===e)return n.index;return-1}getVisibleSlides(e=0){var n;const i=new Set;let{panzoom:s,contentDim:o,viewportDim:r,pages:a,page:l}=this;if(r){o=o+((n=this.slides[this.slides.length-1])===null||n===void 0?void 0:n.gap)||0;let d=0;d=s&&s.state!==V.Init&&s.state!==V.Destroy?-1*s.current[this.axis]:a[l]&&a[l].pos||0,this.isInfinite&&(d-=Math.floor(d/o)*o),this.isRTL&&this.isHorizontal&&(d*=-1);const c=d-r*e,u=d+r*(e+1),p=this.isInfinite?[-1,0,1]:[0];for(const h of this.slides)for(const f of p){const m=h.pos+f*o,E=m+h.dim+h.gap;m<u&&E>c&&i.add(h)}}return i}getPageFromPosition(e){const{viewportDim:n,contentDim:i,slides:s,pages:o,panzoom:r}=this,a=o.length,l=s.length,d=s[0],c=s[l-1],u=this.option("center");let p=0,h=0,f=0,m=e===void 0?-1*((r==null?void 0:r.target[this.axis])||0):e;u&&(m+=.5*n),this.isInfinite?(m<d.pos-.5*c.gap&&(m-=i,f=-1),m>c.pos+c.dim+.5*c.gap&&(m-=i,f=1)):m=Math.max(d.pos||0,Math.min(m,c.pos));let E=c,g=s.find(b=>{const v=b.pos-.5*E.gap,R=b.pos+b.dim+.5*b.gap;return E=b,m>=v&&m<R});return g||(g=c),h=this.getPageForSlide(g.index),p=h+f*a,{page:p,pageIndex:h}}setPageFromPosition(){const{pageIndex:e}=this.getPageFromPosition();this.onChange(e)}destroy(){if([J.Destroy].includes(this.state))return;this.state=J.Destroy;const{container:e,viewport:n,track:i,slides:s,panzoom:o}=this,r=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),o&&(o.destroy(),this.panzoom=null),s&&s.forEach(l=>{this.removeSlideEl(l)}),this.detachPlugins(),n&&(n.removeEventListener("scroll",this.onScroll),n.offsetParent&&i&&i.offsetParent&&n.replaceWith(...i.childNodes));for(const[l,d]of Object.entries(r))l!=="container"&&d&&e.classList.remove(d);this.track=null,this.viewport=null,this.page=0,this.slides=[];const a=this.events.get("ready");this.events=new Map,a&&this.events.set("ready",a)}}Object.defineProperty(st,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:rt}),Object.defineProperty(st,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:qh}),Object.defineProperty(st,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:$h});const zr=function(t){if(!he(t))return 0;const e=window.scrollY,n=window.innerHeight,i=e+n,s=t.getBoundingClientRect(),o=s.y+e,r=s.height,a=o+r;if(e>a||i<o)return 0;if(e<o&&i>a||o<e&&a>i)return 100;let l=r;o<e&&(l-=e-o),a>i&&(l-=a-i);const d=l/n*100;return Math.round(d)},Ct=!(typeof window>"u"||!window.document||!window.document.createElement);let qn;const jn=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),no=t=>{if(t&&Ct){qn===void 0&&document.createElement("div").focus({get preventScroll(){return qn=!0,!1}});try{if(qn)t.focus({preventScroll:!0});else{const e=window.scrollY||document.body.scrollTop,n=window.scrollX||document.body.scrollLeft;t.focus(),document.body.scrollTo({top:e,left:n,behavior:"auto"})}}catch{}}},kr=()=>{const t=document;let e,n="",i="",s="";return t.fullscreenEnabled?(n="requestFullscreen",i="exitFullscreen",s="fullscreenElement"):t.webkitFullscreenEnabled&&(n="webkitRequestFullscreen",i="webkitExitFullscreen",s="webkitFullscreenElement"),n&&(e={request:function(o=t.documentElement){return n==="webkitRequestFullscreen"?o[n](Element.ALLOW_KEYBOARD_INPUT):o[n]()},exit:function(){return t[s]&&t[i]()},isFullscreen:function(){return t[s]}}),e},vi={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},Nr),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},trapFocus:!0,wheel:"zoom"};var ie,re;(function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Closing=2]="Closing",t[t.CustomClosing=3]="CustomClosing",t[t.Destroy=4]="Destroy"})(ie||(ie={})),function(t){t[t.Loading=0]="Loading",t[t.Opening=1]="Opening",t[t.Ready=2]="Ready",t[t.Closing=3]="Closing"}(re||(re={}));let io="",Dt=!1,Xt=!1,Ye=null;const Ur=()=>{let t="",e="";const n=q.getInstance();if(n){const i=n.carousel,s=n.getSlide();if(i&&s){let o=s.slug||void 0,r=s.triggerEl||void 0;e=o||n.option("slug")||"",!e&&r&&r.dataset&&(e=r.dataset.fancybox||""),e&&e!=="true"&&(t="#"+e+(!o&&i.slides.length>1?"-"+(s.index+1):""))}}return{hash:t,slug:e,index:1}},fn=()=>{const t=new URL(document.URL).hash,e=t.slice(1).split("-"),n=e[e.length-1],i=n&&/^\+?\d+$/.test(n)&&parseInt(e.pop()||"1",10)||1;return{hash:t,slug:e.join("-"),index:i}},Hr=()=>{const{slug:t,index:e}=fn();if(!t)return;let n=document.querySelector(`[data-slug="${t}"]`);if(n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),q.getInstance())return;const i=document.querySelectorAll(`[data-fancybox="${t}"]`);i.length&&(n=i[e-1],n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},qr=()=>{if(q.defaults.Hash===!1)return;const t=q.getInstance();if((t==null?void 0:t.options.Hash)===!1)return;const{slug:e,index:n}=fn(),{slug:i}=Ur();t&&(e===i?t.jumpTo(n-1):(Dt=!0,t.close())),Hr()},jr=()=>{Ye&&clearTimeout(Ye),queueMicrotask(()=>{qr()})},so=()=>{window.addEventListener("hashchange",jr,!1),setTimeout(()=>{qr()},500)};Ct&&(/complete|interactive|loaded/.test(document.readyState)?so():document.addEventListener("DOMContentLoaded",so));const Zt="is-zooming-in";class Vr extends De{onCreateSlide(e,n,i){const s=this.instance.optionFor(i,"src")||"";i.el&&i.type==="image"&&typeof s=="string"&&this.setImage(i,s)}onRemoveSlide(e,n,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(e,n,i,s){j(this.instance.container,Zt);for(const o of n.slides){const r=o.panzoom;r&&o.index!==i&&r.reset(.35)}}onClose(){var e;const n=this.instance,i=n.container,s=n.getSlide();if(!i||!i.parentElement||!s)return;const{el:o,contentEl:r,panzoom:a,thumbElSrc:l}=s;if(!o||!l||!r||!a||a.isContentLoading||a.state===V.Init||a.state===V.Destroy)return;a.updateMetrics();let d=this.getZoomInfo(s);if(!d)return;this.instance.state=ie.CustomClosing,i.classList.remove(Zt),i.classList.add("is-zooming-out"),r.style.backgroundImage=`url('${l}')`;const c=i.getBoundingClientRect();(((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1)===1&&Object.assign(i.style,{position:"absolute",top:`${i.offsetTop+window.scrollY}px`,left:`${i.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${c.width}px`,height:`${c.height}px`,overflow:"hidden"});const{x:u,y:p,scale:h,opacity:f}=d;if(f){const m=((E,g,b,v)=>{const R=g-E,P=v-b;return D=>b+((D-E)/R*P||0)})(a.scale,h,1,0);a.on("afterTransform",()=>{r.style.opacity=m(a.scale)+""})}a.on("endAnimation",()=>{n.destroy()}),a.target.a=h,a.target.b=0,a.target.c=0,a.target.d=h,a.panTo({x:u,y:p,scale:h,friction:f?.2:.33,ignoreBounds:!0}),a.isResting&&n.destroy()}setImage(e,n){const i=this.instance;e.src=n,this.process(e,n).then(s=>{const{contentEl:o,imageEl:r,thumbElSrc:a,el:l}=e;if(i.isClosing()||!o||!r)return;o.offsetHeight;const d=!!i.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")&&l){l.addEventListener("contextmenu",p=>{p.preventDefault()});const u=document.createElement("div");A(u,"fancybox-protected"),o.appendChild(u)}if(a&&d){const u=s.contentRect,p=Math.max(u.fullWidth,u.fullHeight);let h=null;!d.opacity&&p>1200&&(h=document.createElement("img"),A(h,"fancybox-ghost"),h.src=a,o.appendChild(h));const f=()=>{h&&(A(h,"f-fadeFastOut"),setTimeout(()=>{h&&(h.remove(),h=null)},200))};(c=a,new Promise((m,E)=>{const g=new Image;g.onload=m,g.onerror=E,g.src=c})).then(()=>{i.hideLoading(e),e.state=re.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then(()=>{f(),this.instance.done(e)},()=>{}),h&&setTimeout(()=>{f()},p>2500?800:200)},()=>{i.hideLoading(e),i.revealContent(e)})}else{const u=this.optionFor(e,"initialSize"),p=this.optionFor(e,"zoom"),h={event:i.prevMouseMoveEvent||i.options.event,friction:p?.12:0};let f=i.optionFor(e,"showClass")||void 0,m=!0;i.isOpeningSlide(e)&&(u==="full"?s.zoomToFull(h):u==="cover"?s.zoomToCover(h):u==="max"?s.zoomToMax(h):m=!1,s.stop("current")),m&&f&&(f=s.isDragging?"f-fadeIn":""),i.hideLoading(e),i.revealContent(e,f)}var c},()=>{i.setError(e,"{{IMAGE_ERROR}}")})}process(e,n){return new Promise((i,s)=>{var o;const r=this.instance,a=e.el;r.clearContent(e),r.showLoading(e);let l=this.optionFor(e,"content");if(typeof l=="string"&&(l=Ce(l)),!l||!he(l)){if(l=document.createElement("img"),l instanceof HTMLImageElement){let d="",c=e.caption;d=typeof c=="string"&&c?c.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${e.index+1} of ${((o=r.carousel)===null||o===void 0?void 0:o.pages.length)||1}`,l.src=n||"",l.alt=d,l.draggable=!1,e.srcset&&l.setAttribute("srcset",e.srcset),this.instance.isOpeningSlide(e)&&(l.fetchPriority="high")}e.sizes&&l.setAttribute("sizes",e.sizes)}A(l,"fancybox-image"),e.imageEl=l,r.setContent(e,l,!1),e.panzoom=new rt(a,fe({transformParent:!0},this.option("Panzoom")||{},{content:l,width:(d,c)=>r.optionFor(e,"width","auto",c)||"auto",height:(d,c)=>r.optionFor(e,"height","auto",c)||"auto",wheel:()=>{const d=r.option("wheel");return(d==="zoom"||d=="pan")&&d},click:(d,c)=>{var u,p;if(r.isCompact||r.isClosing()||e.index!==((u=r.getSlide())===null||u===void 0?void 0:u.index))return!1;if(c){const f=c.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(f.nodeName))return!1}let h=!c||c.target&&((p=e.contentEl)===null||p===void 0?void 0:p.contains(c.target));return r.option(h?"contentClick":"backdropClick")||!1},dblClick:()=>r.isCompact?"toggleZoom":r.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:d=>{i(d)},error:()=>{s()},destroy:()=>{s()}}}))})}zoomIn(e){return new Promise((n,i)=>{const s=this.instance,o=s.container,{panzoom:r,contentEl:a,el:l}=e;r&&r.updateMetrics();const d=this.getZoomInfo(e);if(!(d&&l&&a&&r&&o))return void i();const{x:c,y:u,scale:p,opacity:h}=d,f=()=>{e.state!==re.Closing&&(h&&(a.style.opacity=Math.max(Math.min(1,1-(1-r.scale)/(1-p)),0)+""),r.scale>=1&&r.scale>r.targetScale-.1&&n(r))},m=b=>{(b.scale<.99||b.scale>1.01)&&!b.isDragging||(j(o,Zt),a.style.opacity="",b.off("endAnimation",m),b.off("touchStart",m),b.off("afterTransform",f),n(b))};r.on("endAnimation",m),r.on("touchStart",m),r.on("afterTransform",f),r.on(["error","destroy"],()=>{i()}),r.panTo({x:c,y:u,scale:p,friction:0,ignoreBounds:!0}),r.stop("current");const E={event:r.panMode==="mousemove"?s.prevMouseMoveEvent||s.options.event:void 0},g=this.optionFor(e,"initialSize");A(o,Zt),s.hideLoading(e),g==="full"?r.zoomToFull(E):g==="cover"?r.zoomToCover(E):g==="max"?r.zoomToMax(E):r.reset(.172)})}getZoomInfo(e){const{el:n,imageEl:i,thumbEl:s,panzoom:o}=e,r=this.instance,a=r.container;if(!n||!i||!s||!o||zr(s)<3||!this.optionFor(e,"zoom")||!a||r.state===ie.Destroy||getComputedStyle(a).getPropertyValue("--f-images-zoom")==="0")return!1;const l=window.visualViewport||null;if((l?l.scale:1)!==1)return!1;let{top:d,left:c,width:u,height:p}=s.getBoundingClientRect(),{top:h,left:f,fitWidth:m,fitHeight:E}=o.contentRect;if(!(u&&p&&m&&E))return!1;const g=o.container.getBoundingClientRect();f+=g.left,h+=g.top;const b=-1*(f+.5*m-(c+.5*u)),v=-1*(h+.5*E-(d+.5*p)),R=u/m;let P=this.option("zoomOpacity")||!1;return P==="auto"&&(P=Math.abs(u/p-m/E)>.1),{x:b,y:v,scale:R,opacity:P}}attach(){const e=this,n=e.instance;n.on("Carousel.change",e.onChange),n.on("Carousel.createSlide",e.onCreateSlide),n.on("Carousel.removeSlide",e.onRemoveSlide),n.on("close",e.onClose)}detach(){const e=this,n=e.instance;n.off("Carousel.change",e.onChange),n.off("Carousel.createSlide",e.onCreateSlide),n.off("Carousel.removeSlide",e.onRemoveSlide),n.off("close",e.onClose)}}Object.defineProperty(Vr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;const Vn="html",oo="image",$n="map",Ne="youtube",Ve="vimeo",wt="html5video",ro=(t,e={})=>{const n=new URL(t),i=new URLSearchParams(n.search),s=new URLSearchParams;for(const[a,l]of[...i,...Object.entries(e)]){let d=l+"";if(a==="t"){let c=d.match(/((\d*)m)?(\d*)s?/);c&&s.set("start",60*parseInt(c[2]||"0")+parseInt(c[3]||"0")+"")}else s.set(a,d)}let o=s+"",r=t.match(/#t=((.*)?\d+s)/);return r&&(o+=`#t=${r[1]}`),o},Wh={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},Yh=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class $r extends De{onBeforeInitSlide(e,n,i){this.processType(i)}onCreateSlide(e,n,i){this.setContent(i)}onClearContent(e,n){n.xhr&&(n.xhr.abort(),n.xhr=null);const i=n.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",n.iframeEl=null);const s=n.contentEl,o=n.placeholderEl;if(n.type==="inline"&&s&&o)s.classList.remove("fancybox__content"),getComputedStyle(s).getPropertyValue("display")!=="none"&&(s.style.display="none"),setTimeout(()=>{o&&(s&&o.parentNode&&o.parentNode.insertBefore(s,o),o.remove())},0),n.contentEl=void 0,n.placeholderEl=void 0;else for(;n.el&&n.el.firstChild;)n.el.removeChild(n.el.firstChild)}onSelectSlide(e,n,i){i.state===re.Ready&&this.playVideo()}onUnselectSlide(e,n,i){var s,o;if(i.type===wt){try{(o=(s=i.el)===null||s===void 0?void 0:s.querySelector("video"))===null||o===void 0||o.pause()}catch{}return}let r;i.type===Ve?r={method:"pause",value:"true"}:i.type===Ne&&(r={event:"command",func:"pauseVideo"}),r&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(r),"*"),i.poller&&clearTimeout(i.poller)}onDone(e,n){e.isCurrentSlide(n)&&!e.isClosing()&&this.playVideo()}onRefresh(e,n){n.slides.forEach(i=>{i.el&&(this.resizeIframe(i),this.setAspectRatio(i))})}onMessage(e){try{let n=JSON.parse(e.data);if(e.origin==="https://player.vimeo.com"){if(n.event==="ready")for(let i of Array.from(document.getElementsByClassName("fancybox__iframe")))i instanceof HTMLIFrameElement&&i.contentWindow===e.source&&(i.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&n.event==="onReady"){const i=document.getElementById(n.id);i&&(i.dataset.ready="true")}}catch{}}loadAjaxContent(e){const n=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);const i=this.instance,s=new XMLHttpRequest;i.showLoading(e),s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&i.state===ie.Ready&&(i.hideLoading(e),s.status===200?i.setContent(e,s.responseText):i.setError(e,s.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const o=e.ajax||null;s.open(o?"POST":"GET",n+""),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(o),e.xhr=s}setInlineContent(e){let n=null;if(he(e.src))n=e.src;else if(typeof e.src=="string"){const i=e.src.split("#",2).pop();n=i?document.getElementById(i):null}if(n){if(e.type==="clone"||n.closest(".fancybox__slide")){n=n.cloneNode(!0);const i=n.dataset.animationName;i&&(n.classList.remove(i),delete n.dataset.animationName);let s=n.getAttribute("id");s=s?`${s}--clone`:`clone-${this.instance.id}-${e.index}`,n.setAttribute("id",s)}else if(n.parentNode){const i=document.createElement("div");i.classList.add("fancybox-placeholder"),n.parentNode.insertBefore(i,n),e.placeholderEl=i}this.instance.setContent(e,n)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){const{src:n,el:i}=e;if(!n||typeof n!="string"||!i)return;i.classList.add("is-loading");const s=this.instance,o=document.createElement("iframe");o.className="fancybox__iframe",o.setAttribute("id",`fancybox__iframe_${s.id}_${e.index}`);for(const[a,l]of Object.entries(this.optionFor(e,"iframeAttr")||{}))o.setAttribute(a,l);o.onerror=()=>{s.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=o;const r=this.optionFor(e,"preload");if(e.type!=="iframe"||r===!1)return o.setAttribute("src",e.src+""),s.setContent(e,o,!1),this.resizeIframe(e),void s.revealContent(e);s.showLoading(e),o.onload=()=>{if(!o.src.length)return;const a=o.dataset.ready!=="true";o.dataset.ready="true",this.resizeIframe(e),a?s.revealContent(e):s.hideLoading(e)},o.setAttribute("src",n),s.setContent(e,o,!1)}resizeIframe(e){const{type:n,iframeEl:i}=e;if(n===Ne||n===Ve)return;const s=i==null?void 0:i.parentElement;if(!i||!s)return;let o=e.autoSize;o===void 0&&(o=this.optionFor(e,"autoSize"));let r=e.width||0,a=e.height||0;r&&a&&(o=!1);const l=s&&s.style;if(e.preload!==!1&&o!==!1&&l)try{const d=window.getComputedStyle(s),c=parseFloat(d.paddingLeft)+parseFloat(d.paddingRight),u=parseFloat(d.paddingTop)+parseFloat(d.paddingBottom),p=i.contentWindow;if(p){const h=p.document,f=h.getElementsByTagName(Vn)[0],m=h.body;l.width="",m.style.overflow="hidden",r=r||f.scrollWidth+c,l.width=`${r}px`,m.style.overflow="",l.flex="0 0 auto",l.height=`${m.scrollHeight}px`,a=f.scrollHeight+u}}catch{}if(r||a){const d={flex:"0 1 auto",width:"",height:""};r&&r!=="auto"&&(d.width=`${r}px`),a&&a!=="auto"&&(d.height=`${a}px`),Object.assign(l,d)}}playVideo(){const e=this.instance.getSlide();if(!e)return;const{el:n}=e;if(!n||!n.offsetParent||!this.optionFor(e,"videoAutoplay"))return;if(e.type===wt)try{const s=n.querySelector("video");if(s){const o=s.play();o!==void 0&&o.then(()=>{}).catch(r=>{s.muted=!0,s.play()})}}catch{}if(e.type!==Ne&&e.type!==Ve)return;const i=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let s;if(e.iframeEl.dataset.ready==="true")return s=e.type===Ne?{event:"command",func:"playVideo"}:{method:"play",value:"true"},s&&e.iframeEl.contentWindow.postMessage(JSON.stringify(s),"*"),void(e.poller=void 0);e.type===Ne&&(s={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(s),"*"))}e.poller=setTimeout(i,250)};i()}processType(e){if(e.html)return e.type=Vn,e.src=e.html,void(e.html="");const n=this.instance.optionFor(e,"src","");if(!n||typeof n!="string")return;let i=e.type,s=null;if(s=n.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const o=this.optionFor(e,Ne),{nocookie:r}=o,a=function(u,p){var h={};for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&p.indexOf(f)<0&&(h[f]=u[f]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var m=0;for(f=Object.getOwnPropertySymbols(u);m<f.length;m++)p.indexOf(f[m])<0&&Object.prototype.propertyIsEnumerable.call(u,f[m])&&(h[f[m]]=u[f[m]])}return h}(o,["nocookie"]),l=`www.youtube${r?"-nocookie":""}.com`,d=ro(n,a),c=encodeURIComponent(s[2]);e.videoId=c,e.src=`https://${l}/embed/${c}?${d}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${c}/mqdefault.jpg`,i=Ne}else if(s=n.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const o=ro(n,this.optionFor(e,Ve)),r=encodeURIComponent(s[1]),a=s[4]||"";e.videoId=r,e.src=`https://player.vimeo.com/video/${r}?${a?`h=${a}${o?"&":""}`:""}${o}`,i=Ve}if(!i&&e.triggerEl){const o=e.triggerEl.dataset.type;Yh.includes(o)&&(i=o)}i||typeof n=="string"&&(n.charAt(0)==="#"?i="inline":(s=n.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i=wt,e.videoFormat=e.videoFormat||"video/"+(s[1]==="ogv"?"ogg":s[1])):n.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i=oo:n.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),(s=n.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${s[1]}/?ll=${(s[2]?s[2]+"&z="+Math.floor(parseFloat(s[3]))+(s[4]?s[4].replace(/^\//,"&"):""):s[4]+"").replace(/\?/,"&")}&output=${s[4]&&s[4].indexOf("layer=c")>0?"svembed":"embed"}`,i=$n):(s=n.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${s[1]}/maps?q=${s[2].replace("query=","q=").replace("api=1","")}&output=embed`,i=$n),i=i||this.instance.option("defaultType"),e.type=i,i===oo&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){const n=this.instance.optionFor(e,"src")||"";if(e&&e.type&&n){switch(e.type){case Vn:this.instance.setContent(e,n);break;case wt:const i=this.option("videoTpl");i&&this.instance.setContent(e,i.replace(/\{\{src\}\}/gi,n+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case $n:case Ne:case Ve:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){const n=e.contentEl;if(!(e.el&&n&&e.type&&[Ne,Ve,wt].includes(e.type)))return;let i,s=e.width||"auto",o=e.height||"auto";if(s==="auto"||o==="auto"){i=this.optionFor(e,"videoRatio");const d=(i+"").match(/(\d+)\s*\/\s?(\d+)/);i=d&&d.length>2?parseFloat(d[1])/parseFloat(d[2]):parseFloat(i+"")}else s&&o&&(i=s/o);if(!i)return;n.style.aspectRatio="",n.style.width="",n.style.height="",n.offsetHeight;const r=n.getBoundingClientRect(),a=r.width||1,l=r.height||1;n.style.aspectRatio=i+"",i<a/l?(o=o==="auto"?l:Math.min(l,o),n.style.width="auto",n.style.height=`${o}px`):(s=s==="auto"?a:Math.min(a,s),n.style.width=`${s}px`,n.style.height="auto")}attach(){const e=this,n=e.instance;n.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),n.on("Carousel.createSlide",e.onCreateSlide),n.on("Carousel.selectSlide",e.onSelectSlide),n.on("Carousel.unselectSlide",e.onUnselectSlide),n.on("Carousel.Panzoom.refresh",e.onRefresh),n.on("done",e.onDone),n.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){const e=this,n=e.instance;n.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),n.off("Carousel.createSlide",e.onCreateSlide),n.off("Carousel.selectSlide",e.onSelectSlide),n.off("Carousel.unselectSlide",e.onUnselectSlide),n.off("Carousel.Panzoom.refresh",e.onRefresh),n.off("done",e.onDone),n.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}}Object.defineProperty($r,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Wh});const Kt="play",Qt="pause",Pt="ready";class Wr extends De{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Pt}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==Pt}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,!((e=this.instance.panzoom)===null||e===void 0)&&e.isResting&&this.resume()}onTimerEnd(){const e=this.instance;this.state==="play"&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();const n=this.instance,i=((e=n.pages[n.page])===null||e===void 0?void 0:e.slides)||[];let s=this.option("progressParentEl");if(s||(s=(i.length===1?i[0].el:null)||n.viewport),!s)return null;const o=document.createElement("div");return A(o,"f-progress"),s.prepend(o),this.progressBar=o,o.offsetHeight,o}set(){const e=this,n=e.instance;if(n.pages.length<2||e.timer)return;const i=e.option("timeout");e.state=Kt,A(n.container,"has-autoplay");let s=e.createProgressBar();s&&(s.style.transitionDuration=`${i}ms`,s.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},i),e.emit("set")}clear(){const e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){const e=this;if(e.set(),e.state!==Pt){if(e.option("pauseOnHover")){const n=e.instance.container;n.addEventListener("mouseenter",e.onMouseEnter,!1),n.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){const e=this,n=e.state,i=e.instance.container;e.clear(),e.state=Pt,i.removeEventListener("mouseenter",e.onMouseEnter,!1),i.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),j(i,"has-autoplay"),n!==Pt&&e.emit("stop")}pause(){const e=this;e.state===Kt&&(e.state=Qt,e.clear(),e.emit(Qt))}resume(){const e=this,n=e.instance;if(n.isInfinite||n.page!==n.pages.length-1)if(e.state!==Kt){if(e.state===Qt&&!e.inHover){const i=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",i),i.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===Kt||this.state===Qt?this.stop():this.start()}attach(){const e=this,n=e.instance;n.on("ready",e.onReady),n.on("Panzoom.startAnimation",e.onChange),n.on("Panzoom.endAnimation",e.onSettle),n.on("Panzoom.touchMove",e.onChange)}detach(){const e=this,n=e.instance;n.off("ready",e.onReady),n.off("Panzoom.startAnimation",e.onChange),n.off("Panzoom.endAnimation",e.onSettle),n.off("Panzoom.touchMove",e.onChange),e.stop()}}Object.defineProperty(Wr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class Yr extends De{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){const n=e.carousel;if(!n)return;const i=e.container;i&&(n.options.Autoplay=fe({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:s=>{var o;i.classList.add("has-slideshow"),((o=e.getSlide())===null||o===void 0?void 0:o.state)!==re.Ready&&s.pause()},stop:()=>{i.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(s,o)=>{var r,a,l;!o||!o.cancelable||((r=e.getSlide())===null||r===void 0?void 0:r.state)===re.Ready&&(!((l=(a=e.carousel)===null||a===void 0?void 0:a.panzoom)===null||l===void 0)&&l.isResting)||o.preventDefault()}}}),n.attachPlugins({Autoplay:Wr}),this.ref=n.plugins.Autoplay)}onReady(e){const n=e.carousel,i=this.ref;i&&n&&this.option("playOnStart")&&(n.isInfinite||n.page<n.pages.length-1)&&i.start()}onDone(e,n){const i=this.ref,s=e.carousel;if(!i||!s)return;const o=n.panzoom;o&&o.on("startAnimation",()=>{e.isCurrentSlide(n)&&i.stop()}),e.isCurrentSlide(n)&&i.resume()}onKeydown(e,n){var i;const s=this.ref;s&&n===this.option("key")&&((i=document.activeElement)===null||i===void 0?void 0:i.nodeName)!=="BUTTON"&&s.toggle()}attach(){const e=this,n=e.instance;n.on("Carousel.init",e.onPrepare),n.on("Carousel.ready",e.onReady),n.on("done",e.onDone),n.on("keydown",e.onKeydown)}detach(){const e=this,n=e.instance;n.off("Carousel.init",e.onPrepare),n.off("Carousel.ready",e.onReady),n.off("done",e.onDone),n.off("keydown",e.onKeydown)}}Object.defineProperty(Yr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:t=>{var e;return((e=t.instance.container)===null||e===void 0?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||t.instance.container},timeout:3e3}});const Xr={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var Fe;(function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Hidden=2]="Hidden"})(Fe||(Fe={}));const ao="isResting",Jt="thumbWidth",ht="thumbHeight",Ae="thumbClipWidth";let Zr=class extends De{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Fe.Init})}get isModern(){return this.type==="modern"}onInitSlide(t,e){const n=e.el?e.el.dataset:void 0;n&&(e.thumbSrc=n.thumbSrc||e.thumbSrc||"",e[Ae]=parseFloat(n[Ae]||"")||e[Ae]||0,e[ht]=parseFloat(n.thumbHeight||"")||e[ht]||0),this.addSlide(e)}onInitSlides(){this.build()}onChange(){var t;if(!this.isModern)return;const e=this.container,n=this.instance,i=n.panzoom,s=this.carousel,o=s?s.panzoom:null,r=n.page;if(i&&s&&o){if(i.isDragging){j(e,this.cn(ao));let a=((t=s.pages[r])===null||t===void 0?void 0:t.pos)||0;a+=n.getProgress(r)*(this[Ae]+this.thumbGap);let l=o.getBounds();-1*a>l.x.min&&-1*a<l.x.max&&o.panTo({x:-1*a,friction:.12})}else Le(e,this.cn(ao),i.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(const t of this.instance.slides||[])this.resizeModernSlide(t);this.shiftModern()}isDisabled(){const t=this.option("minCount")||0;if(t){const n=this.instance;let i=0;for(const s of n.slides||[])s.thumbSrc&&i++;if(i<t)return!0}const e=this.option("type");return["modern","classic"].indexOf(e)<0}getThumb(t){const e=this.option("thumbTpl")||"";return{html:this.instance.localize(e,[["%i",t.index],["%d",t.index+1],["%s",t.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(t){const e=this.carousel;e&&e.addSlide(t.index,this.getThumb(t))}getSlides(){const t=[];for(const e of this.instance.slides||[])t.push(this.getThumb(e));return t}resizeModernSlide(t){this.isModern&&(t[Jt]=t[Ae]&&t[ht]?Math.round(this[ht]*(t[Ae]/t[ht])):this[Jt])}updateProps(){const t=this.container;if(!t)return;const e=n=>parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-"+n))||0;this.thumbGap=e("gap"),this.thumbExtraGap=e("extra-gap"),this[Jt]=e("width")||40,this[Ae]=e("clip-width")||40,this[ht]=e("height")||40}build(){const t=this;if(t.state!==Fe.Init)return;if(t.isDisabled())return void t.emit("disabled");const e=t.instance,n=e.container,i=t.getSlides(),s=t.option("type");t.type=s;const o=t.option("parentEl"),r=t.cn("container"),a=t.cn("track");let l=o==null?void 0:o.querySelector("."+r);l||(l=document.createElement("div"),A(l,r),o?o.appendChild(l):n.after(l)),A(l,`is-${s}`),A(n,t.cn("hasThumbs")),t.container=l,t.updateProps();let d=l.querySelector("."+a);d||(d=document.createElement("div"),A(d,t.cn("track")),l.appendChild(d)),t.track=d;const c=fe({},{track:d,infinite:!1,center:!0,fill:s==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},t.option("Carousel")||{},{Sync:{target:e},slides:i}),u=new e.constructor(l,c);u.on("createSlide",(p,h)=>{t.setProps(h.index),t.emit("createSlide",h,h.el)}),u.on("ready",()=>{t.shiftModern(),t.emit("ready")}),u.on("refresh",()=>{t.shiftModern()}),u.on("Panzoom.click",(p,h,f)=>{t.onClick(f)}),t.carousel=u,t.state=Fe.Ready}onClick(t){t.preventDefault(),t.stopPropagation();const e=this.instance,{pages:n,page:i}=e,s=m=>{if(m){const E=m.closest("[data-carousel-index]");if(E)return[parseInt(E.dataset.carouselIndex||"",10)||0,E]}return[-1,void 0]},o=(m,E)=>{const g=document.elementFromPoint(m,E);return g?s(g):[-1,void 0]};let[r,a]=s(t.target);if(r>-1)return;const l=this[Ae],d=t.clientX,c=t.clientY;let[u,p]=o(d-l,c),[h,f]=o(d+l,c);p&&f?(r=Math.abs(d-p.getBoundingClientRect().right)<Math.abs(d-f.getBoundingClientRect().left)?u:h,r===i&&(r=r===u?h:u)):p?r=u:f&&(r=h),r>-1&&n[r]&&e.slideTo(r)}getShift(t){var e;const n=this,{instance:i}=n,s=n.carousel;if(!i||!s)return 0;const o=n[Jt],r=n[Ae],a=n.thumbGap,l=n.thumbExtraGap;if(!(!((e=s.slides[t])===null||e===void 0)&&e.el))return 0;const d=.5*(o-r),c=i.pages.length-1;let u=i.getProgress(0),p=i.getProgress(c),h=i.getProgress(t,!1,!0),f=0,m=d+l+a;const E=u<0&&u>-1,g=p>0&&p<1;return t===0?(f=m*Math.abs(u),g&&u===1&&(f-=m*Math.abs(p))):t===c?(f=m*Math.abs(p)*-1,E&&p===-1&&(f+=m*Math.abs(u))):E||g?(f=-1*m,f+=m*Math.abs(u),f+=m*(1-Math.abs(p))):f=m*h,f}setProps(t){var e;const n=this;if(!n.isModern)return;const{instance:i}=n,s=n.carousel;if(i&&s){const o=(e=s.slides[t])===null||e===void 0?void 0:e.el;if(o&&o.childNodes.length){let r=w(1-Math.abs(i.getProgress(t))),a=w(n.getShift(t));o.style.setProperty("--progress",r?r+"":""),o.style.setProperty("--shift",a+"")}}}shiftModern(){const t=this;if(!t.isModern)return;const{instance:e,track:n}=t,i=e.panzoom,s=t.carousel;if(!(e&&n&&i&&s)||i.state===V.Init||i.state===V.Destroy)return;for(const r of e.slides)t.setProps(r.index);let o=(t[Ae]+t.thumbGap)*(s.slides.length||0);n.style.setProperty("--width",o+"")}cleanup(){const t=this;t.carousel&&t.carousel.destroy(),t.carousel=null,t.container&&t.container.remove(),t.container=null,t.track&&t.track.remove(),t.track=null,t.state=Fe.Init,j(t.instance.container,t.cn("hasThumbs"))}attach(){const t=this,e=t.instance;e.on("initSlide",t.onInitSlide),e.state===J.Init?e.on("initSlides",t.onInitSlides):t.onInitSlides(),e.on(["change","Panzoom.afterTransform"],t.onChange),e.on("Panzoom.refresh",t.onRefresh)}detach(){const t=this,e=t.instance;e.off("initSlide",t.onInitSlide),e.off("initSlides",t.onInitSlides),e.off(["change","Panzoom.afterTransform"],t.onChange),e.off("Panzoom.refresh",t.onRefresh),t.cleanup()}};Object.defineProperty(Zr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Xr});const Xh=Object.assign(Object.assign({},Xr),{key:"t",showOnStart:!0,parentEl:null}),lo="is-masked",co="aria-hidden";class Kr extends De{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,n){n.stopPropagation()}onCreateSlide(e,n){var i,s,o;const r=((o=(s=(i=this.instance)===null||i===void 0?void 0:i.carousel)===null||s===void 0?void 0:s.slides[n.index])===null||o===void 0?void 0:o.type)||"",a=n.el;if(a&&r){let l=`for-${r}`;["video","youtube","vimeo","html5video"].includes(r)&&(l+=" for-video"),A(a,l)}}onInit(){var e;const n=this,i=n.instance,s=i.carousel;if(n.ref||!s)return;const o=n.option("parentEl")||i.footer||i.container;if(!o)return;const r=fe({},n.options,{parentEl:o,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:a=>{const l=a.container;l&&this.hidden&&(n.refresh(),l.style.transition="none",n.hide(),l.offsetHeight,queueMicrotask(()=>{l.style.transition="",n.show()}))}}});r.Carousel=r.Carousel||{},r.Carousel.on=fe(((e=n.options.Carousel)===null||e===void 0?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),s.options.Thumbs=r,s.attachPlugins({Thumbs:Zr}),n.ref=s.plugins.Thumbs,n.option("showOnStart")||(n.ref.state=Fe.Hidden,n.hidden=!0)}onResize(){var e;const n=(e=this.ref)===null||e===void 0?void 0:e.container;n&&(n.style.maxHeight="")}onKeydown(e,n){const i=this.option("key");i&&i===n&&this.toggle()}toggle(){const e=this.ref;if(e&&!e.isDisabled())return e.state===Fe.Hidden?(e.state=Fe.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){const e=this.ref;if(!e||e.isDisabled())return;const n=e.container;n&&(this.refresh(),n.offsetHeight,n.removeAttribute(co),n.classList.remove(lo),this.hidden=!1)}hide(){const e=this.ref,n=e&&e.container;n&&(this.refresh(),n.offsetHeight,n.classList.add(lo),n.setAttribute(co,"true")),this.hidden=!0}refresh(){const e=this.ref;if(!e||!e.state)return;const n=e.container,i=(n==null?void 0:n.firstChild)||null;n&&i&&i.childNodes.length&&(n.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){const e=this,n=e.instance;n.state===ie.Init?n.on("Carousel.init",e.onInit):e.onInit(),n.on("resize",e.onResize),n.on("keydown",e.onKeydown)}detach(){var e;const n=this,i=n.instance;i.off("Carousel.init",n.onInit),i.off("resize",n.onResize),i.off("keydown",n.onKeydown),(e=i.carousel)===null||e===void 0||e.detachPlugins(["Thumbs"]),n.ref=null}}Object.defineProperty(Kr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Xh});const Wn={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var Qe;(function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Disabled=2]="Disabled"})(Qe||(Qe={}));const Zh={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},Kh={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},uo="has-toolbar",Yn="fancybox__toolbar";class Qr extends De{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Qe.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var n;if(!e.carousel)return;let i=this.option("display"),s=this.option("absolute"),o=this.option("enabled");if(o==="auto"){const d=this.instance.carousel;let c=0;if(d)for(const u of d.slides)(u.panzoom||u.type==="image")&&c++;c||(o=!1)}o||(i=void 0);let r=0;const a={left:[],middle:[],right:[]};if(i)for(const d of["left","middle","right"])for(const c of i[d]){const u=this.createEl(c);u&&((n=a[d])===null||n===void 0||n.push(u),r++)}let l=null;if(r&&(l=this.createContainer()),l){for(const[d,c]of Object.entries(a)){const u=document.createElement("div");A(u,Yn+"__column is-"+d);for(const p of c)u.appendChild(p);s!=="auto"||d!=="middle"||c.length||(s=!0),l.appendChild(u)}s===!0&&A(l,"is-absolute"),this.state=Qe.Ready,this.onRefresh()}else this.state=Qe.Disabled}onClick(e){var n,i;const s=this.instance,o=s.getSlide(),r=o==null?void 0:o.panzoom,a=e.target,l=a&&he(a)?a.dataset:null;if(!l)return;if(l.fancyboxToggleThumbs!==void 0)return e.preventDefault(),e.stopPropagation(),void((n=s.plugins.Thumbs)===null||n===void 0||n.toggle());if(l.fancyboxToggleFullscreen!==void 0)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(l.fancyboxToggleSlideshow!==void 0){e.preventDefault(),e.stopPropagation();const u=(i=s.carousel)===null||i===void 0?void 0:i.plugins.Autoplay;let p=u.isActive;return r&&r.panMode==="mousemove"&&!p&&r.reset(),void(p?u.stop():u.start())}const d=l.panzoomAction,c=l.panzoomChange;if((c||d)&&(e.preventDefault(),e.stopPropagation()),c){let u={};try{u=JSON.parse(c)}catch{}r&&r.applyChange(u)}else d&&r&&r[d]&&r[d]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const e=this.container;if(!e)return;const n=this.instance.getSlide();if(!n||n.state!==re.Ready)return;const i=n&&!n.error&&n.panzoom;for(const r of e.querySelectorAll("[data-panzoom-action]"))i?(r.removeAttribute("disabled"),r.removeAttribute("tabindex")):(r.setAttribute("disabled",""),r.setAttribute("tabindex","-1"));let s=i&&i.canZoomIn(),o=i&&i.canZoomOut();for(const r of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))s?(r.removeAttribute("disabled"),r.removeAttribute("tabindex")):(r.setAttribute("disabled",""),r.setAttribute("tabindex","-1"));for(const r of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))o?(r.removeAttribute("disabled"),r.removeAttribute("tabindex")):(r.setAttribute("disabled",""),r.setAttribute("tabindex","-1"));for(const r of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){o||s?(r.removeAttribute("disabled"),r.removeAttribute("tabindex")):(r.setAttribute("disabled",""),r.setAttribute("tabindex","-1"));const a=r.querySelector("g");a&&(a.style.display=s?"":"none")}}onDone(e,n){var i;(i=n.panzoom)===null||i===void 0||i.on("afterTransform",()=>{this.instance.isCurrentSlide(n)&&this.onRefresh()}),this.instance.isCurrentSlide(n)&&this.onRefresh()}createContainer(){const e=this.instance.container;if(!e)return null;const n=this.option("parentEl")||e;let i=n.querySelector("."+Yn);return i||(i=document.createElement("div"),A(i,Yn),n.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&A(e,uo),this.container=i,i}createEl(e){const n=this.instance,i=n.carousel;if(!i||e==="toggleFS"||e==="fullscreen"&&!kr())return null;let s=null;const o=i.slides.length||0;let r=0,a=0;for(const d of i.slides)(d.panzoom||d.type==="image")&&r++,(d.type==="image"||d.downloadSrc)&&a++;if(o<2&&["infobar","prev","next"].includes(e))return s;if(Wn[e]!==void 0&&!r||e==="download"&&!a)return null;if(e==="thumbs"){const d=n.plugins.Thumbs;if(!d||!d.isEnabled)return null}if(e==="slideshow"&&(!i.plugins.Autoplay||o<2))return null;if(Wn[e]!==void 0){const d=Wn[e];s=document.createElement("button"),s.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),A(s,"f-button"),d.action&&(s.dataset.panzoomAction=d.action),d.change&&(s.dataset.panzoomChange=JSON.stringify(d.change)),s.appendChild(Ce(this.instance.localize(d.icon)))}else{const d=(this.option("items")||[])[e];d&&(s=Ce(this.instance.localize(d.tpl)),typeof d.click=="function"&&s.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),typeof d.click=="function"&&d.click.call(this,this,c)}))}const l=s==null?void 0:s.querySelector("svg");if(l)for(const[d,c]of Object.entries(Kh))l.getAttribute(d)||l.setAttribute(d,String(c));return s}removeContainer(){const e=this.container;e&&e.remove(),this.container=null,this.state=Qe.Disabled;const n=this.instance.container;n&&j(n,uo)}attach(){const e=this,n=e.instance;n.on("Carousel.initSlides",e.onReady),n.on("done",e.onDone),n.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){const e=this,n=e.instance;n.off("Carousel.initSlides",e.onReady),n.off("done",e.onDone),n.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}}Object.defineProperty(Qr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Zh});const Qh={Hash:class extends De{onReady(){Dt=!1}onChange(t){Ye&&clearTimeout(Ye);const{hash:e}=Ur(),{hash:n}=fn(),i=t.isOpeningSlide(t.getSlide());i&&(io=n===e?"":n),e&&e!==n&&(Ye=setTimeout(()=>{try{if(t.state===ie.Ready){let s="replaceState";i&&!Xt&&(s="pushState",Xt=!0),window.history[s]({},document.title,window.location.pathname+window.location.search+e)}}catch{}},300))}onClose(t){if(Ye&&clearTimeout(Ye),!Dt&&Xt)return Xt=!1,Dt=!1,void window.history.back();if(!Dt)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(io||""))}catch{}}attach(){const t=this.instance;t.on("ready",this.onReady),t.on(["Carousel.ready","Carousel.change"],this.onChange),t.on("close",this.onClose)}detach(){const t=this.instance;t.off("ready",this.onReady),t.off(["Carousel.ready","Carousel.change"],this.onChange),t.off("close",this.onClose)}static parseURL(){return fn()}static startFromUrl(){Hr()}static destroy(){window.removeEventListener("hashchange",jr,!1)}},Html:$r,Images:Vr,Slideshow:Yr,Thumbs:Kr,Toolbar:Qr},ho="with-fancybox",Xn="hide-scrollbar",fo="--fancybox-scrollbar-compensate",po="--fancybox-body-margin",Zn="aria-hidden",Kn="is-using-tab",Qn="is-animated",mo="is-compact",go="is-loading",Jn="is-opening",en="has-caption",ft="disabled",$e="tabindex",Eo="download",ei="href",pt="src",He=t=>typeof t=="string",bo=function(){var t=window.getSelection();return!!t&&t.type==="Range"};let ve,Te=null,We=null,yo=0,vo=0,To=0,Io=0;const mt=new Map;let Jh=0;class q extends ki{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],n={},i={}){super(n),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ie.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ve||(ve=kr()),this.id=n.id||++Jh,mt.set(this.id,this),this.userSlides=e,this.userPlugins=i,queueMicrotask(()=>{this.init()})}init(){if(this.state===ie.Destroy)return;this.state=ie.Init,this.attachPlugins(Object.assign(Object.assign({},q.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!Ct)return;const n=document,i=n.body,s=n.documentElement;if(i.classList.contains(Xn))return;let o=window.innerWidth-s.getBoundingClientRect().width;const r=parseFloat(window.getComputedStyle(i).marginRight);o<0&&(o=0),s.style.setProperty(fo,`${o}px`),r&&i.style.setProperty(po,`${r}px`),i.classList.add(Xn)})(),this.initLayout(),this.scale();const e=()=>{this.initCarousel(this.userSlides),this.state=ie.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(Zn,"false")},16)};this.option("Fullscreen.autoStart")&&ve&&!ve.isFullscreen()?ve.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}initLayout(){var e,n;const i=this.option("parentEl")||document.body,s=Ce(this.localize(this.option("tpl.main")||""));if(s){if(s.setAttribute("id",`fancybox-${this.id}`),s.setAttribute("aria-label",this.localize("{{MODAL}}")),s.classList.toggle(mo,this.isCompact),A(s,this.option("mainClass")||""),A(s,Jn),this.container=s,this.footer=s.querySelector(".fancybox__footer"),i.appendChild(s),A(document.documentElement,ho),Te&&We||(Te=document.createElement("span"),A(Te,"fancybox-focus-guard"),Te.setAttribute($e,"0"),Te.setAttribute(Zn,"true"),Te.setAttribute("aria-label","Focus guard"),We=Te.cloneNode(),(e=s.parentElement)===null||e===void 0||e.insertBefore(Te,s),(n=s.parentElement)===null||n===void 0||n.append(We)),s.addEventListener("mousedown",o=>{yo=o.pageX,vo=o.pageY,j(s,Kn)}),this.option("closeExisting"))for(const o of mt.values())o.id!==this.id&&o.close();else this.option("animated")&&(A(s,Qn),setTimeout(()=>{this.isClosing()||j(s,Qn)},350));this.emit("initLayout")}}initCarousel(e){const n=this.container;if(!n)return;const i=n.querySelector(".fancybox__carousel");if(!i)return;const s=this.carousel=new st(i,fe({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));s.on("*",(o,r,...a)=>{this.emit(`Carousel.${r}`,o,...a)}),s.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(o,r,a)=>{this.clearContent(a),a.state=void 0}),s.on("Panzoom.touchStart",()=>{var o,r;this.isCompact||this.endIdle(),!((o=document.activeElement)===null||o===void 0)&&o.closest(".f-thumbs")&&((r=this.container)===null||r===void 0||r.focus())}),s.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(s.on("Panzoom.afterTransform",(o,r)=>{const a=this.getSlide();if(a&&bi(a.el))return;const l=this.container;if(l){const d=Math.abs(r.current.f),c=d<1?"":Math.max(.5,Math.min(1,1-d/r.contentRect.fitHeight*1.5));l.style.setProperty("--fancybox-ts",c?"0s":""),l.style.setProperty("--fancybox-opacity",c+"")}}),s.on("Panzoom.touchEnd",(o,r,a)=>{var l;const d=this.getSlide();if(d&&bi(d.el)||r.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((l=document.activeElement)===null||l===void 0?void 0:l.nodeName)!==-1)return;const c=Math.abs(r.dragOffset.y);r.lockedAxis==="y"&&(c>=200||c>=50&&r.dragOffset.time<300)&&(a&&a.cancelable&&a.preventDefault(),this.close(a,"f-throwOut"+(r.current.f<0?"Up":"Down")))})),s.on("change",o=>{var r;let a=(r=this.getSlide())===null||r===void 0?void 0:r.triggerEl;if(a){const l=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:o.page});a.dispatchEvent(l)}}),s.on(["refresh","change"],o=>{const r=this.container;if(!r)return;for(const d of r.querySelectorAll("[data-fancybox-current-index]"))d.innerHTML=o.page+1;for(const d of r.querySelectorAll("[data-fancybox-count]"))d.innerHTML=o.pages.length;if(!o.isInfinite){for(const d of r.querySelectorAll("[data-fancybox-next]"))o.page<o.pages.length-1?(d.removeAttribute(ft),d.removeAttribute($e)):(d.setAttribute(ft,""),d.setAttribute($e,"-1"));for(const d of r.querySelectorAll("[data-fancybox-prev]"))o.page>0?(d.removeAttribute(ft),d.removeAttribute($e)):(d.setAttribute(ft,""),d.setAttribute($e,"-1"))}const a=this.getSlide();if(!a)return;let l=a.downloadSrc||"";l||a.type!=="image"||a.error||!He(a[pt])||(l=a[pt]);for(const d of r.querySelectorAll("[data-fancybox-download]")){const c=a.downloadFilename;l?(d.removeAttribute(ft),d.removeAttribute($e),d.setAttribute(ei,l),d.setAttribute(Eo,c||l),d.setAttribute("target","_blank")):(d.setAttribute(ft,""),d.setAttribute($e,"-1"),d.removeAttribute(ei),d.removeAttribute(Eo))}}),this.emit("initCarousel")}attachEvents(){const e=this,n=e.container;if(!n)return;n.addEventListener("click",e.onClick,{passive:!1,capture:!1}),n.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);const i=window.visualViewport;i&&(i.addEventListener("scroll",e.onResize),i.addEventListener("resize",e.onResize))}detachEvents(){const e=this,n=e.container;if(!n)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),n.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),n.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);const i=window.visualViewport;i&&(i.removeEventListener("resize",e.onResize),i.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){const e=this.container;if(!e)return;const n=window.visualViewport,i=Math.max(1,(n==null?void 0:n.scale)||1);let s="",o="",r="";if(n&&i>1){let a=`${n.offsetLeft}px`,l=`${n.offsetTop}px`;s=n.width*i+"px",o=n.height*i+"px",r=`translate3d(${a}, ${l}, 0) scale(${1/i})`}e.style.transform=r,e.style.width=s,e.style.height=o}onClick(e){var n;const{container:i,isCompact:s}=this;if(!i||this.isClosing())return;!s&&this.option("idle")&&this.resetIdle();const o=e.composedPath()[0];if(o.closest(".fancybox-spinner")||o.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(o.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(o.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(e.type==="click"&&e.detail===0||Math.abs(e.pageX-yo)>30||Math.abs(e.pageY-vo)>30)return;const r=document.activeElement;if(bo()&&r&&i.contains(r))return;if(s&&((n=this.getSlide())===null||n===void 0?void 0:n.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",e),e.defaultPrevented)return;let a=!1;if(o.closest(".fancybox__content")){if(r){if(r.closest("[contenteditable]"))return;o.matches(jn)||r.blur()}if(bo())return;a=this.option("contentClick")}else o.closest(".fancybox__carousel")&&!o.matches(jn)&&(a=this.option("backdropClick"));a==="close"?(e.preventDefault(),this.close(e)):a==="next"?(e.preventDefault(),this.next()):a==="prev"&&(e.preventDefault(),this.prev())}onWheel(e){const n=e.target;let i=this.option("wheel",e);n.closest(".fancybox__thumbs")&&(i="slide");const s=i==="slide",o=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(l,d){return Math.abs(d)>Math.abs(l)?d:l}),r=Math.max(-1,Math.min(1,o)),a=Date.now();this.pwt&&a-this.pwt<300?s&&e.preventDefault():(this.pwt=a,this.emit("wheel",e,r),e.defaultPrevented||(i==="close"?(e.preventDefault(),this.close(e)):i==="slide"&&(un(n)||(e.preventDefault(),this[r>0?"prev":"next"]()))))}onScroll(){window.scrollTo(To,Io)}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const n=e.key,i=this.option("keyboard");if(!i)return;const s=e.composedPath()[0],o=document.activeElement&&document.activeElement.classList,r=o&&o.contains("f-button")||s.dataset.carouselPage||s.dataset.carouselIndex;if(n!=="Escape"&&!r&&he(s)&&(s.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(s.nodeName)!==-1)||(e.key==="Tab"?A(this.container,Kn):j(this.container,Kn),e.ctrlKey||e.altKey||e.shiftKey))return;this.emit("keydown",n,e);const a=i[n];a&&typeof this[a]=="function"&&(e.preventDefault(),this[a]())}onResize(){const e=this.container;if(!e)return;const n=this.isCompact;e.classList.toggle(mo,n),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(e){const n=this.optionFor(e,"closeButton")||!1;if(n==="auto"){const s=this.plugins.Toolbar;if(s&&s.state===Qe.Ready)return}if(!n||!e.contentEl||e.closeBtnEl)return;const i=this.option("tpl.closeButton");if(i){const s=Ce(this.localize(i));e.closeBtnEl=e.contentEl.appendChild(s),e.el&&A(e.el,"has-close-btn")}}manageCaption(e=void 0){var n,i;const s="fancybox__caption",o=this.container;if(!o)return;j(o,en);const r=this.isCompact||this.option("commonCaption"),a=!r;if(this.caption&&this.stop(this.caption),a&&this.caption&&(this.caption.remove(),this.caption=null),r&&!this.caption)for(const u of((n=this.carousel)===null||n===void 0?void 0:n.slides)||[])u.captionEl&&(u.captionEl.remove(),u.captionEl=void 0,j(u.el,en),(i=u.el)===null||i===void 0||i.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||r&&!this.isCurrentSlide(e))return;const l=e.el;let d=this.optionFor(e,"caption","");if(!d)return void(r&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let c=null;if(a){if(c=e.captionEl||null,l&&!c){const u=s+`_${this.id}_${e.index}`;c=document.createElement("div"),A(c,s),c.setAttribute("id",u),e.captionEl=l.appendChild(c),A(l,en),l.setAttribute("aria-labelledby",u)}}else c=this.caption,c||(c=o.querySelector("."+s)),!c&&(c=document.createElement("div"),c.dataset.fancyboxCaption="",A(c,s),(this.footer||o).prepend(c)),A(o,en),this.caption=c;c&&(c.innerHTML="",He(d)||typeof d=="number"?c.innerHTML=d+"":d instanceof HTMLElement&&c.appendChild(d))}checkFocus(e){this.focus(e)}focus(e){var n;if(this.ignoreFocusChange)return;const i=document.activeElement||null,s=(e==null?void 0:e.target)||null,o=this.container,r=(n=this.carousel)===null||n===void 0?void 0:n.viewport;if(!o||!r||!e&&i&&o.contains(i))return;const a=this.getSlide(),l=a&&a.state===re.Ready?a.el:null;if(!l||l.contains(i)||o===i)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;const d=Array.from(o.querySelectorAll(jn));let c=[],u=null;for(let h of d){const f=!h.offsetParent||!!h.closest('[aria-hidden="true"]'),m=l&&l.contains(h),E=!r.contains(h);if(h===o||(m||E)&&!f){c.push(h);const g=h.dataset.origTabindex;g!==void 0&&g&&(h.tabIndex=parseFloat(g)),h.removeAttribute("data-orig-tabindex"),!h.hasAttribute("autoFocus")&&u||(u=h)}else{const g=h.dataset.origTabindex===void 0?h.getAttribute("tabindex")||"":h.dataset.origTabindex;g&&(h.dataset.origTabindex=g),h.tabIndex=-1}}let p=null;e?(!s||c.indexOf(s)<0)&&(p=u||o,c.length&&(i===We?p=c[0]:this.lastFocus!==o&&i!==Te||(p=c[c.length-1]))):p=a&&a.type==="image"?o:u||o,p&&no(p),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){const e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return((e=q.getInstance())===null||e===void 0?void 0:e.id)==this.id}animate(e=null,n="",i){if(!e||!n)return void(i&&i());this.stop(e);const s=o=>{o.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",s),delete e.dataset.animationName,i&&i(),j(e,n))};e.dataset.animationName=n,e.addEventListener("animationend",s),A(e,n)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,n="",i=!0){if(this.isClosing())return;const s=e.el;if(!s)return;let o=null;if(he(n)?o=n:(o=Ce(n+""),he(o)||(o=document.createElement("div"),o.innerHTML=n+"")),["img","picture","iframe","video","audio"].includes(o.nodeName.toLowerCase())){const r=document.createElement("div");r.appendChild(o),o=r}he(o)&&e.filter&&!e.error&&(o=o.querySelector(e.filter)),o&&he(o)?(A(o,"fancybox__content"),e.id&&o.setAttribute("id",e.id),s.classList.add(`has-${e.error?"error":e.type||"unknown"}`),s.prepend(o),o.style.display==="none"&&(o.style.display=""),getComputedStyle(o).getPropertyValue("display")==="none"&&(o.style.display=e.display||this.option("defaultDisplay")||"flex"),e.contentEl=o,i&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,n){const i=e.el,s=e.contentEl;i&&s&&(this.emit("reveal",e),this.hideLoading(e),e.state=re.Opening,(n=this.isOpeningSlide(e)?n===void 0?this.optionFor(e,"showClass"):n:"f-fadeIn")?this.animate(s,n,()=>{this.done(e)}):this.done(e))}done(e){this.isClosing()||(e.state=re.Ready,this.emit("done",e),A(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(()=>{var n;(n=e.panzoom)===null||n===void 0||n.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(e)&&(j(this.container,Jn),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(e){const n=this.getSlide();return!(!e||!n)&&n.index===e.index}isOpeningSlide(e){var n,i;return((n=this.carousel)===null||n===void 0?void 0:n.prevPage)===null&&e&&e.index===((i=this.getSlide())===null||i===void 0?void 0:i.index)}showLoading(e){e.state=re.Loading;const n=e.el;n&&(A(n,go),this.emit("loading",e),e.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===re.Loading){let i=Ce(Ui);A(i,"fancybox-spinner"),e.spinnerEl=i,n.prepend(i),this.animate(i,"f-fadeIn")}},250))}hideLoading(e){const n=e.el;if(!n)return;const i=e.spinnerEl;this.isClosing()?i==null||i.remove():(j(n,go),i&&this.animate(i,"f-fadeOut",()=>{i.remove()}),e.state===re.Loading&&(this.emit("loaded",e),e.state=re.Ready))}setError(e,n){if(this.isClosing())return;const i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,e),i.defaultPrevented)return;e.error=n,this.hideLoading(e),this.clearContent(e);const s=document.createElement("div");s.classList.add("fancybox-error"),s.innerHTML=this.localize(n||"<p>{{ERROR}}</p>"),this.setContent(e,s)}clearContent(e){if(e.state===void 0)return;this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0);const n=e.el;n&&(j(n,"has-error"),j(n,"has-unknown"),j(n,`has-${e.type||"unknown"}`)),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0}getSlide(){var e;const n=this.carousel;return((e=n==null?void 0:n.pages[n==null?void 0:n.page])===null||e===void 0?void 0:e.slides[0])||void 0}close(e,n){if(this.isClosing())return;const i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,e),i.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());const s=()=>{this.proceedClose(e,n)};this.startedFs&&ve&&ve.isFullscreen()?Promise.resolve(ve.exit()).then(()=>s()):s()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){const n=()=>{this.clearIdle(),this.idle=!0,A(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)n();else{const i=this.option("idle");i&&(this.idleTimer=setTimeout(n,i))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,j(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){ve&&(ve.isFullscreen()?ve.exit():ve.request().then(()=>{this.startedFs=!0}))}isClosing(){return[ie.Closing,ie.CustomClosing,ie.Destroy].includes(this.state)}proceedClose(e,n){var i,s;this.state=ie.Closing,this.clearIdle(),this.detachEvents();const o=this.container,r=this.carousel,a=this.getSlide(),l=a&&this.option("placeFocusBack")?a.triggerEl||this.option("triggerEl"):null;if(l&&(zr(l)?no(l):l.focus()),o&&(j(o,Jn),A(o,"is-closing"),o.setAttribute(Zn,"true"),this.option("animated")&&A(o,Qn),o.style.pointerEvents="none"),r){r.clearTransitions(),(i=r.panzoom)===null||i===void 0||i.destroy(),(s=r.plugins.Navigation)===null||s===void 0||s.detach();for(const d of r.slides){d.state=re.Closing,this.hideLoading(d);const c=d.contentEl;c&&this.stop(c);const u=d==null?void 0:d.panzoom;u&&(u.stop(),u.detachEvents(),u.detachObserver()),this.isCurrentSlide(d)||r.emit("removeSlide",d)}}To=window.scrollX,Io=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",e),this.state!==ie.CustomClosing?(n===void 0&&a&&(n=this.optionFor(a,"hideClass")),n&&a?(this.animate(a.contentEl,n,()=>{r&&r.emit("removeSlide",a)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var e;if(this.state===ie.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=ie.Destroy,(e=this.carousel)===null||e===void 0||e.destroy();const n=this.container;n&&n.remove(),mt.delete(this.id);const i=q.getInstance();i?i.focus():(Te&&(Te.remove(),Te=null),We&&(We.remove(),We=null),j(document.documentElement,ho),(()=>{if(!Ct)return;const s=document,o=s.body;o.classList.remove(Xn),o.style.setProperty(po,""),s.documentElement.style.setProperty(fo,"")})(),this.emit("destroy"))}static bind(e,n,i){if(!Ct)return;let s,o="",r={};if(e===void 0?s=document.body:He(e)?(s=document.body,o=e,typeof n=="object"&&(r=n||{})):(s=e,He(n)&&(o=n),typeof i=="object"&&(r=i||{})),!s||!he(s))return;o=o||"[data-fancybox]";const a=q.openers.get(s)||new Map;a.set(o,r),q.openers.set(s,a),a.size===1&&s.addEventListener("click",q.fromEvent)}static unbind(e,n){let i,s="";if(He(e)?(i=document.body,s=e):(i=e,He(n)&&(s=n)),!i)return;const o=q.openers.get(i);o&&s&&o.delete(s),s&&o||(q.openers.delete(i),i.removeEventListener("click",q.fromEvent))}static destroy(){let e;for(;e=q.getInstance();)e.destroy();for(const n of q.openers.keys())n.removeEventListener("click",q.fromEvent);q.openers=new Map}static fromEvent(e){if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let n=e.composedPath()[0];const i=n.closest("[data-fancybox-trigger]");if(i){const f=i.dataset.fancyboxTrigger||"",m=document.querySelectorAll(`[data-fancybox="${f}"]`),E=parseInt(i.dataset.fancyboxIndex||"",10)||0;n=m[E]||n}if(!(n&&n instanceof Element))return;let s,o,r,a;if([...q.openers].reverse().find(([f,m])=>!(!f.contains(n)||![...m].reverse().find(([E,g])=>{let b=n.closest(E);return!!b&&(s=f,o=E,r=b,a=g,!0)}))),!s||!o||!r)return;a=a||{},e.preventDefault(),n=r;let l=[],d=fe({},vi,a);d.event=e,d.triggerEl=n,d.delegate=i;const c=d.groupAll,u=d.groupAttr,p=u&&n?n.getAttribute(`${u}`):"";if((!n||p||c)&&(l=[].slice.call(s.querySelectorAll(o))),n&&!c&&(l=p?l.filter(f=>f.getAttribute(`${u}`)===p):[n]),!l.length)return;const h=q.getInstance();return h&&h.options.triggerEl&&l.indexOf(h.options.triggerEl)>-1?void 0:(n&&(d.startIndex=l.indexOf(n)),q.fromNodes(l,d))}static fromSelector(e,n,i){let s=null,o="",r={};if(He(e)?(s=document.body,o=e,typeof n=="object"&&(r=n||{})):e instanceof HTMLElement&&He(n)&&(s=e,o=n,typeof i=="object"&&(r=i||{})),!s||!o)return!1;const a=q.openers.get(s);return!!a&&(r=fe({},a.get(o)||{},r),!!r&&q.fromNodes(Array.from(s.querySelectorAll(o)),r))}static fromNodes(e,n){n=fe({},vi,n||{});const i=[];for(const s of e){const o=s.dataset||{},r=o[pt]||s.getAttribute(ei)||s.getAttribute("currentSrc")||s.getAttribute(pt)||void 0;let a;const l=n.delegate;let d;l&&i.length===n.startIndex&&(a=l instanceof HTMLImageElement?l:l.querySelector("img:not([aria-hidden])")),a||(a=s instanceof HTMLImageElement?s:s.querySelector("img:not([aria-hidden])")),a&&(d=a.currentSrc||a[pt]||void 0,!d&&a.dataset&&(d=a.dataset.lazySrc||a.dataset[pt]||void 0));const c={src:r,triggerEl:s,thumbEl:a,thumbElSrc:d,thumbSrc:d};for(const u in o){let p=o[u]+"";p=p!=="false"&&(p==="true"||p),c[u]=p}i.push(c)}return new q(i,n)}static getInstance(e){return e?mt.get(e):Array.from(mt.values()).reverse().find(n=>!n.isClosing()&&n)||null}static getSlide(){var e;return((e=q.getInstance())===null||e===void 0?void 0:e.getSlide())||null}static show(e=[],n={}){return new q(e,n)}static next(){const e=q.getInstance();e&&e.next()}static prev(){const e=q.getInstance();e&&e.prev()}static close(e=!0,...n){if(e)for(const i of mt.values())i.close(...n);else{const i=q.getInstance();i&&i.close(...n)}}}Object.defineProperty(q,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(q,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:vi}),Object.defineProperty(q,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:Qh}),Object.defineProperty(q,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});
